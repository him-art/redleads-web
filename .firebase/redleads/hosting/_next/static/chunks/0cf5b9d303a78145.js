(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48482,(e,t,i)=>{var r={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),i=t[0],r=t[1];return(i+r)*3/4-r},t.toByteArray=function(e){var t,i,s=l(e),o=s[0],a=s[1],u=new n((o+a)*3/4-a),h=0,c=a>0?o-4:o;for(i=0;i<c;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===a&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,u[h++]=255&t),1===a&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],o=0,a=r-n;o<a;o+=16383)s.push(function(e,t,r){for(var n,s=[],o=t;o<r;o+=3)n=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[n>>18&63]+i[n>>12&63]+i[n>>6&63]+i[63&n]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===n?s.push(i[(t=e[r-1])>>2]+i[t<<4&63]+"=="):2===n&&s.push(i[(t=(e[r-2]<<8)+e[r-1])>>10]+i[t>>4&63]+i[t<<2&63]+"="),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=s.length;o<a;++o)i[o]=s[o],r[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var r=i===t?0:4-i%4;return[i,r]}r[45]=62,r[95]=63},72:function(e,t,i){"use strict";var r=i(675),n=i(783),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,i){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,i)}function l(e,t,i){if("string"==typeof e){var r=e,n=t;if(("string"!=typeof n||""===n)&&(n="utf8"),!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);var s=0|f(r,n),l=o(s),u=l.write(r,n);return u!==s&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(A(e,ArrayBuffer)||e&&A(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(A(e,SharedArrayBuffer)||e&&A(e.buffer,SharedArrayBuffer)))return function(e,t,i){var r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),a.prototype),r}(e,t,i);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var h=e.valueOf&&e.valueOf();if(null!=h&&h!==e)return a.from(h,t,i);var p=function(e){if(a.isBuffer(e)){var t=0|d(e.length),i=o(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):c(e):"Buffer"===e.type&&Array.isArray(e.data)?c(e.data):void 0}(e);if(p)return p;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,i);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),o(e<0?0:0|d(e))}function c(e){for(var t=e.length<0?0:0|d(e.length),i=o(t),r=0;r<t;r+=1)i[r]=255&e[r];return i}t.Buffer=a,t.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,i){return l(e,t,i)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,i){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof i?o(e).fill(t,i):o(e).fill(t):o(e)},a.allocUnsafe=function(e){return h(e)},a.allocUnsafeSlow=function(e){return h(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function f(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||A(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return T(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return k(e).length;default:if(n)return r?-1:T(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,i){var n,s,o,a=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===i||i>this.length)&&(i=this.length),i<=0||(i>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",s=t;s<i;++s)n+=P[e[s]];return n}(this,t,i);case"utf8":case"utf-8":return _(this,t,i);case"ascii":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}(this,t,i);case"latin1":case"binary":return function(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}(this,t,i);case"base64":return n=this,s=t,o=i,0===s&&o===n.length?r.fromByteArray(n):r.fromByteArray(n.slice(s,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,i){for(var r=e.slice(t,i),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}(this,t,i);default:if(a)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),a=!0}}function g(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function v(e,t,i,r,n){var s;if(0===e.length)return -1;if("string"==typeof i?(r=i,i=0):i>0x7fffffff?i=0x7fffffff:i<-0x80000000&&(i=-0x80000000),(s=i*=1)!=s&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length)if(n)return -1;else i=e.length-1;else if(i<0)if(!n)return -1;else i=0;if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:m(e,t,i,r,n);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(n)return Uint8Array.prototype.indexOf.call(e,t,i);else return Uint8Array.prototype.lastIndexOf.call(e,t,i);return m(e,[t],i,r,n)}throw TypeError("val must be string, number or Buffer")}function m(e,t,i,r,n){var s,o=1,a=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;o=2,a/=2,l/=2,i/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var h=-1;for(s=i;s<a;s++)if(u(e,s)===u(t,-1===h?0:s-h)){if(-1===h&&(h=s),s-h+1===l)return h*o}else -1!==h&&(s-=s-h),h=-1}else for(i+l>a&&(i=a-l),s=i;s>=0;s--){for(var c=!0,d=0;d<l;d++)if(u(e,s+d)!==u(t,d)){c=!1;break}if(c)return s}return -1}a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),A(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var i=e.length,r=t.length,n=0,s=Math.min(i,r);n<s;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:+(r<i)},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);if(void 0===t)for(i=0,t=0;i<e.length;++i)t+=e[i].length;var i,r=a.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var s=e[i];if(A(s,Uint8Array)&&(s=a.from(s)),!a.isBuffer(s))throw TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},a.byteLength=f,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?_(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=function(e,t,i,r,n){if(A(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return -1;if(t>=i)return 1;if(t>>>=0,i>>>=0,r>>>=0,n>>>=0,this===e)return 0;for(var s=n-r,o=i-t,l=Math.min(s,o),u=this.slice(r,n),h=e.slice(t,i),c=0;c<l;++c)if(u[c]!==h[c]){s=u[c],o=h[c];break}return s<o?-1:+(o<s)},a.prototype.includes=function(e,t,i){return -1!==this.indexOf(e,t,i)},a.prototype.indexOf=function(e,t,i){return v(this,e,t,i,!0)},a.prototype.lastIndexOf=function(e,t,i){return v(this,e,t,i,!1)};function _(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var s,o,a,l,u=e[n],h=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c<=i)switch(c){case 1:u<128&&(h=u);break;case 2:(192&(s=e[n+1]))==128&&(l=(31&u)<<6|63&s)>127&&(h=l);break;case 3:s=e[n+1],o=e[n+2],(192&s)==128&&(192&o)==128&&(l=(15&u)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:s=e[n+1],o=e[n+2],a=e[n+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,c=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),n+=c}var d=r,f=d.length;if(f<=4096)return String.fromCharCode.apply(String,d);for(var p="",g=0;g<f;)p+=String.fromCharCode.apply(String,d.slice(g,g+=4096));return p}function y(e,t,i){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>i)throw RangeError("Trying to access beyond buffer length")}function b(e,t,i,r,n,s){if(!a.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw RangeError('"value" argument is out of bounds');if(i+r>e.length)throw RangeError("Index out of range")}function w(e,t,i,r,n,s){if(i+r>e.length||i<0)throw RangeError("Index out of range")}function E(e,t,i,r,s){return t*=1,i>>>=0,s||w(e,t,i,4,34028234663852886e22,-34028234663852886e22),n.write(e,t,i,r,23,4),i+4}function S(e,t,i,r,s){return t*=1,i>>>=0,s||w(e,t,i,8,17976931348623157e292,-17976931348623157e292),n.write(e,t,i,r,52,8),i+8}a.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n,s,o,a,l,u,h,c,d=this.length-t;if((void 0===i||i>d)&&(i=d),e.length>0&&(i<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var f=!1;;)switch(r){case"hex":return function(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=t.length;r>s/2&&(r=s/2);for(var o=0;o<r;++o){var a,l=parseInt(t.substr(2*o,2),16);if((a=l)!=a)break;e[i+o]=l}return o}(this,e,t,i);case"utf8":case"utf-8":return n=t,s=i,C(T(e,this.length-n),this,n,s);case"ascii":return o=t,a=i,C(I(e),this,o,a);case"latin1":case"binary":return function(e,t,i,r){return C(I(t),e,i,r)}(this,e,t,i);case"base64":return l=t,u=i,C(k(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h=t,c=i,C(function(e,t){for(var i,r,n=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(i=e.charCodeAt(s))>>8,n.push(i%256),n.push(r);return n}(e,this.length-h),this,h,c);default:if(f)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),f=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(e,t){var i=this.length;e=~~e,t=void 0===t?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r},a.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||y(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||y(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);for(var r=this[e],n=1,s=0;++s<t&&(n*=256);)r+=this[e+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||y(e,t,this.length);for(var r=t,n=1,s=this[e+--r];r>0&&(n*=256);)s+=this[e+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},a.prototype.readInt8=function(e,t){return(e>>>=0,t||y(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||y(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?0xffff0000|i:i},a.prototype.readInt16BE=function(e,t){e>>>=0,t||y(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?0xffff0000|i:i},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||y(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||y(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||y(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||y(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||y(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=1,o=0;for(this[t]=255&e;++o<i&&(s*=256);)this[t+o]=e/s&255;return t+i},a.prototype.writeUIntBE=function(e,t,i,r){if(e*=1,t>>>=0,i>>>=0,!r){var n=Math.pow(2,8*i)-1;b(this,e,t,i,n,0)}var s=i-1,o=1;for(this[t+s]=255&e;--s>=0&&(o*=256);)this[t+s]=e/o&255;return t+i},a.prototype.writeUInt8=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,i,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=0,o=1,a=0;for(this[t]=255&e;++s<i&&(o*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+i},a.prototype.writeIntBE=function(e,t,i,r){if(e*=1,t>>>=0,!r){var n=Math.pow(2,8*i-1);b(this,e,t,i,n-1,-n)}var s=i-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/o|0)-a&255;return t+i},a.prototype.writeInt8=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,i){return e*=1,t>>>=0,i||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,i){return E(this,e,t,!0,i)},a.prototype.writeFloatBE=function(e,t,i){return E(this,e,t,!1,i)},a.prototype.writeDoubleLE=function(e,t,i){return S(this,e,t,!0,i)},a.prototype.writeDoubleBE=function(e,t,i){return S(this,e,t,!1,i)},a.prototype.copy=function(e,t,i,r){if(!a.isBuffer(e))throw TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n=r-i;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,i,r);else if(this===e&&i<t&&t<r)for(var s=n-1;s>=0;--s)e[s+t]=this[s+i];else Uint8Array.prototype.set.call(e,this.subarray(i,r),t);return n},a.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){var n,s=e.charCodeAt(0);("utf8"===r&&s<128||"latin1"===r)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw RangeError("Out of range index");if(i<=t)return this;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{var o=a.isBuffer(e)?e:a.from(e,r),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<i-t;++n)this[n+t]=o[n%l]}return this};var x=/[^+/0-9A-Za-z-_]/g;function T(e,t){t=t||1/0;for(var i,r=e.length,n=null,s=[],o=0;o<r;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319||o+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=(n-55296<<10|i-56320)+65536}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else if(i<1114112){if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}else throw Error("Invalid code point")}return s}function I(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}function k(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(x,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function C(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length)&&!(n>=e.length);++n)t[n+i]=e[n];return n}function A(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var P=function(){for(var e="0123456789abcdef",t=Array(256),i=0;i<16;++i)for(var r=16*i,n=0;n<16;++n)t[r+n]=e[i]+e[n];return t}()},783:function(e,t){t.read=function(e,t,i,r,n){var s,o,a=8*n-r-1,l=(1<<a)-1,u=l>>1,h=-7,c=i?n-1:0,d=i?-1:1,f=e[t+c];for(c+=d,s=f&(1<<-h)-1,f>>=-h,h+=a;h>0;s=256*s+e[t+c],c+=d,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=256*o+e[t+c],c+=d,h-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=u}return(f?-1:1)*o*Math.pow(2,s-r)},t.write=function(e,t,i,r,n,s){var o,a,l,u=8*s-n-1,h=(1<<u)-1,c=h>>1,d=5960464477539062e-23*(23===n),f=r?0:s-1,p=r?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(a=+!!isNaN(t),o=h):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+c>=1?t+=d/l:t+=d*Math.pow(2,1-c),t*l>=2&&(o++,l/=2),o+c>=h?(a=0,o=h):o+c>=1?(a=(t*l-1)*Math.pow(2,n),o+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;e[i+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,u+=n;u>0;e[i+f]=255&o,f+=p,o/=256,u-=8);e[i+f-p]|=128*g}}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}},o=!0;try{r[e](i,i.exports,s),o=!1}finally{o&&delete n[e]}return i.exports}s.ab="/ROOT/.gemini/antigravity/scratch/redleads-website/node_modules/next/dist/compiled/buffer/",t.exports=s(72)},30255,e=>{"use strict";let t,i,r,n,s,o,a;var l,u,h,c,d,f,p,g,v,m,_,y,b,w,E,S=e.i(78683),x=e.i(48367);let T=function(e){let t=[],i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:((64512&n)==55296&&r+1<e.length&&(64512&e.charCodeAt(r+1))==56320?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++r)),t[i++]=n>>18|240,t[i++]=n>>12&63|128):t[i++]=n>>12|224,t[i++]=n>>6&63|128),t[i++]=63&n|128)}return t},I=function(e){let t=[],i=0,r=0;for(;i<e.length;){let n=e[i++];if(n<128)t[r++]=String.fromCharCode(n);else if(n>191&&n<224){let s=e[i++];t[r++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){let s=((7&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{let s=e[i++],o=e[i++];t[r++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&o)}}return t.join("")},k={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){let n=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,l=a?e[t+2]:0,u=n>>2,h=(3&n)<<4|o>>4,c=(15&o)<<2|l>>6,d=63&l;!a&&(d=64,s||(c=64)),r.push(i[u],i[h],i[c],i[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):I(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let i=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){let n=i[e.charAt(t++)],s=t<e.length?i[e.charAt(t)]:0,o=++t<e.length?i[e.charAt(t)]:64,a=++t<e.length?i[e.charAt(t)]:64;if(++t,null==n||null==s||null==o||null==a)throw new C;let l=n<<2|s>>4;if(r.push(l),64!==o){let e=s<<4&240|o>>2;if(r.push(e),64!==a){let e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class C extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let A=function(e){let t=T(e);return k.encodeByteArray(t,!0)},P=function(e){return A(e).replace(/\./g,"")},R=function(e){try{return k.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},D=()=>{try{return("undefined"!=typeof self?self:"undefined"!=typeof window?window:e.g).__FIREBASE_DEFAULTS__||(()=>{if(void 0===x.default||void 0===x.default.env)return;let e=x.default.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)})()||(()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&R(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},O=()=>D()?.config;class M{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,i))}}}function N(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function L(e){return(await fetch(e,{credentials:"include"})).ok}let F={},$=!1;function V(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function U(){let e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function j(){try{return"object"==typeof indexedDB}catch(e){return!1}}function B(){return new Promise((e,t)=>{try{let i=!0,r="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(r);n.onsuccess=()=>{n.result.close(),i||self.indexedDB.deleteDatabase(r),e(!0)},n.onupgradeneeded=()=>{i=!1},n.onerror=()=>{t(n.error?.message||"")}}catch(e){t(e)}})}function q(){return"undefined"!=typeof navigator&&!!navigator.cookieEnabled}class H extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name="FirebaseError",Object.setPrototypeOf(this,H.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z.prototype.create)}}class z{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){var i,r;let n=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?(i=o,r=n,i.replace(G,(e,t)=>{let i=r[t];return null!=i?String(i):`<${t}?>`})):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new H(s,l,n)}}let G=/\{\$([^}]+)}/g;function W(e,t){if(e===t)return!0;let i=Object.keys(e),r=Object.keys(t);for(let n of i){if(!r.includes(n))return!1;let i=e[n],s=t[n];if(K(i)&&K(s)){if(!W(i,s))return!1}else if(i!==s)return!1}for(let e of r)if(!i.includes(e))return!1;return!0}function K(e){return null!==e&&"object"==typeof e}function Y(e,t=1e3,i=2){let r=t*Math.pow(i,e),n=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+n)}function X(e){return e&&e._delegate?e._delegate:e}class J{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let Q="[DEFAULT]";class Z{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new M;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&e.resolve(i)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(i)return null;throw e}if(i)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Q})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:i});t.resolve(e)}catch(e){}}}}clearInstance(e=Q){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Q){return this.instances.has(e)}getOptions(e=Q){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[e,t]of this.instancesDeferred.entries())i===this.normalizeInstanceIdentifier(e)&&t.resolve(r);return r}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);let n=this.instances.get(i);return n&&e(n,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var i;let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e)===Q?void 0:i,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Q){return this.component?this.component.multipleInstances?e:Q:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ee{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Z(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let et=[];(l=u||(u={}))[l.DEBUG=0]="DEBUG",l[l.VERBOSE=1]="VERBOSE",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.SILENT=5]="SILENT";let ei={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},er=u.INFO,en={[u.DEBUG]:"log",[u.VERBOSE]:"log",[u.INFO]:"info",[u.WARN]:"warn",[u.ERROR]:"error"},es=(e,t,...i)=>{if(t<e.logLevel)return;let r=new Date().toISOString(),n=en[t];if(n)console[n](`[${r}]  ${e.name}:`,...i);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class eo{constructor(e){this.name=e,this._logLevel=er,this._logHandler=es,this._userLogHandler=null,et.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in u))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ei[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,u.DEBUG,...e),this._logHandler(this,u.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,u.VERBOSE,...e),this._logHandler(this,u.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,u.INFO,...e),this._logHandler(this,u.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,u.WARN,...e),this._logHandler(this,u.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,u.ERROR,...e),this._logHandler(this,u.ERROR,...e)}}let ea=new WeakMap,el=new WeakMap,eu=new WeakMap,eh=new WeakMap,ec=new WeakMap,ed={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return el.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eu.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return ef(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ef(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",s)},n=()=>{t(ef(e.result)),r()},s=()=>{i(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",s)})).then(t=>{t instanceof IDBCursor&&ea.set(t,e)}).catch(()=>{}),ec.set(t,e),t}if(eh.has(e))return eh.get(e);let r=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(ep(this),t),ef(ea.get(this))}:function(...t){return ef(e.apply(ep(this),t))}:function(t,...i){let r=e.call(ep(this),t,...i);return eu.set(r,t.sort?t.sort():[t]),ef(r)};return e instanceof IDBTransaction&&function(e){if(el.has(e))return;let t=new Promise((t,i)=>{let r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",s),e.removeEventListener("abort",s)},n=()=>{t(),r()},s=()=>{i(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",s),e.addEventListener("abort",s)});el.set(e,t)}(e),(t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,ed):e}(e);return r!==e&&(eh.set(e,r),ec.set(r,e)),r}let ep=e=>ec.get(e);function eg(e,t,{blocked:i,upgrade:r,blocking:n,terminated:s}={}){let o=indexedDB.open(e,t),a=ef(o);return r&&o.addEventListener("upgradeneeded",e=>{r(ef(o.result),e.oldVersion,e.newVersion,ef(o.transaction),e)}),i&&o.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}let ev=["get","getKey","getAll","getAllKeys","count"],em=["put","add","delete","clear"],e_=new Map;function ey(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(e_.get(t))return e_.get(t);let i=t.replace(/FromIndex$/,""),r=t!==i,n=em.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(n||ev.includes(i)))return;let s=async function(e,...t){let s=this.transaction(e,n?"readwrite":"readonly"),o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[i](...t),n&&s.done]))[0]};return e_.set(t,s),s}ed={...a=ed,get:(e,t,i)=>ey(e,t)||a.get(e,t,i),has:(e,t)=>!!ey(e,t)||a.has(e,t)};class eb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if(t=e.getComponent(),t?.type!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let ew="@firebase/app",eE="0.14.6",eS=new eo("@firebase/app"),ex="[DEFAULT]",eT={[ew]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eI=new Map,ek=new Map,eC=new Map;function eA(e,t){try{e.container.addComponent(t)}catch(i){eS.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,i)}}function eP(e,t){e.container.addOrOverwriteComponent(t)}function eR(e){let t=e.name;if(eC.has(t))return eS.debug(`There were multiple attempts to register component ${t}.`),!1;for(let i of(eC.set(t,e),eI.values()))eA(i,e);for(let t of ek.values())eA(t,e);return!0}function eD(e,t){let i=e.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),e.container.getProvider(t)}function eO(e,t,i=ex){eD(e,t).clearInstance(i)}function eM(e){return void 0!==e.options}function eN(e){return!eM(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function eL(e){return null!=e&&void 0!==e.settings}function eF(){eC.clear()}let e$=new z("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eV{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new J("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw e$.create("app-deleted",{appName:this._name})}}function eU(e,t){let i=R(e.split(".")[1]);null===i?console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(i).exp?console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):1e3*JSON.parse(i).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class ej extends eV{constructor(e,t,i,r){const n=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,s={name:i,automaticDataCollectionEnabled:n};void 0!==e.apiKey?super(e,s,r):super(e.options,s,r),this._serverConfig={automaticDataCollectionEnabled:n,...t},this._serverConfig.authIdToken&&eU(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&eU(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,eK(ew,eE,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){eW(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw e$.create("server-app-deleted")}}let eB="12.6.0";function eq(e,t={}){let i=e;"object"!=typeof t&&(t={name:t});let r={name:ex,automaticDataCollectionEnabled:!0,...t},n=r.name;if("string"!=typeof n||!n)throw e$.create("bad-app-name",{appName:String(n)});if(i||(i=O()),!i)throw e$.create("no-options");let s=eI.get(n);if(s)if(W(i,s.options)&&W(r,s.config))return s;else throw e$.create("duplicate-app",{appName:n});let o=new ee(n);for(let e of eC.values())o.addComponent(e);let a=new eV(i,r,o);return eI.set(n,a),a}function eH(e,t={}){let i;if(("undefined"!=typeof window||V())&&!V())throw e$.create("invalid-server-app-environment");let r=t||{};if(e&&(eM(e)?i=e.options:eN(e)?r=e:i=e),void 0===r.automaticDataCollectionEnabled&&(r.automaticDataCollectionEnabled=!0),i||(i=O()),!i)throw e$.create("no-options");let n={...r,...i};if(void 0!==n.releaseOnDeref&&delete n.releaseOnDeref,void 0!==r.releaseOnDeref&&"undefined"==typeof FinalizationRegistry)throw e$.create("finalization-registry-not-supported",{});let s=""+[...JSON.stringify(n)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),o=ek.get(s);if(o)return o.incRefCount(r.releaseOnDeref),o;let a=new ee(s);for(let e of eC.values())a.addComponent(e);let l=new ej(i,r,s,a);return ek.set(s,l),l}function ez(e=ex){let t=eI.get(e);if(!t&&e===ex&&O())return eq();if(!t)throw e$.create("no-app",{appName:e});return t}function eG(){return Array.from(eI.values())}async function eW(e){let t=!1,i=e.name;eI.has(i)?(t=!0,eI.delete(i)):ek.has(i)&&0>=e.decRefCount()&&(ek.delete(i),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function eK(e,t,i){let r=eT[e]??e;i&&(r+=`-${i}`);let n=r.match(/\s|\//),s=t.match(/\s|\//);if(n||s){let e=[`Unable to register library "${r}" with version "${t}":`];n&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),n&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eS.warn(e.join(" "));return}eR(new J(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}function eY(e,t){if(null!==e&&"function"!=typeof e)throw e$.create("invalid-log-argument");for(let i of et){let r=null;t&&t.level&&(r=ei[t.level]),null===e?i.userLogHandler=null:i.userLogHandler=(t,i,...n)=>{let s=n.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");i>=(r??t.logLevel)&&e({level:u[i].toLowerCase(),message:s,args:n,type:t.name})}}}function eX(e){et.forEach(t=>{t.setLogLevel(e)})}let eJ="firebase-heartbeat-store",eQ=null;function eZ(){return eQ||(eQ=eg("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(eJ)}catch(e){console.warn(e)}}}).catch(e=>{throw e$.create("idb-open",{originalErrorMessage:e.message})})),eQ}async function e0(e){try{let t=(await eZ()).transaction(eJ),i=await t.objectStore(eJ).get(e2(e));return await t.done,i}catch(e){if(e instanceof H)eS.warn(e.message);else{let t=e$.create("idb-get",{originalErrorMessage:e?.message});eS.warn(t.message)}}}async function e1(e,t){try{let i=(await eZ()).transaction(eJ,"readwrite"),r=i.objectStore(eJ);await r.put(t,e2(e)),await i.done}catch(e){if(e instanceof H)eS.warn(e.message);else{let t=e$.create("idb-set",{originalErrorMessage:e?.message});eS.warn(t.message)}}}function e2(e){return`${e.name}!${e.options.appId}`}class e3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e5(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=e6();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,i=e[0].date;for(let r=1;r<e.length;r++)e[r].date<i&&(i=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){eS.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=e6(),{heartbeatsToSend:t,unsentEntries:i}=function(e,t=1024){let i=[],r=e.slice();for(let n of e){let e=i.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),e4(i)>t){e.dates.pop();break}}else if(i.push({agent:n.agent,dates:[n.date]}),e4(i)>t){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=P(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return eS.warn(e),""}}}function e6(){return new Date().toISOString().substring(0,10)}class e5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!j()&&B().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await e0(this.app);return e?.heartbeats?e:{heartbeats:[]}}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return e1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return e1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function e4(e){return P(JSON.stringify({version:2,heartbeats:e})).length}eR(new J("platform-logger",e=>new eb(e),"PRIVATE")),eR(new J("heartbeat",e=>new e3(e),"PRIVATE")),eK(ew,eE,""),eK(ew,eE,"esm2020"),eK("fire-js",""),e.s(["SDK_VERSION",()=>eB,"_DEFAULT_ENTRY_NAME",()=>ex,"_addComponent",()=>eA,"_addOrOverwriteComponent",()=>eP,"_apps",()=>eI,"_clearComponents",()=>eF,"_components",()=>eC,"_getProvider",()=>eD,"_isFirebaseApp",()=>eM,"_isFirebaseServerApp",()=>eL,"_isFirebaseServerAppSettings",()=>eN,"_registerComponent",()=>eR,"_removeServiceInstance",()=>eO,"_serverApps",()=>ek,"deleteApp",()=>eW,"getApp",()=>ez,"getApps",()=>eG,"initializeApp",()=>eq,"initializeServerApp",()=>eH,"onLog",()=>eY,"registerVersion",()=>eK,"setLogLevel",()=>eX],43514),eK("firebase","12.7.0","app"),e.i(43514),e.i(48482);var e8="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,e7={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}var t=function(){this.blockSize=-1};function i(){}function r(e,t,i){i||(i=0);let r=Array(16);if("string"==typeof t)for(var n=0;n<16;++n)r[n]=t.charCodeAt(i++)|t.charCodeAt(i++)<<8|t.charCodeAt(i++)<<16|t.charCodeAt(i++)<<24;else for(n=0;n<16;++n)r[n]=t[i++]|t[i++]<<8|t[i++]<<16|t[i++]<<24;t=e.g[0],i=e.g[1],n=e.g[2];let s=e.g[3],o;o=t+(s^i&(n^s))+r[0]+0xd76aa478|0,o=s+(n^(t=i+(o<<7|o>>>25))&(i^n))+r[1]+0xe8c7b756|0,o=n+(i^(s=t+(o<<12|o>>>20))&(t^i))+r[2]+0x242070db|0,o=i+(t^(n=s+(o<<17|o>>>15))&(s^t))+r[3]+0xc1bdceee|0,o=t+(s^(i=n+(o<<22|o>>>10))&(n^s))+r[4]+0xf57c0faf|0,o=s+(n^(t=i+(o<<7|o>>>25))&(i^n))+r[5]+0x4787c62a|0,o=n+(i^(s=t+(o<<12|o>>>20))&(t^i))+r[6]+0xa8304613|0,o=i+(t^(n=s+(o<<17|o>>>15))&(s^t))+r[7]+0xfd469501|0,o=t+(s^(i=n+(o<<22|o>>>10))&(n^s))+r[8]+0x698098d8|0,o=s+(n^(t=i+(o<<7|o>>>25))&(i^n))+r[9]+0x8b44f7af|0,o=n+(i^(s=t+(o<<12|o>>>20))&(t^i))+r[10]+0xffff5bb1|0,o=i+(t^(n=s+(o<<17|o>>>15))&(s^t))+r[11]+0x895cd7be|0,o=t+(s^(i=n+(o<<22|o>>>10))&(n^s))+r[12]+0x6b901122|0,o=s+(n^(t=i+(o<<7|o>>>25))&(i^n))+r[13]+0xfd987193|0,o=n+(i^(s=t+(o<<12|o>>>20))&(t^i))+r[14]+0xa679438e|0,o=i+(t^(n=s+(o<<17|o>>>15))&(s^t))+r[15]+0x49b40821|0,i=n+(o<<22|o>>>10),o=t+(n^s&(i^n))+r[1]+0xf61e2562|0,t=i+(o<<5|o>>>27),o=s+(i^n&(t^i))+r[6]+0xc040b340|0,s=t+(o<<9|o>>>23),o=n+(t^i&(s^t))+r[11]+0x265e5a51|0,n=s+(o<<14|o>>>18),o=i+(s^t&(n^s))+r[0]+0xe9b6c7aa|0,i=n+(o<<20|o>>>12),o=t+(n^s&(i^n))+r[5]+0xd62f105d|0,t=i+(o<<5|o>>>27),o=s+(i^n&(t^i))+r[10]+0x2441453|0,s=t+(o<<9|o>>>23),o=n+(t^i&(s^t))+r[15]+0xd8a1e681|0,n=s+(o<<14|o>>>18),o=i+(s^t&(n^s))+r[4]+0xe7d3fbc8|0,i=n+(o<<20|o>>>12),o=t+(n^s&(i^n))+r[9]+0x21e1cde6|0,t=i+(o<<5|o>>>27),o=s+(i^n&(t^i))+r[14]+0xc33707d6|0,s=t+(o<<9|o>>>23),o=n+(t^i&(s^t))+r[3]+0xf4d50d87|0,n=s+(o<<14|o>>>18),o=i+(s^t&(n^s))+r[8]+0x455a14ed|0,i=n+(o<<20|o>>>12),o=t+(n^s&(i^n))+r[13]+0xa9e3e905|0,t=i+(o<<5|o>>>27),o=s+(i^n&(t^i))+r[2]+0xfcefa3f8|0,s=t+(o<<9|o>>>23),o=n+(t^i&(s^t))+r[7]+0x676f02d9|0,n=s+(o<<14|o>>>18),o=i+(s^t&(n^s))+r[12]+0x8d2a4c8a|0,o=t+((i=n+(o<<20|o>>>12))^n^s)+r[5]+0xfffa3942|0,o=s+((t=i+(o<<4|o>>>28))^i^n)+r[8]+0x8771f681|0,o=n+((s=t+(o<<11|o>>>21))^t^i)+r[11]+0x6d9d6122|0,o=i+((n=s+(o<<16|o>>>16))^s^t)+r[14]+0xfde5380c|0,o=t+((i=n+(o<<23|o>>>9))^n^s)+r[1]+0xa4beea44|0,o=s+((t=i+(o<<4|o>>>28))^i^n)+r[4]+0x4bdecfa9|0,o=n+((s=t+(o<<11|o>>>21))^t^i)+r[7]+0xf6bb4b60|0,o=i+((n=s+(o<<16|o>>>16))^s^t)+r[10]+0xbebfbc70|0,o=t+((i=n+(o<<23|o>>>9))^n^s)+r[13]+0x289b7ec6|0,o=s+((t=i+(o<<4|o>>>28))^i^n)+r[0]+0xeaa127fa|0,o=n+((s=t+(o<<11|o>>>21))^t^i)+r[3]+0xd4ef3085|0,o=i+((n=s+(o<<16|o>>>16))^s^t)+r[6]+0x4881d05|0,o=t+((i=n+(o<<23|o>>>9))^n^s)+r[9]+0xd9d4d039|0,o=s+((t=i+(o<<4|o>>>28))^i^n)+r[12]+0xe6db99e5|0,o=n+((s=t+(o<<11|o>>>21))^t^i)+r[15]+0x1fa27cf8|0,o=i+((n=s+(o<<16|o>>>16))^s^t)+r[2]+0xc4ac5665|0,i=n+(o<<23|o>>>9),o=t+(n^(i|~s))+r[0]+0xf4292244|0,t=i+(o<<6|o>>>26),o=s+(i^(t|~n))+r[7]+0x432aff97|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~i))+r[14]+0xab9423a7|0,n=s+(o<<15|o>>>17),o=i+(s^(n|~t))+r[5]+0xfc93a039|0,i=n+(o<<21|o>>>11),o=t+(n^(i|~s))+r[12]+0x655b59c3|0,t=i+(o<<6|o>>>26),o=s+(i^(t|~n))+r[3]+0x8f0ccc92|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~i))+r[10]+0xffeff47d|0,n=s+(o<<15|o>>>17),o=i+(s^(n|~t))+r[1]+0x85845dd1|0,i=n+(o<<21|o>>>11),o=t+(n^(i|~s))+r[8]+0x6fa87e4f|0,t=i+(o<<6|o>>>26),o=s+(i^(t|~n))+r[15]+0xfe2ce6e0|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~i))+r[6]+0xa3014314|0,n=s+(o<<15|o>>>17),o=i+(s^(n|~t))+r[13]+0x4e0811a1|0,i=n+(o<<21|o>>>11),o=t+(n^(i|~s))+r[4]+0xf7537e82|0,t=i+(o<<6|o>>>26),o=s+(i^(t|~n))+r[11]+0xbd3af235|0,s=t+(o<<10|o>>>22),o=n+(t^(s|~i))+r[2]+0x2ad7d2bb|0,n=s+(o<<15|o>>>17),o=i+(s^(n|~t))+r[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(n+(o<<21|o>>>11))|0,e.g[2]=e.g[2]+n|0,e.g[3]=e.g[3]+s|0}function n(e,t){this.h=t;let i=[],r=!0;for(let n=e.length-1;n>=0;n--){let s=0|e[n];r&&s==t||(i[n]=s,r=!1)}this.g=i}i.prototype=t.prototype,e.F=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.D=function(e,i,r){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[i].apply(e,n)},e.prototype.u=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.v=function(e,t){void 0===t&&(t=e.length);let i=t-this.blockSize,n=this.C,s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=i;)r(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(n[s++]=e.charCodeAt(o++),s==this.blockSize){r(this,n),s=0;break}}else for(;o<t;)if(n[s++]=e[o++],s==this.blockSize){r(this,n),s=0;break}}this.h=s,this.o+=t},e.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var i=e.length-8;i<e.length;++i)e[i]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,i=0;i<4;++i)for(let r=0;r<32;r+=8)e[t++]=this.g[i]>>>r&255;return e};var s,o={};function a(e){var t;return -128<=e&&e<128?(t=function(e){return new n([0|e],e<0?-1:0)},Object.prototype.hasOwnProperty.call(o,e)?o[e]:o[e]=t(e)):new n([0|e],e<0?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return u;if(e<0)return g(l(-e));let t=[],i=1;for(let r=0;e>=i;r++)t[r]=e/i|0,i*=0x100000000;return new n(t,0)}var u=a(0),c=a(1),d=a(0x1000000);function f(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return -1==e.h}function g(e){let t=e.g.length,i=[];for(let r=0;r<t;r++)i[r]=~e.g[r];return new n(i,~e.h).add(c)}function v(e,t){return e.add(g(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function _(e,t){this.g=e,this.h=t}function y(e,t){if(f(t))throw Error("division by zero");if(f(e))return new _(u,u);if(p(e))return t=y(g(e),t),new _(g(t.g),g(t.h));if(p(t))return t=y(e,g(t)),new _(g(t.g),t.h);if(e.g.length>30){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var i=c,r=t;0>=r.l(e);)i=b(i),r=b(r);var n=w(i,1),s=w(r,1);for(r=w(r,2),i=w(i,2);!f(r);){var o=s.add(r);0>=o.l(e)&&(n=n.add(i),s=o),r=w(r,1),i=w(i,1)}return t=v(e,n.j(t)),new _(n,t)}for(n=u;e.l(t)>=0;){for(r=(r=Math.ceil(Math.log(i=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))<=48?1:Math.pow(2,r-48),o=(s=l(i)).j(t);p(o)||o.l(e)>0;)i-=r,o=(s=l(i)).j(t);f(s)&&(s=c),n=n.add(s),e=v(e,o)}return new _(n,e)}function b(e){let t=e.g.length+1,i=[];for(let r=0;r<t;r++)i[r]=e.i(r)<<1|e.i(r-1)>>>31;return new n(i,e.h)}function w(e,t){let i=t>>5;t%=32;let r=e.g.length-i,s=[];for(let n=0;n<r;n++)s[n]=t>0?e.i(n+i)>>>t|e.i(n+i+1)<<32-t:e.i(n+i);return new n(s,e.h)}(s=n.prototype).m=function(){if(p(this))return-g(this).m();let e=0,t=1;for(let i=0;i<this.g.length;i++){let r=this.i(i);e+=(r>=0?r:0x100000000+r)*t,t*=0x100000000}return e},s.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+g(this).toString(e);let t=l(Math.pow(e,6));var i=this;let r="";for(;;){let n=y(i,t).g,s=(((i=v(i,n.j(t))).g.length>0?i.g[0]:i.h)>>>0).toString(e);if(f(i=n))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},s.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},s.l=function(e){return p(e=v(this,e))?-1:+!f(e)},s.abs=function(){return p(this)?g(this):this},s.add=function(e){let t=Math.max(this.g.length,e.g.length),i=[],r=0;for(let n=0;n<=t;n++){let t=r+(65535&this.i(n))+(65535&e.i(n)),s=(t>>>16)+(this.i(n)>>>16)+(e.i(n)>>>16);r=s>>>16,t&=65535,s&=65535,i[n]=s<<16|t}return new n(i,-0x80000000&i[i.length-1]?-1:0)},s.j=function(e){if(f(this)||f(e))return u;if(p(this))return p(e)?g(this).j(g(e)):g(g(this).j(e));if(p(e))return g(this.j(g(e)));if(0>this.l(d)&&0>e.l(d))return l(this.m()*e.m());let t=this.g.length+e.g.length,i=[];for(var r=0;r<2*t;r++)i[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){let n=this.i(r)>>>16,s=65535&this.i(r),o=e.i(t)>>>16,a=65535&e.i(t);i[2*r+2*t]+=s*a,m(i,2*r+2*t),i[2*r+2*t+1]+=n*a,m(i,2*r+2*t+1),i[2*r+2*t+1]+=s*o,m(i,2*r+2*t+1),i[2*r+2*t+2]+=n*o,m(i,2*r+2*t+2)}for(e=0;e<t;e++)i[e]=i[2*e+1]<<16|i[2*e];for(e=t;e<2*t;e++)i[e]=0;return new n(i,0)},s.B=function(e){return y(this,e).h},s.and=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)&e.i(r);return new n(i,this.h&e.h)},s.or=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)|e.i(r);return new n(i,this.h|e.h)},s.xor=function(e){let t=Math.max(this.g.length,e.g.length),i=[];for(let r=0;r<t;r++)i[r]=this.i(r)^e.i(r);return new n(i,this.h^e.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,e7.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.B,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=l,n.fromString=function e(t,i){if(0==t.length)throw Error("number format error: empty string");if((i=i||10)<2||36<i)throw Error("radix out of range: "+i);if("-"==t.charAt(0))return g(e(t.substring(1),i));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');let r=l(Math.pow(i,8)),n=u;for(let e=0;e<t.length;e+=8){var s=Math.min(8,t.length-e);let o=parseInt(t.substring(e,e+s),i);s<8?(s=l(Math.pow(i,s)),n=n.j(s).add(l(o))):n=(n=n.j(r)).add(l(o))}return n},h=e7.Integer=n}).apply(void 0!==e8?e8:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var e9="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g,te={};(function(){var e,t,i=Object.defineProperty,r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e9&&e9];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function n(e,t){if(t)e:{var n=r;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in n))break e;n=n[o]}(t=t(s=n[e=e[e.length-1]]))!=s&&null!=t&&i(n,e,{configurable:!0,writable:!0,value:t})}}n("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),n("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),n("Object.entries",function(e){return e||function(e){var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push([t,e[t]]);return i}});var s=s||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e,t,i){return e.call.apply(e.bind,arguments)}function u(e,t,i){return(u=l).apply(null,arguments)}function h(e,t){var i=Array.prototype.slice.call(arguments,1);return function(){var t=i.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function y(e,t){function i(){}i.prototype=t.prototype,e.Z=t.prototype,e.prototype=new i,e.prototype.constructor=e,e.Ob=function(e,i,r){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[i].apply(e,n)}}var b="undefined"!=typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function w(e){let t=e.length;if(t>0){let i=Array(t);for(let r=0;r<t;r++)i[r]=e[r];return i}return[]}function E(e,t){for(let t=1;t<arguments.length;t++){let r=arguments[t];var i=typeof r;if("array"==(i="object"!=i?i:r?Array.isArray(r)?"array":i:"null")||"object"==i&&"number"==typeof r.length){i=e.length||0;let t=r.length||0;e.length=i+t;for(let n=0;n<t;n++)e[i+n]=r[n]}else e.push(r)}}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new x,e=>e.reset());class x{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,k=new class{constructor(){this.h=this.g=null}add(e,t){let i=S.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},C=()=>{let e=Promise.resolve(void 0);T=()=>{e.then(A)}};function A(){let e;for(var t;e=null,k.g&&(e=k.g,k.g=k.g.next,k.g||(k.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){o.setTimeout(()=>{throw e},0)}(e)}S.j(t),S.h<100&&(S.h++,t.next=S.g,S.g=t)}I=!1}function P(){this.u=this.u,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(e){}return e}();function O(e){return/^[\s\xa0]*$/.test(e)}function M(e,t){R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}y(M,R),M.prototype.init=function(e,t){let i=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==i?t=e.fromElement:"mouseout"==i&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&M.Z.h.call(this)},M.prototype.h=function(){M.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),L=0;function F(e,t,i,r,n){this.listener=e,this.proxy=null,this.src=t,this.type=i,this.capture=!!r,this.ha=n,this.key=++L,this.da=this.fa=!1}function $(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e,t,i){for(let r in e)t.call(i,e[r],r,e)}function U(e){let t={};for(let i in e)t[i]=e[i];return t}let j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(e,t){let i,r;for(let t=1;t<arguments.length;t++){for(i in r=arguments[t])e[i]=r[i];for(let t=0;t<j.length;t++)i=j[t],Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}}function q(e){this.src=e,this.g={},this.h=0}function H(e,t){let i=t.type;if(i in e.g){var r,n=e.g[i],s=Array.prototype.indexOf.call(n,t,void 0);(r=s>=0)&&Array.prototype.splice.call(n,s,1),r&&($(t),0==e.g[i].length&&(delete e.g[i],e.h--))}}function z(e,t,i,r){for(let n=0;n<e.length;++n){let s=e[n];if(!s.da&&s.listener==t&&!!i==s.capture&&s.ha==r)return n}return -1}q.prototype.add=function(e,t,i,r,n){let s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);let o=z(e,t,r,n);return o>-1?(t=e[o],i||(t.fa=!1)):((t=new F(t,this.src,s,!!r,n)).fa=i,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,i,r,n,s){if(!t)throw Error("Invalid event type");let o=a(n)?!!n.capture:!!n,l=Q(e);if(l||(e[G]=l=new q(e)),(i=l.add(t,i,r,o,s)).proxy)return i;if(r=function e(t){return J.call(e.src,e.listener,t)},i.proxy=r,r.src=e,r.listener=i,e.addEventListener)D||(n=o),void 0===n&&(n=!1),e.addEventListener(t.toString(),r,n);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return i}function Y(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])H(t.i,e);else{var i=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(i,r,e.capture):t.detachEvent?t.detachEvent(X(i),r):t.addListener&&t.removeListener&&t.removeListener(r),(i=Q(t))?(H(i,e),0==i.h&&(i.src=null,t[G]=null)):$(e)}}}function X(e){return e in W?W[e]:W[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);let i=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=i.call(r,t)}return e}function Q(e){return(e=e[G])instanceof q?e:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(e){return"function"==typeof e?e:(e[Z]||(e[Z]=function(t){return e.handleEvent(t)}),e[Z])}function et(){P.call(this),this.i=new q(this),this.M=this,this.G=null}function ei(e,t){let i,r;var n,s=e.G;if(s)for(n=[];s;s=s.G)n.push(s);if(e=e.M,s=t.type||t,"string"==typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var o=t;B(t=new R(s,e),o)}if(o=!0,n)for(r=n.length-1;r>=0;r--)o=er(i=t.g=n[r],s,!0,t)&&o;if(o=er(i=t.g=e,s,!0,t)&&o,o=er(i,s,!1,t)&&o,n)for(r=0;r<n.length;r++)o=er(i=t.g=n[r],s,!1,t)&&o}function er(e,t,i,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let n=!0;for(let s=0;s<t.length;++s){let o=t[s];if(o&&!o.da&&o.capture==i){let t=o.listener,i=o.ha||o.src;o.fa&&H(e.i,o),n=!1!==t.call(i,r)&&n}}return n&&!r.defaultPrevented}y(et,P),et.prototype[N]=!0,et.prototype.removeEventListener=function(e,t,i,r){!function e(t,i,r,n,s){if(Array.isArray(i))for(var o=0;o<i.length;o++)e(t,i[o],r,n,s);else(n=a(n)?!!n.capture:!!n,r=ee(r),t&&t[N])?(t=t.i,(o=String(i).toString())in t.g&&(r=z(i=t.g[o],r,n,s))>-1&&($(i[r]),Array.prototype.splice.call(i,r,1),0==i.length&&(delete t.g[o],t.h--))):t&&(t=Q(t))&&(i=t.g[i.toString()],t=-1,i&&(t=z(i,r,n,s)),(r=t>-1?i[t]:null)&&Y(r))}(this,e,t,i,r)},et.prototype.N=function(){if(et.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let i=e.g[t];for(let e=0;e<i.length;e++)$(i[e]);delete e.g[t],e.h--}}this.G=null},et.prototype.J=function(e,t,i,r){return this.i.add(String(e),t,!1,i,r)},et.prototype.K=function(e,t,i,r){return this.i.add(String(e),t,!0,i,r)};class en extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=function(e,t){if("function"!=typeof e)if(e&&"function"==typeof e.handleEvent)e=u(e.handleEvent,e);else throw Error("Invalid listener argument");return Number(t)>0x7fffffff?-1:o.setTimeout(e,t||0)}(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let i=t.h;t.h=null,t.m.apply(null,i)}(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function es(e){P.call(this),this.h=e,this.g={}}y(es,P);var eo=[];function ea(e){V(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}es.prototype.N=function(){es.Z.N.call(this),ea(this)},es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var el=o.JSON.stringify,eu=o.JSON.parse,eh=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function ec(){}function ed(){}var ef={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ep(){R.call(this,"d")}function eg(){R.call(this,"c")}y(ep,R),y(eg,R);var ev={},em=null;function e_(){return em=em||new et}function ey(e){R.call(this,ev.Ia,e)}function eb(e){let t=e_();ei(t,new ey(t))}function ew(e,t){R.call(this,ev.STAT_EVENT,e),this.stat=t}function eE(e){let t=e_();ei(t,new ew(t,e))}function eS(e,t){R.call(this,ev.Ja,e),this.size=t}function ex(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function eT(){this.g=!0}function eI(e,t,i,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{let s=JSON.parse(t);if(s){for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var i=s[e];if(!(i.length<2)){var r=i[1];if(Array.isArray(r)&&!(r.length<1)){var n=r[0];if("noop"!=n&&"stop"!=n&&"close"!=n)for(let e=1;e<r.length;e++)r[e]=""}}}}return el(s)}catch(e){return t}}(e,i)+(r?" "+r:"")})}ev.Ia="serverreachability",y(ey,R),ev.STAT_EVENT="statevent",y(ew,R),ev.Ja="timingevent",y(eS,R),eT.prototype.ua=function(){this.g=!1},eT.prototype.info=function(){};var ek={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},eC={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function eA(){}function eP(e){return encodeURIComponent(String(e))}function eR(e,t,i,r){this.j=e,this.i=t,this.l=i,this.S=r||1,this.V=new es(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new eD}function eD(){this.i=null,this.g="",this.h=!1}y(eA,ec),eA.prototype.g=function(){return new XMLHttpRequest},e=new eA;var eO={},eM={};function eN(e,t,i){e.M=1,e.A=e5(e0(t)),e.u=i,e.R=!0,eL(e,null)}function eL(e,t){e.F=Date.now(),e$(e),e.B=e0(e.A);var i,r,n,s,o,l,h=e.B,c=e.S;Array.isArray(c)||(c=[String(c)]),tc(h.i,"t",c),e.C=0,h=e.j.L,e.h=new eD,e.g=tJ(e.j,h?t:null,!e.u),e.P>0&&(e.O=new en(u(e.Y,e,e.g),e.P)),t=e.V,h=e.g,c=e.ba;var d="readystatechange";Array.isArray(d)||(d&&(eo[0]=d.toString()),d=eo);for(let e=0;e<d.length;e++){let i=function e(t,i,r,n,s){if(n&&n.once)return function e(t,i,r,n,s){if(Array.isArray(i)){for(let o=0;o<i.length;o++)e(t,i[o],r,n,s);return null}return r=ee(r),t&&t[N]?t.K(i,r,a(n)?!!n.capture:!!n,s):K(t,i,r,!0,n,s)}(t,i,r,n,s);if(Array.isArray(i)){for(let o=0;o<i.length;o++)e(t,i[o],r,n,s);return null}return r=ee(r),t&&t[N]?t.J(i,r,a(n)?!!n.capture:!!n,s):K(t,i,r,!1,n,s)}(h,d[e],c||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}t=e.J?U(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),eb(),i=e.i,r=e.v,n=e.B,s=e.l,o=e.S,l=e.u,i.info(function(){if(i.g)if(l){var e="",t=l.split("&");for(let i=0;i<t.length;i++){var a=t[i].split("=");if(a.length>1){let t=a[0];a=a[1];let i=t.split("_");e=i.length>=2&&"type"==i[1]?e+(t+"=")+a+"&":e+(t+"=redacted&")}}}else e=null;else e=l;return"XMLHTTP REQ ("+s+") [attempt "+o+"]: "+r+"\n"+n+"\n"+e})}function eF(e){return!!e.g&&"GET"==e.v&&2!=e.M&&e.j.Aa}function e$(e){e.T=Date.now()+e.H,eV(e,e.H)}function eV(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=ex(u(e.aa,e),t)}function eU(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function ej(e){0==e.j.I||e.K||tG(e.j,e)}function eB(e){eU(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ea(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function eq(e,t){try{var i=e.j;if(0!=i.I&&(i.g==e||eK(i.h,e))){if(!e.L&&eK(i.h,e)&&3==i.I){try{var r=i.Ba.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var n=r;if(0==n[0]){e:if(!i.v){if(i.g)if(i.g.F+3e3<e.F)tz(i),tN(i);else break e;tB(i),eE(18)}}else i.xa=n[1],0<i.xa-i.K&&n[2]<37500&&i.F&&0==i.A&&!i.C&&(i.C=ex(u(i.Va,i),6e3));1>=eW(i.h)&&i.ta&&(i.ta=void 0)}else tK(i,11)}else if((e.L||i.g==e)&&tz(i),!O(t))for(n=i.Ba.g.parse(t),t=0;t<n.length;t++){let a=n[t],l=a[0];if(!(l<=i.K))if(i.K=l,a=a[1],2==i.I)if("c"==a[0]){i.M=a[1],i.ba=a[2];let t=a[3];null!=t&&(i.ka=t,i.j.info("VER="+i.ka));let n=a[4];null!=n&&(i.za=n,i.j.info("SVER="+i.za));let l=a[5];null!=l&&"number"==typeof l&&l>0&&(i.O=r=1.5*l,i.j.info("backChannelRequestTimeoutMs_="+r)),r=i;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(eY(s,s.h),s.h=null))}if(r.G){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,e6(r.J,r.G,e))}}if(i.I=3,i.l&&i.l.ra(),i.aa&&(i.T=Date.now()-e.F,i.j.info("Handshake RTT: "+i.T+"ms")),(r=i).na=tX(r,r.L?r.ba:null,r.W),e.L){eX(r.h,e);var o=r.O;o&&(e.H=o),e.D&&(eU(e),e$(e)),r.g=e}else tj(r);i.i.length>0&&tF(i)}else"stop"!=a[0]&&"close"!=a[0]||tK(i,7);else 3==i.I&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?tK(i,7):tM(i):"noop"!=a[0]&&i.l&&i.l.qa(a),i.A=0)}}eb(4)}catch(e){}}eR.prototype.ba=function(e){e=e.target;let t=this.O;t&&3==tP(e)?t.j():this.Y(e)},eR.prototype.Y=function(e){try{if(e==this.g)e:{let f=tP(this.g),p=this.g.ya(),g=this.g.ca();if(!(f<3)&&(3!=f||this.g&&(this.h.h||this.g.la()||tR(this.g)))){this.K||4!=f||7==p||(8==p||g<=0?eb(3):eb(2)),eU(this);var t=this.g.ca();this.X=t;var i=function(e){if(!eF(e))return e.g.la();let t=tR(e.g);if(""===t)return"";let i="",r=t.length,n=4==tP(e.g);if(!e.h.i){if("undefined"==typeof TextDecoder)return eB(e),ej(e),"";e.h.i=new o.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,i+=e.h.i.decode(t[s],{stream:!(n&&s==r-1)});return t.length=0,e.h.g+=i,e.C=0,e.h.g}(this);if(this.o=200==t,r=this.i,n=this.v,s=this.B,a=this.l,l=this.S,r.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+l+"]: "+n+"\n"+s+"\n"+f+" "+t}),this.o){if(this.U&&!this.L){t:{if(this.g){var r,n,s,a,l,u,h=this.g;if((u=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(u)){var c=u;break t}}c=null}if(e=c)eI(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,eq(this,e);else{this.o=!1,this.m=3,eE(12),eB(this),ej(this);break e}}if(this.R){let t;for(e=!0;!this.K&&this.C<i.length;)if((t=function(e,t){var i=e.C,r=t.indexOf("\n",i);return -1==r?eM:isNaN(i=Number(t.substring(i,r)))?eO:(r+=1)+i>t.length?eM:(t=t.slice(r,r+i),e.C=r+i,t)}(this,i))==eM){4==f&&(this.m=4,eE(14),e=!1),eI(this.i,this.l,null,"[Incomplete Response]");break}else if(t==eO){this.m=4,eE(15),eI(this.i,this.l,i,"[Invalid Chunk]"),e=!1;break}else eI(this.i,this.l,t,null),eq(this,t);if(eF(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=f||0!=i.length||this.h.h||(this.m=1,eE(16),e=!1),this.o=this.o&&e,e){if(i.length>0&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.aa&&!d.P&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+i.length),tq(d),d.P=!0,eE(11))}}else eI(this.i,this.l,i,"[Invalid Chunked Response]"),eB(this),ej(this)}else eI(this.i,this.l,i,null),eq(this,i);4==f&&eB(this),this.o&&!this.K&&(4==f?tG(this.j,this):(this.o=!1,e$(this)))}else(function(e){let t={};e=(e.g&&tP(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(O(e[r]))continue;var i=function(e){var t=1;e=e.split(":");let i=[];for(;t>0&&e.length;)i.push(e.shift()),t--;return e.length&&i.push(e.join(":")),i}(e[r]);let n=i[0];if("string"!=typeof(i=i[1]))continue;i=i.trim();let s=t[n]||[];t[n]=s,s.push(i)}var r=function(e){return e.join(", ")};for(let e in t)r.call(void 0,t[e],e,t)})(this.g),400==t&&i.indexOf("Unknown SID")>0?(this.m=3,eE(12)):(this.m=0,eE(13)),eB(this),ej(this)}}}catch(e){}finally{}},eR.prototype.cancel=function(){this.K=!0,eB(this)},eR.prototype.aa=function(){var e,t;this.D=null;let i=Date.now();i-this.T>=0?(e=this.i,t=this.B,e.info(function(){return"TIMEOUT: "+t}),2!=this.M&&(eb(),eE(17)),eB(this),this.m=2,ej(this)):eV(this,this.T-i)};var eH=class{constructor(e,t){this.g=e,this.map=t}};function ez(e){this.l=e||10,e=o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eG(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eW(e){return e.h?1:e.g?e.g.size:0}function eK(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function eY(e,t){e.g?e.g.add(t):e.h=t}function eX(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function eJ(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let i of e.g.values())t=t.concat(i.G);return t}return w(e.i)}ez.prototype.cancel=function(){if(this.i=eJ(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var eQ=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eZ(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof eZ?(this.l=e.l,e1(this,e.j),this.o=e.o,this.g=e.g,e2(this,e.u),this.h=e.h,e3(this,td(e.i)),this.m=e.m):e&&(t=String(e).match(eQ))?(this.l=!1,e1(this,t[1]||"",!0),this.o=e4(t[2]||""),this.g=e4(t[3]||"",!0),e2(this,t[4]),this.h=e4(t[5]||"",!0),e3(this,t[6]||"",!0),this.m=e4(t[7]||"")):(this.l=!1,this.i=new to(null,this.l))}function e0(e){return new eZ(e)}function e1(e,t,i){e.j=i?e4(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function e2(e,t){if(t){if(isNaN(t=Number(t))||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function e3(e,t,i){var r,n;t instanceof to?(e.i=t,r=e.i,(n=e.l)&&!r.j&&(ta(r),r.i=null,r.g.forEach(function(e,t){let i=t.toLowerCase();t!=i&&(tl(this,t),tc(this,i,e))},r)),r.j=n):(i||(t=e8(t,tn)),e.i=new to(t,e.l))}function e6(e,t,i){e.i.set(t,i)}function e5(e){return e6(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function e4(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function e8(e,t,i){return"string"==typeof e?(e=encodeURI(e).replace(t,e7),i&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function e7(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}eZ.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(e8(t,tt,!0),":");var i=this.g;return(i||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(e8(t,tt,!0),"@"),e.push(eP(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.u)&&e.push(":",String(i))),(i=this.h)&&(this.g&&"/"!=i.charAt(0)&&e.push("/"),e.push(e8(i,"/"==i.charAt(0)?tr:ti,!0))),(i=this.i.toString())&&e.push("?",i),(i=this.m)&&e.push("#",e8(i,ts)),e.join("")},eZ.prototype.resolve=function(e){let t=e0(this),i=!!e.j;i?e1(t,e.j):i=!!e.o,i?t.o=e.o:i=!!e.g,i?t.g=e.g:i=null!=e.u;var r=e.h;if(i)e2(t,e.u);else if(i=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var n=t.h.lastIndexOf("/");-1!=n&&(r=t.h.slice(0,n+1)+r)}if(".."==(n=r)||"."==n)r="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){r=0==n.lastIndexOf("/",0),n=n.split("/");let e=[];for(let t=0;t<n.length;){let i=n[t++];"."==i?r&&t==n.length&&e.push(""):".."==i?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==n.length&&e.push("")):(e.push(i),r=!0)}r=e.join("/")}else r=n}return i?t.h=r:i=""!==e.i.toString(),i?e3(t,td(e.i)):i=!!e.m,i&&(t.m=e.m),t};var tt=/[#\/\?@]/g,ti=/[#\?:]/g,tr=/[#\?]/g,tn=/[#\?@]/g,ts=/#/g;function to(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ta(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let i=0;i<e.length;i++){let r=e[i].indexOf("="),n,s=null;r>=0?(n=e[i].substring(0,r),s=e[i].substring(r+1)):n=e[i],t(n,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,i){e.add(decodeURIComponent(t.replace(/\+/g," ")),i)}))}function tl(e,t){ta(e),t=tf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tu(e,t){return ta(e),t=tf(e,t),e.g.has(t)}function th(e,t){ta(e);let i=[];if("string"==typeof t)tu(e,t)&&(i=i.concat(e.g.get(tf(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)i=i.concat(e[t]);return i}function tc(e,t,i){tl(e,t),i.length>0&&(e.i=null,e.g.set(tf(e,t),w(i)),e.h+=i.length)}function td(e){let t=new to;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function tf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tp(e,t,i,r,n){try{n&&(n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null),r(i)}catch(e){}}function tg(){this.g=new eh}function tv(e){this.i=e.Sb||null,this.h=e.ab||!1}function tm(e,t){et.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function t_(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function ty(e){e.readyState=4,e.l=null,e.j=null,e.B=null,tb(e)}function tb(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tw(e){let t="";return V(e,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function tE(e,t,i){e:{for(r in i){var r=!1;break e}r=!0}r||(i=tw(i),"string"==typeof e?null!=i&&eP(i):e6(e,t,i))}function tS(e){et.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=to.prototype).add=function(e,t){ta(this),this.i=null,e=tf(this,e);let i=this.g.get(e);return i||this.g.set(e,i=[]),i.push(t),this.h+=1,this},t.forEach=function(e,t){ta(this),this.g.forEach(function(i,r){i.forEach(function(i){e.call(t,i,r,this)},this)},this)},t.set=function(e,t){return ta(this),this.i=null,tu(this,e=tf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=th(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var i=t[r];let n=eP(i);i=th(this,i);for(let t=0;t<i.length;t++){let r=n;""!==i[t]&&(r+="="+eP(i[t])),e.push(r)}}return this.i=e.join("&")},y(tv,ec),tv.prototype.g=function(){return new tm(this.i,this.h)},y(tm,et),(t=tm.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,tb(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,ty(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tb(this)),this.g&&(this.readyState=3,tb(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;t_(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ty(this):tb(this),3==this.readyState&&t_(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,ty(this))},t.Na=function(e){this.g&&(this.response=e,ty(this))},t.ga=function(){this.g&&ty(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var i=t.next();!i.done;)e.push((i=i.value)[0]+": "+i[1]),i=t.next();return e.join("\r\n")},Object.defineProperty(tm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),y(tS,et);var tx=/^https?$/i,tT=["POST","PUT"];function tI(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,tk(e),tA(e)}function tk(e){e.A||(e.A=!0,ei(e,"complete"),ei(e,"error"))}function tC(e){if(e.h&&void 0!==s){if(e.v&&4==tP(e))setTimeout(e.Ca.bind(e),0);else if(ei(e,"readystatechange"),4==tP(e)){e.h=!1;try{let s=e.ca();switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,i,r=!0;break;default:r=!1}if(!(t=r)){if(i=0===s){let t=String(e.D).match(eQ)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),i=!tx.test(t?t.toLowerCase():"")}t=i}if(t)ei(e,"complete"),ei(e,"success");else{e.o=6;try{var n=tP(e)>2?e.g.statusText:""}catch(e){n=""}e.l=n+" ["+e.ca()+"]",tk(e)}}finally{tA(e)}}}}function tA(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);let i=e.g;e.g=null,t||ei(e,"ready");try{i.onreadystatechange=null}catch(e){}}}function tP(e){return e.g?e.g.readyState:0}function tR(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tD(e,t,i){return i&&i.internalChannelParams&&i.internalChannelParams[e]||t}function tO(e){this.za=0,this.i=[],this.j=new eT,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tD("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tD("baseRetryDelayMs",5e3,e),this.Za=tD("retryDelaySeedMs",1e4,e),this.Ta=tD("forwardChannelMaxRetries",2,e),this.va=tD("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new ez(e&&e.concurrentRequestLimit),this.Ba=new tg,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function tM(e){if(tL(e),3==e.I){var t=e.V++,i=e0(e.J);if(e6(i,"SID",e.M),e6(i,"RID",t),e6(i,"TYPE","terminate"),tV(e,i),(t=new eR(e,e.j,t)).M=2,t.A=e5(e0(i)),i=!1,o.navigator&&o.navigator.sendBeacon)try{i=o.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!i&&o.Image&&((new Image).src=t.A,i=!0),i||(t.g=tJ(t.j,null),t.g.ea(t.A)),t.F=Date.now(),e$(t)}tY(e)}function tN(e){e.g&&(tq(e),e.g.cancel(),e.g=null)}function tL(e){tN(e),e.v&&(o.clearTimeout(e.v),e.v=null),tz(e),e.h.cancel(),e.m&&("number"==typeof e.m&&o.clearTimeout(e.m),e.m=null)}function tF(e){if(!eG(e.h)&&!e.m){e.m=!0;var t=e.Ea;T||C(),I||(T(),I=!0),k.add(t,e),e.D=0}}function t$(e,t){var i;i=t?t.l:e.V++;let r=e0(e.J);e6(r,"SID",e.M),e6(r,"RID",i),e6(r,"AID",e.K),tV(e,r),e.u&&e.o&&tE(r,e.u,e.o),i=new eR(e,e.j,i,e.D+1),null===e.u&&(i.J=e.o),t&&(e.i=t.G.concat(e.i)),t=tU(e,i,1e3),i.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),eY(e.h,i),eN(i,r,t)}function tV(e,t){e.H&&V(e.H,function(e,i){e6(t,i,e)}),e.l&&V({},function(e,i){e6(t,i,e)})}function tU(e,t,i){i=Math.min(e.i.length,i);let r=e.l?u(e.l.Ka,e.l,e):null;e:{var n=e.i;let t=-1;for(;;){let e=["count="+i];-1==t?i>0?(t=n[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<i;u++){var s=n[u].g;let i=n[u].map;if((s-=t)<0)t=Math.max(0,n[u].g-100),l=!1;else try{s="req"+s+"_";try{var o=i instanceof Map?i:Object.entries(i);for(let[t,i]of o){let r=i;a(i)&&(r=el(i)),e.push(s+t+"="+encodeURIComponent(r))}}catch(t){throw e.push(s+"type="+encodeURIComponent("_badmap")),t}}catch(e){r&&r(i)}}if(l){o=e.join("&");break e}}o=void 0}return t.G=e=e.i.splice(0,i),o}function tj(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;T||C(),I||(T(),I=!0),k.add(t,e),e.A=0}}function tB(e){return!e.g&&!e.v&&!(e.A>=3)&&(e.Y++,e.v=ex(u(e.Da,e),tW(e,e.A)),e.A++,!0)}function tq(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function tH(e){e.g=new eR(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=e0(e.na);e6(t,"RID","rpc"),e6(t,"SID",e.M),e6(t,"AID",e.K),e6(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&e6(t,"TO",e.ia),e6(t,"TYPE","xmlhttp"),tV(e,t),e.u&&e.o&&tE(t,e.u,e.o),e.O&&(e.g.H=e.O);var i=e.g;e=e.ba,i.M=1,i.A=e5(e0(t)),i.u=null,i.R=!0,eL(i,e)}function tz(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function tG(e,t){var i,r=null;if(e.g==t){tz(e),tq(e),e.g=null;var n=2}else{if(!eK(e.h,t))return;r=t.G,eX(e.h,t),n=1}if(0!=e.I){if(t.o)if(1==n){r=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;ei(n=e_(),new eS(n,r)),tF(e)}else tj(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==n&&(i=t,!(eW(e.h)>=e.h.j-!!e.m)&&(e.m?(e.i=i.G.concat(e.i),!0):1!=e.I&&2!=e.I&&!(e.D>=(e.Sa?0:e.Ta))&&(e.m=ex(u(e.Ea,e,i),tW(e,e.D)),e.D++,!0)))||2==n&&tB(e)))switch(r&&r.length>0&&((t=e.h).i=t.i.concat(r)),s){case 1:tK(e,5);break;case 4:tK(e,10);break;case 3:tK(e,6);break;default:tK(e,2)}}}function tW(e,t){let i=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(i*=2),i*t}function tK(e,t){if(e.j.info("Error code "+t),2==t){let t,s,a;var i,r=u(e.bb,e),n=e.Ua;let l=!n;n=new eZ(n||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||e1(n,"https"),e5(n),l?function(e,t){let i=new eT;if(o.Image){let r=new Image;r.onload=h(tp,i,"TestLoadImage: loaded",!0,t,r),r.onerror=h(tp,i,"TestLoadImage: error",!1,t,r),r.onabort=h(tp,i,"TestLoadImage: abort",!1,t,r),r.ontimeout=h(tp,i,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r):(i=n.toString(),t=new eT,s=new AbortController,a=setTimeout(()=>{s.abort(),tp(t,"TestPingServer: timeout",!1,r)},1e4),fetch(i,{signal:s.signal}).then(e=>{clearTimeout(a),e.ok?tp(t,"TestPingServer: ok",!0,r):tp(t,"TestPingServer: server error",!1,r)}).catch(()=>{clearTimeout(a),tp(t,"TestPingServer: error",!1,r)}))}else eE(2);e.I=0,e.l&&e.l.pa(t),tY(e),tL(e)}function tY(e){if(e.I=0,e.ja=[],e.l){let t=eJ(e.h);(0!=t.length||0!=e.i.length)&&(E(e.ja,t),E(e.ja,e.i),e.h.i.length=0,w(e.i),e.i.length=0),e.l.oa()}}function tX(e,t,i){var r=i instanceof eZ?e0(i):new eZ(i);if(""!=r.g)t&&(r.g=t+"."+r.g),e2(r,r.u);else{var n=o.location;r=n.protocol,t=t?t+"."+n.hostname:n.hostname,n=+n.port;let e=new eZ(null);r&&e1(e,r),t&&(e.g=t),n&&e2(e,n),i&&(e.h=i),r=e}return i=e.G,t=e.wa,i&&t&&e6(r,i,t),e6(r,"VER",e.ka),tV(e,r),r}function tJ(e,t,i){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tS(e.Aa&&!e.ma?new tv({ab:i}):e.ma)).Fa(e.L),t}function tQ(){}function tZ(){}function t0(e,t){et.call(this),this.g=new tO(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!O(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!O(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t3(this)}function t1(e){ep.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let i in t){e=i;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t2(){eg.call(this),this.status=1}function t3(e){this.g=e}(t=tS.prototype).Fa=function(e){this.H=e},t.ea=function(t,i,r,n){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);i=i?i.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():e.g(),this.g.onreadystatechange=b(u(this.Ca,this));try{this.B=!0,this.g.open(i,String(t),!0),this.B=!1}catch(e){tI(this,e);return}if(t=r||"",r=new Map(this.headers),n)if(Object.getPrototypeOf(n)===Object.prototype)for(var s in n)r.set(s,n[s]);else if("function"==typeof n.keys&&"function"==typeof n.get)for(let e of n.keys())r.set(e,n.get(e));else throw Error("Unknown input type for opt_headers: "+String(n));for(let[e,a]of(n=Array.from(r.keys()).find(e=>"content-type"==e.toLowerCase()),s=o.FormData&&t instanceof o.FormData,!(Array.prototype.indexOf.call(tT,i,void 0)>=0)||n||s||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r))this.g.setRequestHeader(e,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(e){tI(this,e)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ei(this,"complete"),ei(this,"abort"),tA(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tA(this,!0)),tS.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tC(this):this.Xa())},t.Xa=function(){tC(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return tP(this)>2?this.g.status:-1}catch(e){return -1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eu(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=tO.prototype).ka=8,t.I=1,t.connect=function(e,t,i,r){eE(0),this.W=e,this.H=t||{},i&&void 0!==r&&(this.H.OSID=i,this.H.OAID=r),this.F=this.X,this.J=tX(this,null,this.W),tF(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;let n=new eR(this,this.j,e),s=this.o;if(this.U&&(s?B(s=U(s),this.U):s=this.U),null!==this.u||this.R||(n.J=s,s=null),this.S)e:{for(var t=0,i=0;i<this.i.length;i++){t:{var r=this.i[i];if("__data__"in r.map&&"string"==typeof(r=r.map.__data__)){r=r.length;break t}r=void 0}if(void 0===r)break;if((t+=r)>4096){t=i;break e}if(4096===t||i===this.i.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=tU(this,n,t),e6(i=e0(this.J),"RID",e),e6(i,"CVER",22),this.G&&e6(i,"X-HTTP-Session-Id",this.G),tV(this,i),s&&(this.R?t="headers="+eP(tw(s))+"&"+t:this.u&&tE(i,this.u,s)),eY(this.h,n),this.Ra&&e6(i,"TYPE","init"),this.S?(e6(i,"$req",t),e6(i,"SID","null"),n.U=!0,eN(n,i,null)):eN(n,i,t),this.I=2}}else 3==this.I&&(e?t$(this,e):0==this.i.length||eG(this.h)||t$(this))},t.Da=function(){if(this.v=null,tH(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=ex(u(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,eE(10),tN(this),tH(this))},t.Va=function(){null!=this.C&&(this.C=null,tN(this),tB(this),eE(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),eE(2)):(this.j.info("Failed to ping google.com"),eE(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=tQ.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},tZ.prototype.g=function(e,t){return new t0(e,t)},y(t0,et),t0.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},t0.prototype.close=function(){tM(this.g)},t0.prototype.o=function(e){var t=this.g;if("string"==typeof e){var i={};i.__data__=e,e=i}else this.v&&((i={}).__data__=el(e),e=i);t.i.push(new eH(t.Ya++,e)),3==t.I&&tF(t)},t0.prototype.N=function(){this.g.l=null,delete this.j,tM(this.g),delete this.g,t0.Z.N.call(this)},y(t1,ep),y(t2,eg),y(t3,tQ),t3.prototype.ra=function(){ei(this.g,"a")},t3.prototype.qa=function(e){ei(this.g,new t1(e))},t3.prototype.pa=function(e){ei(this.g,new t2)},t3.prototype.oa=function(){ei(this.g,"b")},tZ.prototype.createWebChannel=tZ.prototype.g,t0.prototype.send=t0.prototype.o,t0.prototype.open=t0.prototype.m,t0.prototype.close=t0.prototype.close,_=te.createWebChannelTransport=function(){return new tZ},m=te.getStatEventTarget=function(){return e_()},v=te.Event=ev,g=te.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ek.NO_ERROR=0,ek.TIMEOUT=8,ek.HTTP_ERROR=6,p=te.ErrorCode=ek,eC.COMPLETE="complete",f=te.EventType=eC,ed.EventType=ef,ef.OPEN="a",ef.CLOSE="b",ef.ERROR="c",ef.MESSAGE="d",et.prototype.listen=et.prototype.J,d=te.WebChannel=ed,te.FetchXmlHttpFactory=tv,tS.prototype.listenOnce=tS.prototype.K,tS.prototype.getLastError=tS.prototype.Ha,tS.prototype.getLastErrorCode=tS.prototype.ya,tS.prototype.getStatus=tS.prototype.ca,tS.prototype.getResponseJson=tS.prototype.La,tS.prototype.getResponseText=tS.prototype.la,tS.prototype.send=tS.prototype.ea,tS.prototype.setWithCredentials=tS.prototype.Fa,c=te.XhrIo=tS}).apply(void 0!==e9?e9:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let tt="@firebase/firestore",ti="4.9.3";class tr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tr.UNAUTHENTICATED=new tr(null),tr.GOOGLE_CREDENTIALS=new tr("google-credentials-uid"),tr.FIRST_PARTY=new tr("first-party-uid"),tr.MOCK_USER=new tr("mock-user");let tn="12.7.0",ts=new eo("@firebase/firestore");function to(){return ts.logLevel}function ta(e,...t){if(ts.logLevel<=u.DEBUG){let i=t.map(th);ts.debug(`Firestore (${tn}): ${e}`,...i)}}function tl(e,...t){if(ts.logLevel<=u.ERROR){let i=t.map(th);ts.error(`Firestore (${tn}): ${e}`,...i)}}function tu(e,...t){if(ts.logLevel<=u.WARN){let i=t.map(th);ts.warn(`Firestore (${tn}): ${e}`,...i)}}function th(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function tc(e,t,i){let r="Unexpected state";"string"==typeof t?r=t:i=t,td(e,r,i)}function td(e,t,i){let r=`FIRESTORE (${tn}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==i)try{r+=" CONTEXT: "+JSON.stringify(i)}catch(e){r+=" CONTEXT: "+i}throw tl(r),Error(r)}function tf(e,t,i,r){let n="Unexpected state";"string"==typeof i?n=i:r=i,e||td(t,n,r)}let tp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tg extends H{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class tv{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(tr.UNAUTHENTICATED))}shutdown(){}}class ty{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tb{constructor(e){this.t=e,this.currentUser=tr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tf(void 0===this.o,42304);let i=this.i,r=e=>this.i!==i?(i=this.i,t(e)):Promise.resolve(),n=new tv;this.o=()=>{this.i++,this.currentUser=this.u(),n.resolve(),n=new tv,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let t=n;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{ta("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(ta("FirebaseAuthCredentialsProvider","Auth not yet detected"),n.resolve(),n=new tv)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ta("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tf("string"==typeof t.accessToken,31837,{l:t}),new tm(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return tf(null===e||"string"==typeof e,2055,{h:e}),new tr(e)}}class tw{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=tr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tE{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new tw(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(tr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tx{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eL(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tf(void 0===this.o,3512);let i=e=>{null!=e.error&&ta("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let i=e.token!==this.m;return this.m=e.token,ta("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>i(t))};let r=e=>{ta("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?r(e):ta("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tS(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(tf("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new tS(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class tT{static newId(){let e=62*Math.floor(256/62),t="";for(;t.length<20;){let i=function(e){let t="undefined"!=typeof self&&(self.crypto||self.msCrypto),i=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(i);else for(let e=0;e<40;e++)i[e]=Math.floor(256*Math.random());return i}(0);for(let r=0;r<i.length;++r)t.length<20&&i[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[r]%62))}return t}}function tI(e,t){return e<t?-1:+(e>t)}function tk(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let i=e.charAt(r),n=t.charAt(r);if(i!==n)return tC(i)===tC(n)?tI(i,n):tC(i)?1:-1}return tI(e.length,t.length)}function tC(e){let t=e.charCodeAt(0);return t>=55296&&t<=57343}function tA(e,t,i){return e.length===t.length&&e.every((e,r)=>i(e,t[r]))}let tP="__name__";class tR{constructor(e,t,i){void 0===t?t=0:t>e.length&&tc(637,{offset:t,range:e.length}),void 0===i?i=e.length-t:i>e.length-t&&tc(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===tR.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof tR?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let i=tR.compareSegments(e.get(r),t.get(r));if(0!==i)return i}return tI(e.length,t.length)}static compareSegments(e,t){let i=tR.isNumericId(e),r=tR.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?tR.extractNumericId(e).compare(tR.extractNumericId(t)):tk(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return h.fromString(e.substring(4,e.length-2))}}class tD extends tR{construct(e,t,i){return new tD(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new tg(tp.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(e=>e.length>0))}return new tD(t)}static emptyPath(){return new tD([])}}let tO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tM extends tR{construct(e,t,i){return new tM(e,t,i)}static isValidIdentifier(e){return tO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tM.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===tP}static keyField(){return new tM([tP])}static fromServerFormat(e){let t=[],i="",r=0,n=()=>{if(0===i.length)throw new tg(tp.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},s=!1;for(;r<e.length;){let t=e[r];if("\\"===t){if(r+1===e.length)throw new tg(tp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new tg(tp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=t,r+=2}else"`"===t?s=!s:"."!==t||s?i+=t:n(),r++}if(n(),s)throw new tg(tp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tM(t)}static emptyPath(){return new tM([])}}class tN{constructor(e){this.path=e}static fromPath(e){return new tN(tD.fromString(e))}static fromName(e){return new tN(tD.fromString(e).popFirst(5))}static empty(){return new tN(tD.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tD.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tD.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tN(new tD(e.slice()))}}function tL(e,t){let i={typeString:e};return t&&(i.value=t),i}function tF(e,t){let i;if("object"!=typeof e||null===e||Object.getPrototypeOf(e)!==Object.prototype&&null!==Object.getPrototypeOf(e))throw new tg(tp.INVALID_ARGUMENT,"JSON must be an object");for(let r in t)if(t[r]){let n=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){i=`JSON missing required field: '${r}'`;break}let o=e[r];if(n&&typeof o!==n){i=`JSON field '${r}' must be a ${n}.`;break}if(void 0!==s&&o!==s.value){i=`Expected '${r}' field to equal '${s.value}'`;break}}if(i)throw new tg(tp.INVALID_ARGUMENT,i);return!0}class t${static now(){return t$.fromMillis(Date.now())}static fromDate(e){return t$.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*1e6);return new t$(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new tg(tp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new tg(tp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tI(this.nanoseconds,e.nanoseconds):tI(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t$._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tF(e,t$._jsonSchema))return new t$(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}t$._jsonSchemaVersion="firestore/timestamp/1.0",t$._jsonSchema={type:tL("string",t$._jsonSchemaVersion),seconds:tL("number"),nanoseconds:tL("number")};class tV{static fromTimestamp(e){return new tV(e)}static min(){return new tV(new t$(0,0))}static max(){return new tV(new t$(0x3afff4417f,0x3b9ac9ff))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tU{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new tU(tV.min(),tN.empty(),-1)}static max(){return new tU(tV.max(),tN.empty(),-1)}}class tj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class tB{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tc(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new tB((i,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(i,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof tB?t:tB.resolve(t)}catch(e){return tB.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):tB.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):tB.reject(t)}static resolve(e){return new tB((t,i)=>{t(e)})}static reject(e){return new tB((t,i)=>{i(e)})}static waitFor(e){return new tB((t,i)=>{let r=0,n=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++n,s&&n===r&&t()},e=>i(e))}),s=!0,n===r&&t()})}static or(e){let t=tB.resolve(!1);for(let i of e)t=t.next(e=>e?tB.resolve(e):i());return t}static forEach(e,t){let i=[];return e.forEach((e,r)=>{i.push(t.call(this,e,r))}),this.waitFor(i)}static mapArray(e,t){return new tB((i,r)=>{let n=e.length,s=Array(n),o=0;for(let a=0;a<n;a++){let l=a;t(e[l]).next(e=>{s[l]=e,++o===n&&i(s)},e=>r(e))}})}static doWhile(e,t){return new tB((i,r)=>{let n=()=>{!0===e()?t().next(()=>{n()},r):i()};n()})}}function tq(e){return"IndexedDbTransactionError"===e.name}class tH{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}}tH.ce=-1;function tz(e){return 0===e&&1/e==-1/0}function tG(e){let t=0;for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t++;return t}function tW(e,t){for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&t(i,e[i])}class tK{constructor(e,t){this.comparator=e,this.root=t||tX.EMPTY}insert(e,t){return new tK(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,tX.BLACK,null,null))}remove(e){return new tK(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tX.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tY(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tY(this.root,e,this.comparator,!1)}getReverseIterator(){return new tY(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tY(this.root,e,this.comparator,!0)}}class tY{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let n=1;for(;!e.isEmpty();)if(n=t?i(e.key,t):1,t&&r&&(n*=-1),n<0)e=this.isReverse?e.left:e.right;else{if(0===n){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tX{constructor(e,t,i,r,n){this.key=e,this.value=t,this.color=null!=i?i:tX.RED,this.left=null!=r?r:tX.EMPTY,this.right=null!=n?n:tX.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,n){return new tX(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=n?n:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,n=i(e,r.key);return(r=n<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===n?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i))).fixUp()}removeMin(){if(this.left.isEmpty())return tX.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let i,r=this;if(0>t(e,r.key))r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return tX.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,tX.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,tX.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tc(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tc(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw tc(27949);return e+ +!this.isRed()}}tX.EMPTY=null,tX.RED=!0,tX.BLACK=!1,tX.EMPTY=new class{constructor(){this.size=0}get key(){throw tc(57766)}get value(){throw tc(16141)}get color(){throw tc(16727)}get left(){throw tc(29726)}get right(){throw tc(36894)}copy(e,t,i,r,n){return this}insert(e,t,i){return new tX(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tJ{constructor(e){this.comparator=e,this.data=new tK(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tQ(this.data.getIterator())}getIteratorFrom(e){return new tQ(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof tJ)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,r=i.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new tJ(this.comparator);return t.data=e,t}}class tQ{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class tZ{constructor(e){this.fields=e,e.sort(tM.comparator)}static empty(){return new tZ([])}unionWith(e){let t=new tJ(tM.comparator);for(let e of this.fields)t=t.add(e);for(let i of e)t=t.add(i);return new tZ(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return tA(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class t0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class t1{constructor(e){this.binaryString=e}static fromBase64String(e){return new t1(function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new t0("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new t1(function(e){let t="";for(let i=0;i<e.length;++i)t+=String.fromCharCode(e[i]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tI(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}t1.EMPTY_BYTE_STRING=new t1("");let t2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function t3(e){if(tf(!!e,39018),"string"==typeof e){let t=0,i=t2.exec(e);if(tf(!!i,46558,{timestamp:e}),i[1]){let e=i[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:t6(e.seconds),nanos:t6(e.nanos)}}function t6(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function t5(e){return"string"==typeof e?t1.fromBase64String(e):t1.fromUint8Array(e)}let t4="server_timestamp",t8="__type__",t7="__previous_value__",t9="__local_write_time__";function ie(e){return(e?.mapValue?.fields||{})[t8]?.stringValue===t4}function it(e){let t=t3(e.mapValue.fields[t9].timestampValue);return new t$(t.seconds,t.nanos)}let ii="(default)";class ir{constructor(e,t){this.projectId=e,this.database=t||ii}static empty(){return new ir("","")}get isDefaultDatabase(){return this.database===ii}isEqual(e){return e instanceof ir&&e.projectId===this.projectId&&e.database===this.database}}let is="__max__",io={},ia="value";function il(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ie(e)?4:iw(e)?0x1fffffffffffff:iy(e)?10:11:tc(28295,{value:e})}function iu(e,t){if(e===t)return!0;let i=il(e);if(i!==il(t))return!1;switch(i){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return it(e).isEqual(it(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=t3(e.timestampValue),n=t3(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos;case 5:return e.stringValue===t.stringValue;case 6:return t5(e.bytesValue).isEqual(t5(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return t6(e.geoPointValue.latitude)===t6(t.geoPointValue.latitude)&&t6(e.geoPointValue.longitude)===t6(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return t6(e.integerValue)===t6(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let i=t6(e.doubleValue),r=t6(t.doubleValue);return i===r?tz(i)===tz(r):isNaN(i)&&isNaN(r)}return!1;case 9:return tA(e.arrayValue.values||[],t.arrayValue.values||[],iu);case 10:case 11:let s=e.mapValue.fields||{},o=t.mapValue.fields||{};if(tG(s)!==tG(o))return!1;for(let e in s)if(s.hasOwnProperty(e)&&(void 0===o[e]||!iu(s[e],o[e])))return!1;return!0;default:return tc(52216,{left:e})}}function ih(e,t){return void 0!==(e.values||[]).find(e=>iu(e,t))}function ic(e,t){var i,r,n,s,o,a;if(e===t)return 0;let l=il(e),u=il(t);if(l!==u)return tI(l,u);switch(l){case 0:case 0x1fffffffffffff:return 0;case 1:return tI(e.booleanValue,t.booleanValue);case 2:let h,c;return h=t6(e.integerValue||e.doubleValue),h<(c=t6(t.integerValue||t.doubleValue))?-1:h>c?1:h===c?0:isNaN(h)?isNaN(c)?0:-1:1;case 3:return id(e.timestampValue,t.timestampValue);case 4:return id(it(e),it(t));case 5:return tk(e.stringValue,t.stringValue);case 6:let d,f;return i=e.bytesValue,r=t.bytesValue,d=t5(i),f=t5(r),d.compareTo(f);case 7:return function(e,t){let i=e.split("/"),r=t.split("/");for(let e=0;e<i.length&&e<r.length;e++){let t=tI(i[e],r[e]);if(0!==t)return t}return tI(i.length,r.length)}(e.referenceValue,t.referenceValue);case 8:let p;return n=e.geoPointValue,s=t.geoPointValue,0!==(p=tI(t6(n.latitude),t6(s.latitude)))?p:tI(t6(n.longitude),t6(s.longitude));case 9:return ip(e.arrayValue,t.arrayValue);case 10:let g,v,m,_,y;return o=e.mapValue,a=t.mapValue,g=o.fields||{},v=a.fields||{},m=g[ia]?.arrayValue,_=v[ia]?.arrayValue,0!==(y=tI(m?.values?.length||0,_?.values?.length||0))?y:ip(m,_);case 11:return function(e,t){if(e===io&&t===io)return 0;if(e===io)return 1;if(t===io)return -1;let i=e.fields||{},r=Object.keys(i),n=t.fields||{},s=Object.keys(n);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){let t=tk(r[e],s[e]);if(0!==t)return t;let o=ic(i[r[e]],n[s[e]]);if(0!==o)return o}return tI(r.length,s.length)}(e.mapValue,t.mapValue);default:throw tc(23264,{he:l})}}function id(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return tI(e,t);let i=t3(e),r=t3(t),n=tI(i.seconds,r.seconds);return 0!==n?n:tI(i.nanos,r.nanos)}function ip(e,t){let i=e.values||[],r=t.values||[];for(let e=0;e<i.length&&e<r.length;++e){let t=ic(i[e],r[e]);if(t)return t}return tI(i.length,r.length)}function ig(e){var t,i;let r;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(r=t3(e.timestampValue),`time(${r.seconds},${r.nanos})`):"stringValue"in e?e.stringValue:"bytesValue"in e?t5(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,tN.fromName(t).toString()):"geoPointValue"in e?(i=e.geoPointValue,`geo(${i.latitude},${i.longitude})`):"arrayValue"in e?function(e){let t="[",i=!0;for(let r of e.values||[])i?i=!1:t+=",",t+=ig(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),i="{",r=!0;for(let n of t)r?r=!1:i+=",",i+=`${n}:${ig(e.fields[n])}`;return i+"}"}(e.mapValue):tc(61005,{value:e})}function iv(e){return!!e&&"integerValue"in e}function im(e){return!!e&&"arrayValue"in e}function i_(e){return!!e&&"mapValue"in e}function iy(e){return(e?.mapValue?.fields||{}).__type__?.stringValue==="__vector__"}function ib(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return tW(e.mapValue.fields,(e,i)=>t.mapValue.fields[e]=ib(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let i=0;i<(e.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=ib(e.arrayValue.values[i]);return t}return{...e}}function iw(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===is}class iE{constructor(e){this.value=e}static empty(){return new iE({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(!i_(t=(t.mapValue.fields||{})[e.get(i)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ib(t)}setAll(e){let t=tM.emptyPath(),i={},r=[];e.forEach((e,n)=>{if(!t.isImmediateParentOf(n)){let e=this.getFieldsMap(t);this.applyChanges(e,i,r),i={},r=[],t=n.popLast()}e?i[n.lastSegment()]=ib(e):r.push(n.lastSegment())});let n=this.getFieldsMap(t);this.applyChanges(n,i,r)}delete(e){let t=this.field(e.popLast());i_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];i_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){for(let r of(tW(t,(t,i)=>e[t]=i),i))delete e[r]}clone(){return new iE(ib(this.value))}}class iS{constructor(e,t,i,r,n,s,o){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=n,this.data=s,this.documentState=o}static newInvalidDocument(e){return new iS(e,0,tV.min(),tV.min(),tV.min(),iE.empty(),0)}static newFoundDocument(e,t,i,r){return new iS(e,1,t,tV.min(),i,r,0)}static newNoDocument(e,t){return new iS(e,2,t,tV.min(),tV.min(),iE.empty(),0)}static newUnknownDocument(e,t){return new iS(e,3,t,tV.min(),tV.min(),iE.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(tV.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=iE.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=iE.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tV.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof iS&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new iS(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ix{constructor(e,t){this.position=e,this.inclusive=t}}function iT(e,t,i){let r=0;for(let n=0;n<e.position.length;n++){let s=t[n],o=e.position[n];if(r=s.field.isKeyField()?tN.comparator(tN.fromName(o.referenceValue),i.key):ic(o,i.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function iI(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let i=0;i<e.position.length;i++)if(!iu(e.position[i],t.position[i]))return!1;return!0}class ik{constructor(e,t="asc"){this.field=e,this.dir=t}}class iC{}class iA extends iC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new iO(e,t,i):"array-contains"===t?new iF(e,i):"in"===t?new i$(e,i):"not-in"===t?new iV(e,i):"array-contains-any"===t?new iU(e,i):new iA(e,t,i)}static createKeyFieldInFilter(e,t,i){return"in"===t?new iM(e,i):new iN(e,i)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ic(t,this.value)):null!==t&&il(this.value)===il(t)&&this.matchesComparison(ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tc(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class iP extends iC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new iP(e,t)}matches(e){return iR(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iR(e){return"and"===e.op}function iD(e){for(let t of e.filters)if(t instanceof iP)return!1;return!0}class iO extends iA{constructor(e,t,i){super(e,t,i),this.key=tN.fromName(i.referenceValue)}matches(e){let t=tN.comparator(e.key,this.key);return this.matchesComparison(t)}}class iM extends iA{constructor(e,t){super(e,"in",t),this.keys=iL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iN extends iA{constructor(e,t){super(e,"not-in",t),this.keys=iL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iL(e,t){return(t.arrayValue?.values||[]).map(e=>tN.fromName(e.referenceValue))}class iF extends iA{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return im(t)&&ih(t.arrayValue,this.value)}}class i$ extends iA{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&ih(this.value.arrayValue,t)}}class iV extends iA{constructor(e,t){super(e,"not-in",t)}matches(e){if(ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ih(this.value.arrayValue,t)}}class iU extends iA{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!im(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ih(this.value.arrayValue,e))}}class ij{constructor(e,t=null,i=[],r=[],n=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=n,this.startAt=s,this.endAt=o,this.Te=null}}function iB(e,t=null,i=[],r=[],n=null,s=null,o=null){return new ij(e,t,i,r,n,s,o)}function iq(e){if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof iA)return t.field.canonicalString()+t.op.toString()+ig(t.value);if(iD(t)&&iR(t))return t.filters.map(t=>e(t)).join(",");{let i=t.filters.map(t=>e(t)).join(",");return`${t.op}(${i})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),null==e.limit||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ig(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ig(e)).join(",")),e.Te=t}return e.Te}function iH(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++){var i,r;if(i=e.orderBy[n],r=t.orderBy[n],!(i.dir===r.dir&&i.field.isEqual(r.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if(!function e(t,i){return t instanceof iA?i instanceof iA&&t.op===i.op&&t.field.isEqual(i.field)&&iu(t.value,i.value):t instanceof iP?i instanceof iP&&t.op===i.op&&t.filters.length===i.filters.length&&t.filters.reduce((t,r,n)=>t&&e(r,i.filters[n]),!0):void tc(19439)}(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!iI(e.startAt,t.startAt)&&iI(e.endAt,t.endAt)}class iz{constructor(e,t=null,i=[],r=[],n=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=n,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iG(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function iW(e){if(null===e.Ie){let t;e.Ie=[];let i=new Set;for(let t of e.explicitOrderBy)e.Ie.push(t),i.add(t.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new tJ(tM.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{i.has(t.canonicalString())||t.isKeyField()||e.Ie.push(new ik(t,r))}),i.has(tM.keyField().canonicalString())||e.Ie.push(new ik(tM.keyField(),r))}return e.Ie}function iK(e){return e.Ee||(e.Ee=function(e,t){if("F"===e.limitType)return iB(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new ik(e.field,t)});let i=e.endAt?new ix(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ix(e.startAt.position,e.startAt.inclusive):null;return iB(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}}(e,iW(e))),e.Ee}function iY(e,t,i){return new iz(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,i,e.startAt,e.endAt)}function iX(e,t){return iH(iK(e),iK(t))&&e.limitType===t.limitType}function iJ(e){return`${iq(iK(e))}|lt:${e.limitType}`}function iQ(e){var t;let i;return`Query(target=${i=(t=iK(e)).path.canonicalString(),null!==t.collectionGroup&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof iA?`${t.field.canonicalString()} ${t.op} ${ig(t.value)}`:t instanceof iP?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),null==t.limit||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(e=>ig(e)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(e=>ig(e)).join(",")),`Target(${i})`}; limitType=${e.limitType})`}function iZ(e,t){var i,r,n,s;let o,a,l;return t.isFoundDocument()&&(o=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(o):tN.isDocumentKey(e.path)?e.path.isEqual(o):e.path.isImmediateParentOf(o))&&function(e,t){for(let i of iW(e))if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1;return!0}(e,t)&&function(e,t){for(let i of e.filters)if(!i.matches(t))return!1;return!0}(e,t)&&(i=e,r=t,(!i.startAt||(n=i.startAt,a=iT(n,iW(i),r),n.inclusive?!!(a<=0):!!(a<0)))&&(!i.endAt||(s=i.endAt,l=iT(s,iW(i),r),s.inclusive?!!(l>=0):!!(l>0))))}class i0{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i){for(let[t,r]of i)if(this.equalsFn(t,e))return r}}has(e){return void 0!==this.get(e)}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tW(this.inner,(t,i)=>{for(let[t,r]of i)e(t,r)})}isEmpty(){var e=this.inner;for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}size(){return this.innerSize}}let i1=new tK(tN.comparator),i2=new tK(tN.comparator);function i3(...e){let t=i2;for(let i of e)t=t.insert(i.key,i);return t}function i6(){return new i0(e=>e.toString(),(e,t)=>e.isEqual(t))}new tK(tN.comparator);let i5=new tJ(tN.comparator);function i4(...e){let t=i5;for(let i of e)t=t.add(i);return t}let i8=new tJ(tI);class i7{constructor(){this._=void 0}}class i9 extends i7{}class re extends i7{constructor(e){super(),this.elements=e}}function rt(e,t){let i=ro(t);for(let t of e.elements)i.some(e=>iu(e,t))||i.push(t);return{arrayValue:{values:i}}}class ri extends i7{constructor(e){super(),this.elements=e}}function rr(e,t){let i=ro(t);for(let t of e.elements)i=i.filter(e=>!iu(e,t));return{arrayValue:{values:i}}}class rn extends i7{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function rs(e){return t6(e.integerValue||e.doubleValue)}function ro(e){return im(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ra{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ra}static exists(e){return new ra(void 0,e)}static updateTime(e){return new ra(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ru{}function rh(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new r_(e.key,ra.none()):new rf(e.key,e.data,ra.none());{let i=e.data,r=iE.empty(),n=new tJ(tM.comparator);for(let e of t.fields)if(!n.has(e)){let t=i.field(e);null===t&&e.length>1&&(e=e.popLast(),t=i.field(e)),null===t?r.delete(e):r.set(e,t),n=n.add(e)}return new rp(e.key,r,new tZ(n.toArray()),ra.none())}}function rc(e,t,i,r){return e instanceof rf?function(e,t,i,r){if(!rl(e.precondition,t))return i;let n=e.value.clone(),s=rm(e.fieldTransforms,r,t);return n.setAll(s),t.convertToFoundDocument(t.version,n).setHasLocalMutations(),null}(e,t,i,r):e instanceof rp?function(e,t,i,r){if(!rl(e.precondition,t))return i;let n=rm(e.fieldTransforms,r,t),s=t.data;return(s.setAll(rg(e)),s.setAll(n),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===i)?null:i.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,i,r):rl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):i}function rd(e,t){var i,r;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(i=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===i&&void 0===r||!(!i||!r)&&tA(i,r,(e,t)=>{var i,r;return e.field.isEqual(t.field)&&(i=e.transform,r=t.transform,i instanceof re&&r instanceof re||i instanceof ri&&r instanceof ri?tA(i.elements,r.elements,iu):i instanceof rn&&r instanceof rn?iu(i.Ae,r.Ae):i instanceof i9&&r instanceof i9)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class rf extends ru{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rp extends ru{constructor(e,t,i,r,n=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=n,this.type=1}getFieldMask(){return this.fieldMask}}function rg(e){let t=new Map;return e.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){let r=e.data.field(i);t.set(i,r)}}),t}function rv(e,t,i){let r=new Map;tf(e.length===i.length,32656,{Re:i.length,Ve:e.length});for(let s=0;s<i.length;s++){var n;let o=e[s],a=o.transform,l=t.data.field(o.field);r.set(o.field,(n=i[s],a instanceof re?rt(a,l):a instanceof ri?rr(a,l):n))}return r}function rm(e,t,i){let r=new Map;for(let n of e){let e=n.transform,s=i.data.field(n.field);r.set(n.field,function(e,t,i){var r;let n,s,o;return e instanceof i9?(r=t,n={fields:{[t8]:{stringValue:t4},[t9]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}},r&&ie(r)&&(r=function e(t){let i=t.mapValue.fields[t7];return ie(i)?e(i):i}(r)),r&&(n.fields[t7]=r),{mapValue:n}):e instanceof re?rt(e,t):e instanceof ri?rr(e,t):(o=rs(s=function(e,t){return e instanceof rn?iv(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}(e,t))+rs(e.Ae),iv(s)&&iv(e.Ae)?{integerValue:""+o}:function(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tz(t)?"-0":t}}(e.serializer,o))}(e,s,t))}return r}class r_ extends ru{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ry{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let r=this.mutations[t];r.key.isEqual(e.key)&&function(e,t,i){let r,n;e instanceof rf?(r=e.value.clone(),n=rv(e.fieldTransforms,t,i.transformResults),r.setAll(n),t.convertToFoundDocument(i.version,r).setHasCommittedMutations()):e instanceof rp?function(e,t,i){if(!rl(e.precondition,t))return t.convertToUnknownDocument(i.version);let r=rv(e.fieldTransforms,t,i.transformResults),n=t.data;n.setAll(rg(e)),n.setAll(r),t.convertToFoundDocument(i.version,n).setHasCommittedMutations()}(e,t,i):t.convertToNoDocument(i.version).setHasCommittedMutations()}(r,e,i[t])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=rc(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=rc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=i6();return this.mutations.forEach(r=>{let n=e.get(r.key),s=n.overlayedDocument,o=this.applyToLocalView(s,n.mutatedFields),a=rh(s,o=t.has(r.key)?null:o);null!==a&&i.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(tV.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),i4())}isEqual(e){return this.batchId===e.batchId&&tA(this.mutations,e.mutations,(e,t)=>rd(e,t))&&tA(this.baseMutations,e.baseMutations,(e,t)=>rd(e,t))}}class rb{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}(b=y||(y={}))[b.OK=0]="OK",b[b.CANCELLED=1]="CANCELLED",b[b.UNKNOWN=2]="UNKNOWN",b[b.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",b[b.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",b[b.NOT_FOUND=5]="NOT_FOUND",b[b.ALREADY_EXISTS=6]="ALREADY_EXISTS",b[b.PERMISSION_DENIED=7]="PERMISSION_DENIED",b[b.UNAUTHENTICATED=16]="UNAUTHENTICATED",b[b.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",b[b.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",b[b.ABORTED=10]="ABORTED",b[b.OUT_OF_RANGE=11]="OUT_OF_RANGE",b[b.UNIMPLEMENTED=12]="UNIMPLEMENTED",b[b.INTERNAL=13]="INTERNAL",b[b.UNAVAILABLE=14]="UNAVAILABLE",b[b.DATA_LOSS=15]="DATA_LOSS",new h([0xffffffff,0xffffffff],0);class rw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rE(e){let t;return tf(!!e,49232),tV.fromTimestamp(new t$((t=t3(e)).seconds,t.nanos))}function rS(e,t){let i=new tD(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?i:i.child(t)}function rx(e){return tM.fromServerFormat(e.fieldPath)}class rT{constructor(e){this.yt=e}}class rI{Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(+!!e.booleanValue);else if("integerValue"in e)this.Ft(t,15),t.Mt(t6(e.integerValue));else if("doubleValue"in e){let i=t6(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),tz(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),"string"==typeof i&&(i=t3(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(t5(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?iw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):iy(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):tc(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let i=e.fields||{};for(let e of(this.Ft(t,55),Object.keys(i)))this.Ot(e,t),this.Ct(i[e],t)}kt(e,t){let i=e.fields||{};this.Ft(t,53);let r=i[ia].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(t6(r)),this.Ot(ia,t),this.Ct(i[ia],t)}Qt(e,t){let i=e.values||[];for(let e of(this.Ft(t,50),i))this.Ct(e,t)}Lt(e,t){this.Ft(t,37),tN.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}rI.Kt=new rI;class rk{constructor(){this.Cn=new rC}addToCollectionParentIndex(e,t){return this.Cn.add(t),tB.resolve()}getCollectionParents(e,t){return tB.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return tB.resolve()}deleteFieldIndex(e,t){return tB.resolve()}deleteAllFieldIndexes(e){return tB.resolve()}createTargetIndexes(e,t){return tB.resolve()}getDocumentsMatchingTarget(e,t){return tB.resolve(null)}getIndexType(e,t){return tB.resolve(0)}getFieldIndexes(e,t){return tB.resolve([])}getNextCollectionGroupToUpdate(e){return tB.resolve(null)}getMinOffset(e,t){return tB.resolve(tU.min())}getMinOffsetFromCollectionGroup(e,t){return tB.resolve(tU.min())}updateCollectionGroup(e,t,i){return tB.resolve()}updateIndexEntries(e,t){return tB.resolve()}}class rC{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new tJ(tD.comparator),n=!r.has(i);return this.index[t]=r.add(i),n}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new tJ(tD.comparator)).toArray()}}new Uint8Array(0);class rA{static withCacheSize(e){return new rA(e,rA.DEFAULT_COLLECTION_PERCENTILE,rA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}rA.DEFAULT_COLLECTION_PERCENTILE=10,rA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rA.DEFAULT=new rA(0x2800000,rA.DEFAULT_COLLECTION_PERCENTILE,rA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rA.DISABLED=new rA(-1,0,0);class rP{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rP(0)}static cr(){return new rP(-1)}}class rR{constructor(){this.changes=new i0(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,iS.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return void 0!==i?tB.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rO{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==i&&rc(i.mutation,e,tZ.empty(),t$.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,i4()).next(()=>t))}getLocalViewOfDocuments(e,t,i=i4()){let r=i6();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(e=>{let t=i3();return e.forEach((e,i)=>{t=t.insert(e,i.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let i=i6();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,i4()))}populateOverlays(e,t,i){let r=[];return i.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,i)=>{t.set(e,i)})})}computeViews(e,t,i,r){let n=i1,s=i6(),o=i6();return t.forEach((e,t)=>{let o=i.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof rp)?n=n.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),rc(o.mutation,t,o.mutation.getFieldMask(),t$.now())):s.set(t.key,tZ.empty())}),this.recalculateAndSaveOverlays(e,n).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new rD(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){let i=i6(),r=new tK((e,t)=>e-t),n=i4();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let n of e)n.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let o=i.get(e)||tZ.empty();o=n.applyToLocalView(s,o),i.set(e,o);let a=(r.get(n.batchId)||i4()).add(e);r=r.insert(n.batchId,a)})}).next(()=>{let s=[],o=r.getReverseIterator();for(;o.hasNext();){let r=o.getNext(),a=r.key,l=r.value,u=i6();l.forEach(e=>{if(!n.has(e)){let r=rh(t.get(e),i.get(e));null!==r&&u.set(e,r),n=n.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return tB.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,i,r){return tN.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):null!==t.collectionGroup?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(n=>{let s=r-n.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-n.size):tB.resolve(i6()),o=-1,a=n;return s.next(t=>tB.forEach(t,(t,i)=>(o<i.largestBatchId&&(o=i.largestBatchId),n.get(t)?tB.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,n)).next(()=>this.computeViews(e,a,t,i4())).next(e=>{let t;return{batchId:o,changes:(t=i2,e.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t)}}))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tN(t)).next(e=>{let t=i3();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let n=t.collectionGroup,s=i3();return this.indexManager.getCollectionParents(e,n).next(o=>tB.forEach(o,o=>{let a=new iz(o.child(n),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,a,i,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i,r){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(s=>(n=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,n,r))).next(e=>{n.forEach((t,i)=>{let r=i.getKey();null===e.get(r)&&(e=e.insert(r,iS.newInvalidDocument(r)))});let i=i3();return e.forEach((e,r)=>{let s=n.get(e);void 0!==s&&rc(s.mutation,r,tZ.empty(),t$.now()),iZ(t,r)&&(i=i.insert(e,r))}),i})}}class rM{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return tB.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,{id:t.id,version:t.version,createTime:rE(t.createTime)}),tB.resolve()}getNamedQuery(e,t){return tB.resolve(this.kr.get(t))}saveNamedQuery(e,t){var i;let r;return this.kr.set(t.name,{name:t.name,query:(r=function(e){var t,i,r,n,s,o,a;let l,u,h,c,d,f,p=(t=e.parent,tf((o=l=tD.fromString(t)).length>=4&&"projects"===o.get(0)&&"databases"===o.get(2),10190,{key:l.toString()}),4===(u=l).length?tD.emptyPath():(tf((a=u).length>4&&"documents"===a.get(4),29091,{key:a.toString()}),a.popFirst(5))),g=e.structuredQuery,v=g.from?g.from.length:0,m=null;if(v>0){tf(1===v,65062);let e=g.from[0];e.allDescendants?m=e.collectionId:p=p.child(e.collectionId)}let _=[];g.where&&(_=(h=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=rx(e.unaryFilter.field);return iA.create(t,"==",{doubleValue:NaN});case"IS_NULL":let i=rx(e.unaryFilter.field);return iA.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=rx(e.unaryFilter.field);return iA.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=rx(e.unaryFilter.field);return iA.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tc(61313);default:return tc(60726)}}(t):void 0!==t.fieldFilter?iA.create(rx(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tc(58110);default:return tc(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?iP.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return tc(1026)}}(t.compositeFilter.op)):tc(30097,{filter:t})}(g.where))instanceof iP&&iD(i=h)&&iR(i)?h.getFilters():[h]);let y=[];g.orderBy&&(y=g.orderBy.map(e=>new ik(rx(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let b=null;g.limit&&(b=null==(c="object"==typeof(r=g.limit)?r.value:r)?null:c);let w=null;g.startAt&&(d=!!(n=g.startAt).before,w=new ix(n.values||[],d));let E=null;return g.endAt&&(f=!(s=g.endAt).before,E=new ix(s.values||[],f)),new iz(p,m,y,_,b,"F",w,E)}({parent:(i=t.bundledQuery).parent,structuredQuery:i.structuredQuery}),"LAST"===i.limitType?iY(r,r.limit,"L"):r),readTime:rE(t.readTime)}),tB.resolve()}}class rN{constructor(){this.overlays=new tK(tN.comparator),this.qr=new Map}getOverlay(e,t){return tB.resolve(this.overlays.get(t))}getOverlays(e,t){let i=i6();return tB.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&i.set(t,e)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((i,r)=>{this.St(e,t,r)}),tB.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.qr.get(i);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(i)),tB.resolve()}getOverlaysForCollection(e,t,i){let r=i6(),n=t.length+1,s=new tN(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){let e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===n&&e.largestBatchId>i&&r.set(e.getKey(),e)}return tB.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let n=new tK((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>i){let t=n.get(e.largestBatchId);null===t&&(t=i6(),n=n.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=i6(),a=n.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return tB.resolve(o)}St(e,t,i){let r=this.overlays.get(i.key);if(null!==r){let e=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(i.key,new rb(t,i));let n=this.qr.get(t);void 0===n&&(n=i4(),this.qr.set(t,n)),this.qr.set(t,n.add(i.key))}}class rL{constructor(){this.sessionToken=t1.EMPTY_BYTE_STRING}getSessionToken(e){return tB.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,tB.resolve()}}class rF{constructor(){this.Qr=new tJ(r$.$r),this.Ur=new tJ(r$.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let i=new r$(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new r$(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){let t=new tN(new tD([])),i=new r$(t,e),r=new r$(t,e+1),n=[];return this.Ur.forEachInRange([i,r],e=>{this.Gr(e),n.push(e.key)}),n}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new tN(new tD([])),i=new r$(t,e),r=new r$(t,e+1),n=i4();return this.Ur.forEachInRange([i,r],e=>{n=n.add(e.key)}),n}containsKey(e){let t=new r$(e,0),i=this.Qr.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class r${constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return tN.comparator(e.key,t.key)||tI(e.Yr,t.Yr)}static Kr(e,t){return tI(e.Yr,t.Yr)||tN.comparator(e.key,t.key)}}class rV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tJ(r$.$r)}checkEmpty(e){return tB.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){let n=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ry(n,t,i,r);for(let t of(this.mutationQueue.push(s),r))this.Zr=this.Zr.add(new r$(t.key,n)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return tB.resolve(s)}lookupMutationBatch(e,t){return tB.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let i=this.ei(t+1),r=i<0?0:i;return tB.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return tB.resolve(0===this.mutationQueue.length?-1:this.tr-1)}getAllMutationBatches(e){return tB.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new r$(t,0),r=new r$(t,1/0),n=[];return this.Zr.forEachInRange([i,r],e=>{let t=this.Xr(e.Yr);n.push(t)}),tB.resolve(n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new tJ(tI);return t.forEach(e=>{let t=new r$(e,0),r=new r$(e,1/0);this.Zr.forEachInRange([t,r],e=>{i=i.add(e.Yr)})}),tB.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,n=i;tN.isDocumentKey(n)||(n=n.child(""));let s=new r$(new tN(n),0),o=new tJ(tI);return this.Zr.forEachWhile(e=>{let t=e.key.path;return!!i.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),tB.resolve(this.ti(o))}ti(e){let t=[];return e.forEach(e=>{let i=this.Xr(e);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){tf(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let i=this.Zr;return tB.forEach(t.mutations,r=>{let n=new r$(r.key,t.batchId);return i=i.delete(n),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,t){let i=new r$(t,0),r=this.Zr.firstAfterOrEqual(i);return tB.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,tB.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class rU{constructor(e){this.ri=e,this.docs=new tK(tN.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),n=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:s}),this.size+=s-n,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return tB.resolve(i?i.document.mutableCopy():iS.newInvalidDocument(t))}getEntries(e,t){let i=i1;return t.forEach(e=>{let t=this.docs.get(e);i=i.insert(e,t?t.document.mutableCopy():iS.newInvalidDocument(e))}),tB.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let n=i1,s=t.path,o=new tN(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){let{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||0>=function(e,t){let i=e.readTime.compareTo(t.readTime);return 0!==i||0!==(i=tN.comparator(e.documentKey,t.documentKey))?i:tI(e.largestBatchId,t.largestBatchId)}(new tU(o.readTime,o.key,-1),i)||(r.has(o.key)||iZ(t,o))&&(n=n.insert(o.key,o.mutableCopy()))}return tB.resolve(n)}getAllFromCollectionGroup(e,t,i,r){tc(9500)}ii(e,t){return tB.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new rj(this)}getSize(e){return tB.resolve(this.size)}}class rj extends rR{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),tB.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class rB{constructor(e){this.persistence=e,this.si=new i0(e=>iq(e),iH),this.lastRemoteSnapshotVersion=tV.min(),this.highestTargetId=0,this.oi=0,this._i=new rF,this.targetCount=0,this.ai=rP.ur()}forEachTarget(e,t){return this.si.forEach((e,i)=>t(i)),tB.resolve()}getLastRemoteSnapshotVersion(e){return tB.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tB.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),tB.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),tB.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new rP(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,tB.resolve()}updateTargetData(e,t){return this.Pr(t),tB.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,tB.resolve()}removeTargets(e,t,i){let r=0,n=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===i.get(o.targetId)&&(this.si.delete(s),n.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),tB.waitFor(n).next(()=>r)}getTargetCount(e){return tB.resolve(this.targetCount)}getTargetData(e,t){let i=this.si.get(t)||null;return tB.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),tB.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);let r=this.persistence.referenceDelegate,n=[];return r&&t.forEach(t=>{n.push(r.markPotentiallyOrphaned(e,t))}),tB.waitFor(n)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),tB.resolve()}getMatchingKeysForTargetId(e,t){let i=this._i.Hr(t);return tB.resolve(i)}containsKey(e,t){return tB.resolve(this._i.containsKey(t))}}class rq{constructor(e,t){this.ui={},this.overlays={},this.ci=new tH(0),this.li=!1,this.li=!0,this.hi=new rL,this.referenceDelegate=e(this),this.Pi=new rB(this),this.indexManager=new rk,this.remoteDocumentCache=new rU(e=>this.referenceDelegate.Ti(e)),this.serializer=new rT(t),this.Ii=new rM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new rV(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ta("MemoryPersistence","Starting transaction:",e);let r=new rH(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return tB.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,t)))}}class rH extends tj{constructor(e){super(),this.currentSequenceNumber=e}}class rz{constructor(e){this.persistence=e,this.Ri=new rF,this.Vi=null}static mi(e){return new rz(e)}get fi(){if(this.Vi)return this.Vi;throw tc(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),tB.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),tB.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),tB.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>i.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tB.forEach(this.fi,i=>{let r=tN.fromPath(i);return this.gi(e,r).next(e=>{e||t.removeEntry(r,tV.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return tB.or([()=>tB.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class rG{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=i4(),r=i4();for(let e of t.docChanges)switch(e.type){case 0:i=i.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new rG(e,t.fromCache,i,r)}}class rW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rK{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){let t;return!function(){let t=D()?.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(e.g.process)}catch(e){return!1}}()&&navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")?8:Number((t=("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:"").match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1")>0?6:4}()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){let n={result:null};return this.ys(e,t).next(e=>{n.result=e}).next(()=>{if(!n.result)return this.ws(e,t,r,i).next(e=>{n.result=e})}).next(()=>{if(n.result)return;let i=new rW;return this.Ss(e,t,i).next(r=>{if(n.result=r,this.Vs)return this.bs(e,t,i,r.size)})}).next(()=>n.result)}bs(e,t,i,r){return i.documentReadCount<this.fs?(to()<=u.DEBUG&&ta("QueryEngine","SDK will not create cache indexes for query:",iQ(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),tB.resolve()):(to()<=u.DEBUG&&ta("QueryEngine","Query:",iQ(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(to()<=u.DEBUG&&ta("QueryEngine","The SDK decides to create cache indexes for query:",iQ(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,iK(t))):tB.resolve())}ys(e,t){if(iG(t))return tB.resolve(null);let i=iK(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(i=iK(t=iY(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{let n=i4(...r);return this.ps.getDocuments(e,n).next(r=>this.indexManager.getMinOffset(e,i).next(i=>{let s=this.Ds(t,r);return this.Cs(t,s,n,i.readTime)?this.ys(e,iY(t,null,"F")):this.vs(e,s,t,i)}))})))}ws(e,t,i,r){return iG(t)||r.isEqual(tV.min())?tB.resolve(null):this.ps.getDocuments(e,i).next(n=>{let s,o,a=this.Ds(t,n);return this.Cs(t,a,i,r)?tB.resolve(null):(to()<=u.DEBUG&&ta("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),iQ(t)),this.vs(e,a,t,(s=r.toTimestamp().seconds,o=r.toTimestamp().nanoseconds+1,new tU(tV.fromTimestamp(1e9===o?new t$(s+1,0):new t$(s,o)),tN.empty(),-1))).next(e=>e))})}Ds(e,t){let i=new tJ((t,i)=>{let r=!1;for(let n of iW(e)){let e=function(e,t,i){var r;let n,s,o=e.field.isKeyField()?tN.comparator(t.key,i.key):(r=e.field,n=t.data.field(r),s=i.data.field(r),null!==n&&null!==s?ic(n,s):tc(42886));switch(e.dir){case"asc":return o;case"desc":return -1*o;default:return tc(19790,{direction:e.dir})}}(n,t,i);if(0!==e)return e;r=r||n.field.isKeyField()}return 0});return t.forEach((t,r)=>{iZ(e,r)&&(i=i.add(r))}),i}Cs(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;let n="F"===e.limitType?t.last():t.first();return!!n&&(n.hasPendingWrites||n.version.compareTo(r)>0)}Ss(e,t,i){return to()<=u.DEBUG&&ta("QueryEngine","Using full collection scan to execute query:",iQ(t)),this.ps.getDocumentsMatchingQuery(e,t,tU.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class rY{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new tK(tI),this.xs=new i0(e=>iq(e),iH),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}async function rX(e,t){return await e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(n=>(r=n,e.Bs(t),e.mutationQueue.getAllMutationBatches(i))).next(t=>{let n=[],s=[],o=i4();for(let e of r)for(let t of(n.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))o=o.add(t.key);return e.localDocuments.getDocuments(i,o).next(e=>({Ls:e,removedBatchIds:n,addedBatchIds:s}))})})}class rJ{constructor(){this.activeTargetIds=i8}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class rQ{constructor(){this.Mo=new rJ,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new rJ,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rZ{Oo(e){}shutdown(){}}let r0="ConnectivityMonitor";class r1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){for(let e of(ta(r0,"Network connectivity changed: AVAILABLE"),this.qo))e(0)}ko(){for(let e of(ta(r0,"Network connectivity changed: UNAVAILABLE"),this.qo))e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let r2=null;function r3(){return null===r2?r2=0x10000000+Math.round(0x80000000*Math.random()):r2++,"0x"+r2.toString(16)}let r6="RestConnection",r5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===ii?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,n){let s=r3(),o=this.zo(e,t.toUriEncodedString());ta(r6,`Sending RPC '${e}' ${s}:`,o,i);let a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,n);let{host:l}=new URL(o),u=N(l);return this.Jo(e,o,a,i,u).then(t=>(ta(r6,`Received RPC '${e}' ${s}: `,t),t),t=>{throw tu(r6,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",i),t})}Ho(e,t,i,r,n,s){return this.Go(e,t,i,r,n)}jo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+tn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,i)=>e[i]=t),i&&i.headers.forEach((t,i)=>e[i]=t)}zo(e,t){let i=r5[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}class r8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}let r7="WebChannelConnection";class r9 extends r4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,n){let s=r3();return new Promise((n,o)=>{let a=new c;a.setWithCredentials(!0),a.listenOnce(f.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case p.NO_ERROR:let t=a.getResponseJson();ta(r7,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),n(t);break;case p.TIMEOUT:ta(r7,`RPC '${e}' ${s} timed out`),o(new tg(tp.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:let i=a.getStatus();if(ta(r7,`RPC '${e}' ${s} failed with status:`,i,"response text:",a.getResponseText()),i>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e,i=(e=t.status.toLowerCase().replace(/_/g,"-"),Object.values(tp).indexOf(e)>=0?e:tp.UNKNOWN);o(new tg(i,t.message))}else o(new tg(tp.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new tg(tp.UNAVAILABLE,"Connection failed."));break;default:tc(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{ta(r7,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);ta(r7,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,i,15)})}T_(e,t,i){let r=r3(),n=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=_(),o=m(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,i),a.encodeInitMessageHeaders=!0;let u=n.join("");ta(r7,`Creating RPC '${e}' stream ${r}: ${u}`,a);let h=s.createWebChannel(u,a);this.I_(h);let c=!1,f=!1,p=new r8({Yo:t=>{f?ta(r7,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(c||(ta(r7,`Opening RPC '${e}' stream ${r} transport.`),h.open(),c=!0),ta(r7,`RPC '${e}' stream ${r} sending:`,t),h.send(t))},Zo:()=>h.close()}),b=(e,t,i)=>{e.listen(t,e=>{try{i(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(h,d.EventType.OPEN,()=>{f||(ta(r7,`RPC '${e}' stream ${r} transport opened.`),p.o_())}),b(h,d.EventType.CLOSE,()=>{f||(f=!0,ta(r7,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(h))}),b(h,d.EventType.ERROR,t=>{f||(f=!0,tu(r7,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.a_(new tg(tp.UNAVAILABLE,"The operation could not be completed")))}),b(h,d.EventType.MESSAGE,t=>{if(!f){let i=t.data[0];tf(!!i,16349);let n=i?.error||i[0]?.error;if(n){ta(r7,`RPC '${e}' stream ${r} received error:`,n);let t=n.status,i=function(e){let t=y[e];if(void 0!==t){if(void 0===t)return tl("GRPC error has no .code"),tp.UNKNOWN;switch(t){case y.OK:return tp.OK;case y.CANCELLED:return tp.CANCELLED;case y.UNKNOWN:return tp.UNKNOWN;case y.DEADLINE_EXCEEDED:return tp.DEADLINE_EXCEEDED;case y.RESOURCE_EXHAUSTED:return tp.RESOURCE_EXHAUSTED;case y.INTERNAL:return tp.INTERNAL;case y.UNAVAILABLE:return tp.UNAVAILABLE;case y.UNAUTHENTICATED:return tp.UNAUTHENTICATED;case y.INVALID_ARGUMENT:return tp.INVALID_ARGUMENT;case y.NOT_FOUND:return tp.NOT_FOUND;case y.ALREADY_EXISTS:return tp.ALREADY_EXISTS;case y.PERMISSION_DENIED:return tp.PERMISSION_DENIED;case y.FAILED_PRECONDITION:return tp.FAILED_PRECONDITION;case y.ABORTED:return tp.ABORTED;case y.OUT_OF_RANGE:return tp.OUT_OF_RANGE;case y.UNIMPLEMENTED:return tp.UNIMPLEMENTED;case y.DATA_LOSS:return tp.DATA_LOSS;default:return tc(39323,{code:t})}}}(t),s=n.message;void 0===i&&(i=tp.INTERNAL,s="Unknown error status: "+t+" with message "+n.message),f=!0,p.a_(new tg(i,s)),h.close()}else ta(r7,`RPC '${e}' stream ${r} received:`,i),p.u_(i)}}),b(o,v.STAT_EVENT,t=>{t.stat===g.PROXY?ta(r7,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===g.NOPROXY&&ta(r7,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ne(){return"undefined"!=typeof document?document:null}class nt{constructor(e,t,i=1e3,r=1.5,n=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=n,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ta("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}class ni{}class nr extends ni{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new tg(tp.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.Go(e,rS(t,i),r,n,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===tp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tg(tp.UNKNOWN,e.toString())})}Ho(e,t,i,r,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Ho(e,rS(t,i),r,s,o,n)).catch(e=>{throw"FirebaseError"===e.name?(e.code===tp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tg(tp.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class nn{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tl(t),this.aa=!1):ta("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}let ns="RemoteStore";class no{constructor(e,t,i,r,n){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=n,this.Aa.Oo(e=>{i.enqueueAndForget(async()=>{nu(this)&&(ta(ns,"Restarting streams for network reachability change."),await async function(e){e.Ea.add(4),await nl(e),e.Ra.set("Unknown"),e.Ea.delete(4),await na(e)}(this))})}),this.Ra=new nn(i,r)}}async function na(e){if(nu(e))for(let t of e.da)await t(!0)}async function nl(e){for(let t of e.da)await t(!1)}function nu(e){return 0===e.Ea.size}async function nh(e,t){t?(e.Ea.delete(2),await na(e)):t||(e.Ea.add(2),await nl(e),e.Ra.set("Unknown"))}class nc{constructor(e,t,i,r,n){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=n,this.deferred=new tv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,n){let s=new nc(e,t,Date.now()+i,r,n);return s.start(i),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tg(tp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class nd{constructor(){this.queries=nf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){var e;let t;e=new tg(tp.ABORTED,"Firestore shutting down"),t=this.queries,this.queries=nf(),t.forEach((t,i)=>{for(let t of i.Sa)t.onError(e)})}}function nf(){return new i0(e=>iJ(e),iX)}(E=w||(w={})).Ma="default",E.Cache="cache";class np{constructor(e,t,i,r,n,s){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=n,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new i0(e=>iJ(e),iX),this.Iu=new Map,this.Eu=new Set,this.du=new tK(tN.comparator),this.Au=new Map,this.Ru=new rF,this.Vu={},this.mu=new Map,this.fu=rP.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}function ng(e,t,i){var r;if(e.isPrimaryClient&&0===i||!e.isPrimaryClient&&1===i){let i,n=[];e.Tu.forEach((e,i)=>{let r=i.view.va(t);r.snapshot&&n.push(r.snapshot)}),(r=e.eventManager).onlineState=t,i=!1,r.queries.forEach((e,r)=>{for(let e of r.Sa)e.va(t)&&(i=!0)}),i&&r.Ca.forEach(e=>{e.next()}),n.length&&e.Pu.H_(n),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function nv(e,t,i){let r=[],n=[],s=[];e.Tu.isEmpty()||(e.Tu.forEach((o,a)=>{s.push(e.pu(a,t,i).then(t=>{if((t||i)&&e.isPrimaryClient){let r=t?!t.fromCache:i?.targetChanges.get(a.targetId)?.current;e.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(t){r.push(t);let e=rG.As(a.targetId,t);n.push(e)}}))}),await Promise.all(s),e.Pu.H_(r),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",i=>tB.forEach(t,t=>tB.forEach(t.Es,r=>e.persistence.referenceDelegate.addReference(i,t.targetId,r)).next(()=>tB.forEach(t.ds,r=>e.persistence.referenceDelegate.removeReference(i,t.targetId,r)))))}catch(e){if(!tq(e))throw e;ta("LocalStore","Failed to update sequence numbers: "+e)}for(let i of t){let t=i.targetId;if(!i.fromCache){let i=e.Ms.get(t),r=i.snapshotVersion,n=i.withLastLimboFreeSnapshotVersion(r);e.Ms=e.Ms.insert(t,n)}}}(e.localStore,n))}async function nm(e,t){if(!e.currentUser.isEqual(t)){ta("SyncEngine","User change. New user:",t.toKey());let i=await rX(e.localStore,t);e.currentUser=t,e.mu.forEach(e=>{e.forEach(e=>{e.reject(new tg(tp.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.mu.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await nv(e,i.Ls)}}class n_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=new rw(e.databaseInfo.databaseId,!0),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){var t,i;return t=this.persistence,i=new rK,new rY(t,i,e.initialUser,this.serializer)}Cu(e){return new rq(rz.mi,this.serializer)}Du(e){return new rQ}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}n_.provider={build:()=>new n_};class ny{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ng(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=nm.bind(null,this.syncEngine),await nh(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nd}createDatastore(e){var t;let i=new rw(e.databaseInfo.databaseId,!0),r=new r9(e.databaseInfo);return t=e.authCredentials,new nr(t,e.appCheckCredentials,r,i)}createRemoteStore(e){var t,i;return t=this.localStore,i=this.datastore,new no(t,i,e.asyncQueue,e=>ng(this.syncEngine,e,0),r1.v()?new r1:new rZ)}createSyncEngine(e,t){var i,r,n,s,o,a;let l;return i=this.localStore,r=this.remoteStore,n=this.eventManager,s=this.sharedClientState,o=e.initialUser,a=e.maxConcurrentLimboResolutions,l=new np(i,r,n,s,o,a),t&&(l.gu=!0),l}async terminate(){await async function(e){ta(ns,"RemoteStore shutting down."),e.Ea.add(5),await nl(e),e.Aa.shutdown(),e.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ny.provider={build:()=>new ny};let nb=new Map,nw="firestore.googleapis.com";class nE{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new tg(tp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nw,this.ssl=!0}else this.host=e.host,this.ssl=e.ssl??!0;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tg(tp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,i,r){if(!0===t&&!0===r)throw new tg(tp.INVALID_ARGUMENT,`${e} and ${i} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=function(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new tg(tp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new tg(tp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new tg(tp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,i;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,i=e.experimentalLongPollingOptions,t.timeoutSeconds===i.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nS{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tg(tp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tg(tp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nE(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new t_;switch(e.type){case"firstParty":return new tE(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new tg(tp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){let e;return(e=nb.get(this))&&(ta("ComponentProvider","Removing Datastore"),nb.delete(this),e.terminate()),Promise.resolve()}}class nx{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new nx(this.firestore,e,this._query)}}class nT{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nI(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nT(this.firestore,e,this._key)}toJSON(){return{type:nT._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(tF(t,nT._jsonSchema))return new nT(e,i||null,new tN(tD.fromString(t.referencePath)))}}nT._jsonSchemaVersion="firestore/documentReference/1.0",nT._jsonSchema={type:tL("string",nT._jsonSchemaVersion),referencePath:tL("string")};class nI extends nx{constructor(e,t,i){super(e,t,new iz(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nT(this.firestore,null,new tN(e))}withConverter(e){return new nI(this.firestore,e,this._path)}}let nk="AsyncQueue";class nC{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nt(this,"async_queue_retry"),this._c=()=>{let e=ne();e&&ta(nk,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ne();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=ne();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new tv;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tq(e))throw e;ta(nk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,tl("INTERNAL UNHANDLED ERROR: ",nA(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let r=nc.createAndSchedule(this,e,t,i,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&tc(47125,{Pc:nA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{for(let t of(this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.tc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nA(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class nP extends nS{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new nC,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new nC(e),this._firestoreClient=void 0,await e}}}class nR{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nR(t1.fromBase64String(e))}catch(e){throw new tg(tp.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new nR(t1.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:nR._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tF(e,nR._jsonSchema))return nR.fromBase64String(e.bytes)}}nR._jsonSchemaVersion="firestore/bytes/1.0",nR._jsonSchema={type:tL("string",nR._jsonSchemaVersion),bytes:tL("string")};class nD{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new tg(tp.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tM(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class nO{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tg(tp.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tg(tp.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tI(this._lat,e._lat)||tI(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nO._jsonSchemaVersion}}static fromJSON(e){if(tF(e,nO._jsonSchema))return new nO(e.latitude,e.longitude)}}nO._jsonSchemaVersion="firestore/geoPoint/1.0",nO._jsonSchema={type:tL("string",nO._jsonSchemaVersion),latitude:tL("number"),longitude:tL("number")};class nM{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:nM._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tF(e,nM._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new nM(e.vectorValues);throw new tg(tp.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nM._jsonSchemaVersion="firestore/vectorValue/1.0",nM._jsonSchema={type:tL("string",nM._jsonSchemaVersion),vectorValues:tL("object")};let nN=RegExp("[~\\*/\\[\\]]");function nL(e,t,i,r,n){let s=r&&!r.isEmpty(),o=void 0!==n,a=`Function ${t}() called with invalid data`;i&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${n}`),l+=")"),new tg(tp.INVALID_ARGUMENT,a+e+l)}class nF{constructor(e,t,i,r,n){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=n}get id(){return this._key.path.lastSegment()}get ref(){return new nT(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new n$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(nV("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class n$ extends nF{data(){return super.data()}}function nV(e,t){return"string"==typeof t?function(e,t,i){if(t.search(nN)>=0)throw nL(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,void 0);try{return new nD(...t.split("."))._internalPath}catch(i){throw nL(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,void 0)}}(e,t):t instanceof nD?t._internalPath:t._delegate._internalPath}class nU{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nj extends nF{constructor(e,t,i,r,n,s){super(e,t,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=n}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new nB(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(nV("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tg(tp.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=nj._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()&&(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),this._firestore,this.ref.path,t.bundle="NOT SUPPORTED"),t}}nj._jsonSchemaVersion="firestore/documentSnapshot/1.0",nj._jsonSchema={type:tL("string",nj._jsonSchemaVersion),bundleSource:tL("string","DocumentSnapshot"),bundleName:tL("string"),bundle:tL("string")};class nB extends nj{data(e={}){return super.data(e)}}class nq{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nU(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new nB(this._firestore,this._userDataWriter,i.key,i,new nU(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tg(tp.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(i=>{let r=new nB(e._firestore,e._userDataWriter,i.doc.key,i.doc,new nU(e._snapshot.mutatedKeys.has(i.doc.key),e._snapshot.fromCache),e.query.converter);return i.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let i=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let r=new nB(e._firestore,e._userDataWriter,t.doc.key,t.doc,new nU(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),n=-1,s=-1;return 0!==t.type&&(n=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(s=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tc(61501,{type:e})}}(t.type),doc:r,oldIndex:n,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tg(tp.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=nq._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tT.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),i.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),this._firestore,this.query._query,e.bundleName,e.bundle="NOT SUPPORTED",e}}nq._jsonSchemaVersion="firestore/querySnapshot/1.0",nq._jsonSchema={type:tL("string",nq._jsonSchemaVersion),bundleSource:tL("string","QuerySnapshot"),bundleName:tL("string"),bundle:tL("string")},new WeakMap,function(e=!0){tn=eB,eR(new J("firestore",(t,{instanceIdentifier:i,options:r})=>{let n=t.getProvider("app").getImmediate(),s=new nP(new tb(t.getProvider("auth-internal")),new tx(n,t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tg(tp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ir(e.options.projectId,t)}(n,i),n);return r={useFetchStreams:e,...r},s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),eK(tt,ti,void 0),eK(tt,ti,"esm2020")}();let nH="@firebase/installations",nz="0.6.19",nG=`w:${nz}`,nW="FIS_v2",nK=new z("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nY(e){return e instanceof H&&e.code.includes("request-failed")}function nX({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function nJ(e){return{token:e.token,requestStatus:2,expiresIn:Number(e.expiresIn.replace("s","000")),creationTime:Date.now()}}async function nQ(e,t){let i=(await t.json()).error;return nK.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function nZ({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function n0(e){let t=await e();return t.status>=500&&t.status<600?e():t}async function n1({appConfig:e,heartbeatServiceProvider:t},{fid:i}){let r=nX(e),n=nZ(e),s=t.getImmediate({optional:!0});if(s){let e=await s.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}let o={method:"POST",headers:n,body:JSON.stringify({fid:i,authVersion:nW,appId:e.appId,sdkVersion:nG})},a=await n0(()=>fetch(r,o));if(a.ok){let e=await a.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:nJ(e.authToken)}}throw await nQ("Create Installation",a)}function n2(e){return new Promise(t=>{setTimeout(t,e)})}let n3=/^[cdef][\w-]{21}$/;function n6(e){return`${e.appName}!${e.appId}`}let n5=new Map;function n4(e,t){var i,r;let n,s=n6(e);n8(s,t),i=s,r=t,(n=(!n7&&"BroadcastChannel"in self&&((n7=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{n8(e.data.key,e.data.fid)}),n7))&&n.postMessage({key:i,fid:r}),0===n5.size&&n7&&(n7.close(),n7=null)}function n8(e,t){let i=n5.get(e);if(i)for(let e of i)e(t)}let n7=null,n9="firebase-installations-store",se=null;function st(){return se||(se=eg("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(n9)}})),se}async function si(e,t){let i=n6(e),r=(await st()).transaction(n9,"readwrite"),n=r.objectStore(n9),s=await n.get(i);return await n.put(t,i),await r.done,s&&s.fid===t.fid||n4(e,t.fid),t}async function sr(e){let t=n6(e),i=(await st()).transaction(n9,"readwrite");await i.objectStore(n9).delete(t),await i.done}async function sn(e,t){let i=n6(e),r=(await st()).transaction(n9,"readwrite"),n=r.objectStore(n9),s=await n.get(i),o=t(s);return void 0===o?await n.delete(i):await n.put(o,i),await r.done,o&&(!s||s.fid!==o.fid)&&n4(e,o.fid),o}async function ss(e){let t,i=await sn(e.appConfig,i=>{let r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(nK.create("app-offline"))};let i={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=so(e,i);return{installationEntry:i,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:sa(e)}:{installationEntry:t}}(e,su(i||{fid:function(){try{var e;let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let i=(e=t,btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return n3.test(i)?i:""}catch{return""}}(),registrationStatus:0}));return t=r.registrationPromise,r.installationEntry});return""===i.fid?{installationEntry:await t}:{installationEntry:i,registrationPromise:t}}async function so(e,t){try{let i=await n1(e,t);return si(e.appConfig,i)}catch(i){throw nY(i)&&409===i.customData.serverCode?await sr(e.appConfig):await si(e.appConfig,{fid:t.fid,registrationStatus:0}),i}}async function sa(e){let t=await sl(e.appConfig);for(;1===t.registrationStatus;)await n2(100),t=await sl(e.appConfig);if(0===t.registrationStatus){let{installationEntry:t,registrationPromise:i}=await ss(e);return i||t}return t}function sl(e){return sn(e,e=>{if(!e)throw nK.create("installation-not-found");return su(e)})}function su(e){var t;return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function sh({appConfig:e,heartbeatServiceProvider:t},i){let r=function(e,{fid:t}){return`${nX(e)}/${t}/authTokens:generate`}(e,i),n=function(e,{refreshToken:t}){var i;let r=nZ(e);return r.append("Authorization",(i=t,`${nW} ${i}`)),r}(e,i),s=t.getImmediate({optional:!0});if(s){let e=await s.getHeartbeatsHeader();e&&n.append("x-firebase-client",e)}let o={method:"POST",headers:n,body:JSON.stringify({installation:{sdkVersion:nG,appId:e.appId}})},a=await n0(()=>fetch(r,o));if(a.ok)return nJ(await a.json());throw await nQ("Generate Auth Token",a)}async function sc(e,t=!1){let i,r=await sn(e.appConfig,r=>{var n,s,o;let a;if(!sg(r))throw nK.create("not-registered");let l=r.authToken;if(!t&&2===(n=l).requestStatus&&(s=n,!((a=Date.now())<s.creationTime)&&!(s.creationTime+s.expiresIn<a+36e5)))return r;if(1===l.requestStatus)return i=sd(e,t),r;{let t;if(!navigator.onLine)throw nK.create("app-offline");let n=(o=r,t={requestStatus:1,requestTime:Date.now()},{...o,authToken:t});return i=sp(e,n),n}});return i?await i:r.authToken}async function sd(e,t){let i=await sf(e.appConfig);for(;1===i.authToken.requestStatus;)await n2(100),i=await sf(e.appConfig);let r=i.authToken;return 0===r.requestStatus?sc(e,t):r}function sf(e){return sn(e,e=>{var t;if(!sg(e))throw nK.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?{...e,authToken:{requestStatus:0}}:e})}async function sp(e,t){try{let i=await sh(e,t),r={...t,authToken:i};return await si(e.appConfig,r),i}catch(i){if(nY(i)&&(401===i.customData.serverCode||404===i.customData.serverCode))await sr(e.appConfig);else{let i={...t,authToken:{requestStatus:0}};await si(e.appConfig,i)}throw i}}function sg(e){return void 0!==e&&2===e.registrationStatus}async function sv(e){let{installationEntry:t,registrationPromise:i}=await ss(e);return i?i.catch(console.error):sc(e).catch(console.error),t.fid}async function sm(e,t=!1){return await s_(e),(await sc(e,t)).token}async function s_(e){let{registrationPromise:t}=await ss(e);t&&await t}function sy(e){return nK.create("missing-app-config-values",{valueName:e})}let sb="installations";eR(new J(sb,e=>{let t=e.getProvider("app").getImmediate(),i=function(e){if(!e||!e.options)throw sy("App Configuration");if(!e.name)throw sy("App Name");for(let t of["projectId","apiKey","appId"])if(!e.options[t])throw sy(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),r=eD(t,"heartbeat");return{app:t,appConfig:i,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},"PUBLIC")),eR(new J("installations-internal",e=>{let t=eD(e.getProvider("app").getImmediate(),sb).getImmediate();return{getId:()=>sv(t),getToken:e=>sm(t,e)}},"PRIVATE")),eK(nH,nz),eK(nH,nz,"esm2020");let sw="analytics",sE="https://www.googletagmanager.com/gtag/js",sS=new eo("@firebase/analytics"),sx=new z("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function sT(e){if(!e.startsWith(sE)){let t=sx.create("invalid-gtag-resource",{gtagURL:e});return sS.warn(t.message),""}return e}function sI(e){return Promise.all(e.map(e=>e.catch(e=>e)))}async function sk(e,t,i,r,n,s){let o=r[n];try{if(o)await t[o];else{let e=(await sI(i)).find(e=>e.measurementId===n);e&&await t[e.appId]}}catch(e){sS.error(e)}e("config",n,s)}async function sC(e,t,i,r,n){try{let s=[];if(n&&n.send_to){let e=n.send_to;Array.isArray(e)||(e=[e]);let r=await sI(i);for(let i of e){let e=r.find(e=>e.measurementId===i),n=e&&t[e.appId];if(n)s.push(n);else{s=[];break}}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,n||{})}catch(e){sS.error(e)}}let sA=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};async function sP(e){let{appId:t,apiKey:i}=e,r={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),s=await fetch(n,r);if(200!==s.status&&304!==s.status){let e="";try{let t=await s.json();t.error?.message&&(e=t.error.message)}catch(e){}throw sx.create("config-fetch-failed",{httpStatus:s.status,responseMessage:e})}return s.json()}async function sR(e,t=sA,i){let{appId:r,apiKey:n,measurementId:s}=e.options;if(!r)throw sx.create("no-app-id");if(!n){if(s)return{measurementId:s,appId:r};throw sx.create("no-api-key")}let o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new sO;return setTimeout(async()=>{a.abort()},void 0!==i?i:6e4),sD({appId:r,apiKey:n,measurementId:s},o,a,t)}async function sD(e,{throttleEndTimeMillis:t,backoffCount:i},r,n=sA){let{appId:s,measurementId:o}=e;try{var a,l;await (a=r,l=t,new Promise((e,t)=>{let i=setTimeout(e,Math.max(l-Date.now(),0));a.addEventListener(()=>{clearTimeout(i),t(sx.create("fetch-throttle",{throttleEndTimeMillis:l}))})}))}catch(e){if(o)return sS.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${e?.message}]`),{appId:s,measurementId:o};throw e}try{let t=await sP(e);return n.deleteThrottleMetadata(s),t}catch(l){if(!function(e){if(!(e instanceof H)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(l)){if(n.deleteThrottleMetadata(s),o)return sS.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:s,measurementId:o};throw l}let t=503===Number(l?.customData?.httpStatus)?Y(i,n.intervalMillis,30):Y(i,n.intervalMillis),a={throttleEndTimeMillis:Date.now()+t,backoffCount:i+1};return n.setThrottleMetadata(s,a),sS.debug(`Calling attemptFetch again in ${t} millis`),sD(e,a,r,n)}}class sO{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function sM(e,t,i,r,n){if(n&&n.global)return void e("event",i,r);{let n=await t;e("event",i,{...r,send_to:n})}}async function sN(e,t,i,r){if(r&&r.global){let t={};for(let e of Object.keys(i))t[`user_properties.${e}`]=i[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:i})}async function sL(){if(!j())return sS.warn(sx.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await B()}catch(e){return sS.warn(sx.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}return!0}async function sF(e,t,i,s,o,a,l){var u,h;let c,d,f,p,g=sR(e);g.then(t=>{i[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&sS.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>sS.error(e)),t.push(g);let v=sL().then(e=>e?s.getId():void 0),[m,_]=await Promise.all([g,v]);!function(e){for(let t of Object.values(window.document.getElementsByTagName("script")))if(t.src&&t.src.includes(sE)&&t.src.includes(e))return t;return null}(a)&&(u=m.measurementId,h={createScriptURL:sT},window.trustedTypes&&(c=window.trustedTypes.createPolicy("firebase-js-sdk-policy",h)),d=c,f=document.createElement("script"),p=`${sE}?l=${a}&id=${u}`,f.src=d?d?.createScriptURL(p):p,f.async=!0,document.head.appendChild(f)),n&&(o("consent","default",n),n=void 0),o("js",new Date);let y=l?.config??{};return y.origin="firebase",y.update=!0,null!=_&&(y.firebase_id=_),o("config",m.measurementId,y),r&&(o("set",r),r=void 0),m.measurementId}class s${constructor(e){this.app=e}_delete(){return delete sV[this.app.options.appId],Promise.resolve()}}let sV={},sU=[],sj={},sB="dataLayer",sq=!1;async function sH(){if(U()||!q()||!j())return!1;try{return await B()}catch(e){return!1}}let sz="@firebase/analytics",sG="0.10.19";eR(new J(sw,(e,{options:t})=>(function(e,t,i){let r=[];if(U()&&r.push("This is a browser extension environment."),q()||r.push("Cookies are not available."),r.length>0){let e=r.map((e,t)=>`(${t+1}) ${e}`).join(" "),t=sx.create("invalid-analytics-context",{errorInfo:e});sS.warn(t.message)}let n=e.options.appId;if(!n)throw sx.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)sS.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw sx.create("no-api-key");if(null!=sV[n])throw sx.create("already-exists",{id:n});if(!sq){var a,l;let e,t;e=[],Array.isArray(window[sB])?e=window[sB]:window[sB]=e;let{wrappedGtag:i,gtagCore:r}=(a="gtag",t=function(){window[sB].push(arguments)},window[a]&&"function"==typeof window[a]&&(t=window[a]),window[a]=(l=t,async function(e,...t){try{if("event"===e){let[e,i]=t;await sC(l,sV,sU,e,i)}else if("config"===e){let[e,i]=t;await sk(l,sV,sU,sj,e,i)}else if("consent"===e){let[e,i]=t;l("consent",e,i)}else if("get"===e){let[e,i,r]=t;l("get",e,i,r)}else if("set"===e){let[e]=t;l("set",e)}else l(e,...t)}catch(e){sS.error(e)}}),{gtagCore:t,wrappedGtag:window[a]});o=i,s=r,sq=!0}return sV[n]=sF(e,sU,sj,t,s,sB,i),new s$(e)})(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),eR(new J("analytics-internal",function(e){try{let t=e.getProvider(sw).getImmediate();return{logEvent:(e,i,r)=>{var n;return n=t,void(n=X(n),sM(o,sV[n.app.options.appId],e,i,r).catch(e=>sS.error(e)))},setUserProperties:(e,i)=>{var r;return r=t,void(r=X(r),sN(o,sV[r.app.options.appId],e,i).catch(e=>sS.error(e)))}}}catch(e){throw sx.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),eK(sz,sG),eK(sz,sG,"esm2020");let sW=eG().length>0?ez():eq({apiKey:"AIzaSyDGrf3v_nFbJdd-23yePNzUwvoDuqfSDbs",authDomain:"redleads-8d0b1.firebaseapp.com",projectId:"redleads-8d0b1",storageBucket:"redleads-8d0b1.firebasestorage.app",messagingSenderId:"1098969804888",appId:"1:1098969804888:web:e8273eb833b90cea149a2d"});var sK=sW;let sY=eD("object"==typeof sK?sK:ez(),"firestore").getImmediate({identifier:"string"==typeof sK?sK:ii});if(!sY._initialized){let e=(e=>{let t=D()?.emulatorHosts?.[e];if(!t)return;let i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let r=parseInt(t.substring(i+1),10);return"["===t[0]?[t.substring(1,i-1),r]:[t.substring(0,i),r]})("firestore");e&&function(e,t,i,r={}){e=function(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tg(tp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let i=function(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let i=(t=e).constructor?t.constructor.name:null;return i?`a custom ${i} object`:"an object"}}return"function"==typeof e?"a function":tc(12329,{type:typeof e})}(e);throw new tg(tp.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return e}(e,nS);let n=N(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${i}`;n&&(L(`https://${a}`),function(e,t){if("undefined"==typeof window||"undefined"==typeof document||!N(window.location.host)||F[e]===t||F[e]||$)return;function i(e){return`__firebase__banner__${e}`}F[e]=t;let r="__firebase__banner",n=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(F))F[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){let e,t,s=(e=document.getElementById(r),t=!1,e||((e=document.createElement("div")).setAttribute("id",r),t=!0),{created:t,element:e}),o=i("text"),a=document.getElementById(o)||document.createElement("span"),l=i("learnmore"),u=document.getElementById(l)||document.createElement("a"),h=i("preprendIcon"),c=document.getElementById(h)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(s.created){let e,t=s.element;t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center",u.setAttribute("id",l),u.innerText="Learn more",u.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",u.setAttribute("target","__blank"),u.style.paddingLeft="5px",u.style.textDecoration="underline";let i=((e=document.createElement("span")).style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{let e;$=!0,(e=document.getElementById(r))&&e.remove()},e);c.setAttribute("width","24"),c.setAttribute("id",h),c.setAttribute("height","24"),c.setAttribute("viewBox","0 0 24 24"),c.setAttribute("fill","none"),c.style.marginLeft="-6px",t.append(c,a,u,i),document.body.appendChild(t)}n?(a.innerText="Preview backend disconnected.",c.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(c.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,a.innerText="Preview backend running in this workspace."),a.setAttribute("id",o)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}("Firestore",!0)),s.host!==nw&&s.host!==a&&tu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l={...s,host:a,ssl:n,emulatorOptions:r};if(!W(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,i;if("string"==typeof r.mockUserToken)t=r.mockUserToken,i=tr.MOCK_USER;else{t=function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let i=t||"demo-project",r=e.iat||0,n=e.sub||e.user_id;if(!n)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let s={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:n,user_id:n,firebase:{sign_in_provider:"custom",identities:{}},...e};return[P(JSON.stringify({alg:"none",type:"JWT"})),P(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);let n=r.mockUserToken.sub||r.mockUserToken.user_id;if(!n)throw new tg(tp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");i=new tr(n)}e._authCredentials=new ty(new tm(t,i))}}(sY,...e)}function sX(){return(0,S.useEffect)(()=>{},[]),null}sH().then(e=>{e&&function(e=ez()){let t=eD(e=X(e),sw);t.isInitialized()?t.getImmediate():function(e,t={}){let i=eD(e,sw);if(i.isInitialized()){let e=i.getImmediate();if(W(t,i.getOptions()))return;throw sx.create("already-initialized")}i.initialize({options:t})}(e)}(sW)}),e.s(["default",()=>sX],30255)},69320,e=>{"use strict";e.i(48367);var t=e.i(32315),i="undefined"!=typeof window?window:void 0,r="undefined"!=typeof globalThis?globalThis:i;"undefined"==typeof self&&(r.self=r),"undefined"==typeof File&&(r.File=function(){});var n=Array.prototype,s=n.forEach,o=n.indexOf,a=null==r?void 0:r.navigator,l=null==r?void 0:r.document,u=null==r?void 0:r.location,h=null==r?void 0:r.fetch,c=null!=r&&r.XMLHttpRequest&&"withCredentials"in new r.XMLHttpRequest?r.XMLHttpRequest:void 0,d=null==r?void 0:r.AbortController,f=null==a?void 0:a.userAgent,p=null!=i?i:{},g={DEBUG:!1,LIB_VERSION:"1.328.0"};function v(e,t,i,r,n,s,o){try{var a=e[s](o),l=a.value}catch(e){return void i(e)}a.done?t(l):Promise.resolve(l).then(r,n)}function m(e){return function(){var t=this,i=arguments;return new Promise(function(r,n){var s=e.apply(t,i);function o(e){v(s,r,n,o,a,"next",e)}function a(e){v(s,r,n,o,a,"throw",e)}o(void 0)})}}function _(){return(_=Object.assign.bind()).apply(null,arguments)}function y(e,t){if(null==e)return{};var i={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}var b=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],w=function(e,t){if(void 0===t&&(t=[]),!e)return!1;var i=e.toLowerCase();return b.concat(t).some(e=>{var t=e.toLowerCase();return -1!==i.indexOf(t)})},E=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function S(e,t){return -1!==e.indexOf(t)}var x=function(e){return e.trim()},T=function(e){return e.replace(/^\$/,"")},I=Array.isArray,k=Object.prototype,C=k.hasOwnProperty,A=k.toString,P=I||function(e){return"[object Array]"===A.call(e)},R=e=>"function"==typeof e,D=e=>e===Object(e)&&!P(e),O=e=>{if(D(e)){for(var t in e)if(C.call(e,t))return!1;return!0}return!1},M=e=>void 0===e,N=e=>"[object String]"==A.call(e),L=e=>N(e)&&0===e.trim().length,F=e=>null===e,$=e=>M(e)||F(e),V=e=>"[object Number]"==A.call(e)&&e==e,U=e=>V(e)&&e>0,j=e=>"[object Boolean]"===A.call(e),B=e=>S(E,e);function q(e){return null===e||"object"!=typeof e}function H(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function z(e){return!M(Event)&&function(e,t){try{return e instanceof t}catch(e){return!1}}(e,Event)}var G=[!0,"true",1,"1","yes"],W=[!1,"false",0,"0","no"];function K(e,t,i,r,n){return t>i&&(r.warn("min cannot be greater than max."),t=i),V(e)?e>i?(r.warn(" cannot be  greater than max: "+i+". Using max value instead."),i):e<t?(r.warn(" cannot be less than min: "+t+". Using min value instead."),t):e:(r.warn(" must be a number. using max or fallback. max: "+i+", fallback: "+n),K(n||i,t,i,r))}class Y{constructor(e){this.t={},this.i=e.i,this.o=K(e.bucketSize,0,100,e.h),this.m=K(e.refillRate,0,this.o,e.h),this.$=K(e.refillInterval,0,864e5,e.h)}S(e,t){var i=Math.floor((t-e.lastAccess)/this.$);if(i>0){var r=i*this.m;e.tokens=Math.min(e.tokens+r,this.o),e.lastAccess=e.lastAccess+i*this.$}}consumeRateLimit(e){var t,i=Date.now(),r=String(e),n=this.t[r];return n?this.S(n,i):(n={tokens:this.o,lastAccess:i},this.t[r]=n),0===n.tokens||(n.tokens--,0===n.tokens&&(null==(t=this.i)||t.call(this,e)),0===n.tokens)}stop(){this.t={}}}var X,J,Q,Z="Mobile",ee="Android",et="Tablet",ei=ee+" "+et,er="iPad",en="Apple",es=en+" Watch",eo="Safari",ea="BlackBerry",el="Samsung",eu=el+"Browser",eh=el+" Internet",ec="Chrome",ed=ec+" OS",ef=ec+" iOS",ep="Internet Explorer",eg=ep+" "+Z,ev="Opera",em=ev+" Mini",e_="Edge",ey="Microsoft "+e_,eb="Firefox",ew=eb+" iOS",eE="Nintendo",eS="PlayStation",ex="Xbox",eT=ee+" "+Z,eI=Z+" "+eo,ek="Windows",eC=ek+" Phone",eA="Nokia",eP="Ouya",eR="Generic",eD=eR+" "+Z.toLowerCase(),eO=eR+" "+et.toLowerCase(),eM="Konqueror",eN="(\\d+(\\.\\d+)?)",eL=RegExp("Version/"+eN),eF=RegExp(ex,"i"),e$=RegExp(eS+" \\w+","i"),eV=RegExp(eE+" \\w+","i"),eU=RegExp(ea+"|PlayBook|BB10","i"),ej={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},eB=function(e,t){var i;return t=t||"",S(e," OPR/")&&S(e,"Mini")?em:S(e," OPR/")?ev:eU.test(e)?ea:S(e,"IE"+Z)||S(e,"WPDesktop")?eg:S(e,eu)?eh:S(e,e_)||S(e,"Edg/")?ey:S(e,"FBIOS")?"Facebook "+Z:S(e,"UCWEB")||S(e,"UCBrowser")?"UC Browser":S(e,"CriOS")?ef:S(e,"CrMo")||S(e,ec)?ec:S(e,ee)&&S(e,eo)?eT:S(e,"FxiOS")?ew:S(e.toLowerCase(),eM.toLowerCase())?eM:(i=t)&&S(i,en)||S(e,eo)&&!S(e,ec)&&!S(e,ee)?S(e,Z)?eI:eo:S(e,eb)?eb:S(e,"MSIE")||S(e,"Trident/")?ep:S(e,"Gecko")?eb:""},eq={[eg]:[RegExp("rv:"+eN)],[ey]:[RegExp(e_+"?\\/"+eN)],[ec]:[RegExp("("+ec+"|CrMo)\\/"+eN)],[ef]:[RegExp("CriOS\\/"+eN)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+eN)],[eo]:[eL],[eI]:[eL],[ev]:[RegExp("(Opera|OPR)\\/"+eN)],[eb]:[RegExp(eb+"\\/"+eN)],[ew]:[RegExp("FxiOS\\/"+eN)],[eM]:[RegExp("Konqueror[:/]?"+eN,"i")],[ea]:[RegExp(ea+" "+eN),eL],[eT]:[RegExp("android\\s"+eN,"i")],[eh]:[RegExp(eu+"\\/"+eN)],[ep]:[RegExp("(rv:|MSIE )"+eN)],Mozilla:[RegExp("rv:"+eN)]},eH=function(e,t){var i=eq[eB(e,t)];if(M(i))return null;for(var r=0;r<i.length;r++){var n=i[r],s=e.match(n);if(s)return parseFloat(s[s.length-2])}return null},ez=[[RegExp(ex+"; "+ex+" (.*?)[);]","i"),e=>[ex,e&&e[1]||""]],[RegExp(eE,"i"),[eE,""]],[RegExp(eS,"i"),[eS,""]],[eU,[ea,""]],[RegExp(ek,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[eC,""];if(new RegExp(Z).test(t)&&!/IEMobile\b/.test(t))return[ek+" "+Z,""];var i=/Windows NT ([0-9.]+)/i.exec(t);if(i&&i[1]){var r=ej[i[1]]||"";return/arm/i.test(t)&&(r="RT"),[ek,r]}return[ek,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>e&&e[3]?["iOS",[e[3],e[4],e[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=M(e[2])?e[3]:e[2]),["watchOS",t]}],[RegExp("("+ee+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+ee+")","i"),e=>e&&e[2]?[ee,[e[2],e[3],e[4]||"0"].join(".")]:[ee,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var i=[e[1],e[2],e[3]||"0"];t[1]=i.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[ed,""]],[/Linux|debian/i,["Linux",""]]],eG=function(e){return eV.test(e)?eE:e$.test(e)?eS:eF.test(e)?ex:RegExp(eP,"i").test(e)?eP:RegExp("("+eC+"|WPDesktop)","i").test(e)?eC:/iPad/.test(e)?er:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?es:eU.test(e)?ea:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":RegExp(eA,"i").test(e)?eA:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?new RegExp(Z).test(e)&&!/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)||/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?ee:ei:RegExp("(pda|"+Z+")","i").test(e)?eD:RegExp(et,"i").test(e)&&!RegExp(et+" pc","i").test(e)?eO:""},eW=e=>e instanceof Error;class eK{constructor(e,t,i){void 0===i&&(i=[]),this.coercers=e,this.stackParser=t,this.modifiers=i}buildFromUnknown(e,t){void 0===t&&(t={});var i=t&&t.mechanism||{handled:!0,type:"generic"},r=this.buildCoercingContext(i,t,0).apply(e),n=this.buildParsingContext(),s=this.parseStacktrace(r,n);return{$exception_list:this.convertToExceptionList(s,i),$exception_level:"error"}}modifyFrames(e){var t=this;return m(function*(){for(var i of e)i.stacktrace&&i.stacktrace.frames&&P(i.stacktrace.frames)&&(i.stacktrace.frames=yield t.applyModifiers(i.stacktrace.frames));return e})()}coerceFallback(e){var t;return{type:"Error",value:"Unknown error",stack:null==(t=e.syntheticException)?void 0:t.stack,synthetic:!0}}parseStacktrace(e,t){var i,r;return null!=e.cause&&(i=this.parseStacktrace(e.cause,t)),""!=e.stack&&null!=e.stack&&(r=this.applyChunkIds(this.stackParser(e.stack,+!!e.synthetic),t.chunkIdMap)),_({},e,{cause:i,stack:r})}applyChunkIds(e,t){return e.map(e=>(e.filename&&t&&(e.chunk_id=t[e.filename]),e))}applyCoercers(e,t){for(var i of this.coercers)if(i.match(e))return i.coerce(e,t);return this.coerceFallback(t)}applyModifiers(e){var t=this;return m(function*(){var i=e;for(var r of t.modifiers)i=yield r(i);return i})()}convertToExceptionList(e,t){var i,r,n,s={type:e.type,value:e.value,mechanism:{type:null!=(i=t.type)?i:"generic",handled:null==(r=t.handled)||r,synthetic:null!=(n=e.synthetic)&&n}};e.stack&&(s.stacktrace={type:"raw",frames:e.stack});var o=[s];return null!=e.cause&&o.push(...this.convertToExceptionList(e.cause,_({},t,{handled:!0}))),o}buildParsingContext(){return{chunkIdMap:function(e){var t=globalThis._posthogChunkIds;if(t){var i=Object.keys(t);return Q&&i.length===J||(J=i.length,Q=i.reduce((i,r)=>{X||(X={});var n=X[r];if(n)i[n[0]]=n[1];else for(var s=e(r),o=s.length-1;o>=0;o--){var a=s[o],l=null==a?void 0:a.filename,u=t[r];if(l&&u){i[l]=u,X[r]=[l,u];break}}return i},{})),Q}}(this.stackParser)}}buildCoercingContext(e,t,i){void 0===i&&(i=0);var r=(i,r)=>{if(r<=4){var n=this.buildCoercingContext(e,t,r);return this.applyCoercers(i,n)}};return _({},t,{syntheticException:0==i?t.syntheticException:void 0,mechanism:e,apply:e=>r(e,i),next:e=>r(e,i+1)})}}function eY(e,t,i,r,n){var s={platform:e,filename:t,function:"<anonymous>"===i?"?":i,in_app:!0};return M(r)||(s.lineno=r),M(n)||(s.colno=n),s}var eX=(e,t)=>{var i=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return i||r?[-1!==e.indexOf("@")?e.split("@")[0]:"?",i?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},eJ=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,eQ=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,eZ=/\((\S*)(?::(\d+))(?::(\d+))\)/,e0=(e,t)=>{var i=eJ.exec(e);if(i){var[,r,n,s]=i;return eY(t,r,"?",+n,+s)}var o=eQ.exec(e);if(o){if(o[2]&&0===o[2].indexOf("eval")){var a=eZ.exec(o[2]);a&&(o[2]=a[1],o[3]=a[2],o[4]=a[3])}var[l,u]=eX(o[1]||"?",o[2]);return eY(t,u,l,o[3]?+o[3]:void 0,o[4]?+o[4]:void 0)}},e1=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,e2=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,e3=(e,t)=>{var i=e1.exec(e);if(i){if(i[3]&&i[3].indexOf(" > eval")>-1){var r=e2.exec(i[3]);r&&(i[1]=i[1]||"eval",i[3]=r[1],i[4]=r[2],i[5]="")}var n=i[3],s=i[1]||"?";return[s,n]=eX(s,n),eY(t,n,s,i[4]?+i[4]:void 0,i[5]?+i[5]:void 0)}},e6=/\(error: (.*)\)/;class e5{match(e){return this.isDOMException(e)||this.isDOMError(e)}coerce(e,t){var i=N(e.stack);return{type:this.getType(e),value:this.getValue(e),stack:i?e.stack:void 0,cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return this.isDOMError(e)?"DOMError":"DOMException"}getValue(e){var t=e.name||(this.isDOMError(e)?"DOMError":"DOMException");return e.message?t+": "+e.message:t}isDOMException(e){return H(e,"DOMException")}isDOMError(e){return H(e,"DOMError")}}class e4{match(e){return e instanceof Error}coerce(e,t){return{type:this.getType(e),value:this.getMessage(e,t),stack:this.getStack(e),cause:e.cause?t.next(e.cause):void 0,synthetic:!1}}getType(e){return e.name||e.constructor.name}getMessage(e,t){var i=e.message;return i.error&&"string"==typeof i.error.message?String(i.error.message):String(i)}getStack(e){return e.stacktrace||e.stack||void 0}}class e8{match(e){return H(e,"ErrorEvent")&&null!=e.error}coerce(e,t){var i;return t.apply(e.error)||{type:"ErrorEvent",value:e.message,stack:null==(i=t.syntheticException)?void 0:i.stack,synthetic:!0}}}var e7=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class e9{match(e){return"string"==typeof e}coerce(e,t){var i,[r,n]=this.getInfos(e);return{type:null!=r?r:"Error",value:null!=n?n:e,stack:null==(i=t.syntheticException)?void 0:i.stack,synthetic:!0}}getInfos(e){var t="Error",i=e,r=e.match(e7);return r&&(t=r[1],i=r[2]),[t,i]}}var te=["fatal","error","warning","log","info","debug"];function tt(e,t){void 0===t&&(t=40);var i=Object.keys(e);if(i.sort(),!i.length)return"[object has no keys]";for(var r=i.length;r>0;r--){var n=i.slice(0,r).join(", ");if(!(n.length>t))return r===i.length||n.length<=t?n:n.slice(0,t)+"..."}return""}class ti{match(e){return"object"==typeof e&&null!==e}coerce(e,t){var i,r=this.getErrorPropertyFromObject(e);return r?t.apply(r):{type:this.getType(e),value:this.getValue(e),stack:null==(i=t.syntheticException)?void 0:i.stack,level:this.isSeverityLevel(e.level)?e.level:"error",synthetic:!0}}getType(e){return z(e)?e.constructor.name:"Error"}getValue(e){if("name"in e&&"string"==typeof e.name){var t="'"+e.name+"' captured as exception";return"message"in e&&"string"==typeof e.message&&(t+=" with message: '"+e.message+"'"),t}if("message"in e&&"string"==typeof e.message)return e.message;var i=this.getObjectClassName(e);return(i&&"Object"!==i?"'"+i+"'":"Object")+" captured as exception with keys: "+tt(e)}isSeverityLevel(e){return N(e)&&!L(e)&&te.indexOf(e)>=0}getErrorPropertyFromObject(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=e[t];if(eW(i))return i}}getObjectClassName(e){try{var t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){return}}}class tr{match(e){return z(e)}coerce(e,t){var i,r=e.constructor.name;return{type:r,value:r+" captured as exception with keys: "+tt(e),stack:null==(i=t.syntheticException)?void 0:i.stack,synthetic:!0}}}class tn{match(e){return q(e)}coerce(e,t){var i;return{type:"Error",value:"Primitive value captured as exception: "+String(e),stack:null==(i=t.syntheticException)?void 0:i.stack,synthetic:!0}}}class ts{match(e){return H(e,"PromiseRejectionEvent")}coerce(e,t){var i,r=this.getUnhandledRejectionReason(e);return q(r)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(r),stack:null==(i=t.syntheticException)?void 0:i.stack,synthetic:!0}:t.apply(r)}getUnhandledRejectionReason(e){if(q(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(e){}return e}}var to=function(e,t){var{debugEnabled:r}=void 0===t?{}:t,n={k:function(t){if(i&&(g.DEBUG||p.POSTHOG_DEBUG||r)&&!M(i.console)&&i.console){for(var n=("__rrweb_original__"in i.console[t])?i.console[t].__rrweb_original__:i.console[t],s=arguments.length,o=Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];n(e,...o)}},info:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n.k("log",...t)},warn:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n.k("warn",...t)},error:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];n.k("error",...t)},critical:function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];console.error(e,...i)},uninitializedWarning:e=>{n.error("You must initialize PostHog before calling "+e)},createLogger:(t,i)=>to(e+" "+t,i)};return n},ta=to("[PostHog.js]"),tl=ta.createLogger,tu=tl("[ExternalScriptsLoader]"),th=(e,t,i)=>{if(e.config.disable_external_dependency_loading)return tu.warn(t+" was requested but loading of external scripts is disabled."),i("Loading of external scripts is disabled");var r=null==l?void 0:l.querySelectorAll("script");if(r){for(var n,s=0;s<r.length;s++)if(n=function(){if(r[s].src===t){var e=r[s];return e.__posthog_loading_callback_fired?{v:i()}:(e.addEventListener("load",t=>{e.__posthog_loading_callback_fired=!0,i(void 0,t)}),e.onerror=e=>i(e),{v:void 0})}}())return n.v}var o=()=>{if(!l)return i("document not found");var r=l.createElement("script");if(r.type="text/javascript",r.crossOrigin="anonymous",r.src=t,r.onload=e=>{r.__posthog_loading_callback_fired=!0,i(void 0,e)},r.onerror=e=>i(e),e.config.prepare_external_dependency_script&&(r=e.config.prepare_external_dependency_script(r)),!r)return i("prepare_external_dependency_script returned null");var n,s=l.querySelectorAll("body > script");s.length>0?null==(n=s[0].parentNode)||n.insertBefore(r,s[0]):l.body.appendChild(r)};null!=l&&l.body?o():null==l||l.addEventListener("DOMContentLoaded",o)};p.__PosthogExtensions__=p.__PosthogExtensions__||{},p.__PosthogExtensions__.loadExternalDependency=(e,t,i)=>{var r="/static/"+t+".js?v="+e.version;"remote-config"===t&&(r="/array/"+e.config.token+"/config.js"),"toolbar"===t&&(r=r+"&t="+3e5*Math.floor(Date.now()/3e5));var n=e.requestRouter.endpointFor("assets",r);th(e,n,i)},p.__PosthogExtensions__.loadSiteApp=(e,t,i)=>{var r=e.requestRouter.endpointFor("api",t);th(e,r,i)};var tc={};function td(e,t,i){if(P(e)){if(s&&e.forEach===s)e.forEach(t,i);else if("length"in e&&e.length===+e.length){for(var r=0,n=e.length;r<n;r++)if(r in e&&t.call(i,e[r],r)===tc)return}}}function tf(e,t,i){if(!$(e)){if(P(e))return td(e,t,i);if(e instanceof FormData){for(var r of e.entries())if(t.call(i,r[1],r[0])===tc)return}else for(var n in e)if(C.call(e,n)&&t.call(i,e[n],n)===tc)return}}var tp=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return td(i,function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])}),e},tg=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return td(i,function(t){td(t,function(t){e.push(t)})}),e};function tv(e){for(var t=Object.keys(e),i=t.length,r=Array(i);i--;)r[i]=[t[i],e[t[i]]];return r}var tm=function(e){try{return e()}catch(e){return}},t_=function(e){return function(){try{for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.apply(this,i)}catch(e){ta.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),ta.critical(e)}}},ty=function(e){var t={};return tf(e,function(e,i){(N(e)&&e.length>0||V(e))&&(t[i]=e)}),t},tb=["herokuapp.com","vercel.app","netlify.app"];function tw(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return e[i]}function tE(e,t,i,r){var{capture:n=!1,passive:s=!0}=null!=r?r:{};null==e||e.addEventListener(t,i,{capture:n,passive:s})}var tS="$people_distinct_id",tx="__alias",tT="__timers",tI="$autocapture_disabled_server_side",tk="$heatmaps_enabled_server_side",tC="$exception_capture_enabled_server_side",tA="$error_tracking_suppression_rules",tP="$error_tracking_capture_extension_exceptions",tR="$web_vitals_enabled_server_side",tD="$dead_clicks_enabled_server_side",tO="$product_tours_enabled_server_side",tM="$web_vitals_allowed_metrics",tN="$session_recording_remote_config",tL="$sesid",tF="$session_is_sampled",t$="$enabled_feature_flags",tV="$early_access_features",tU="$feature_flag_details",tj="$stored_person_properties",tB="$stored_group_properties",tq="$surveys",tH="$flag_call_reported",tz="$user_state",tG="$client_session_props",tW="$capture_rate_limit",tK="$initial_campaign_params",tY="$initial_referrer_info",tX="$initial_person_info",tJ="$epp",tQ="__POSTHOG_TOOLBAR__",tZ="$posthog_cookieless",t0=[tS,tx,"__cmpns",tT,"$session_recording_enabled_server_side",tk,tL,t$,tA,tz,tV,tU,tB,tj,tq,tH,tG,tW,tK,tY,tJ,tX,"$conversations_widget_session_id","$conversations_ticket_id","$conversations_widget_state","$conversations_user_traits"];function t1(e){return e instanceof Element&&(e.id===tQ||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function t2(e){return!!e&&1===e.nodeType}function t3(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function t6(e){return!!e&&3===e.nodeType}function t5(e){return!!e&&11===e.nodeType}function t4(e){return e?x(e).split(/\s+/):[]}function t8(e){var t=null==i?void 0:i.location.href;return!!(t&&e&&e.some(e=>t.match(e)))}function t7(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return t4(t)}function t9(e){return $(e)?null:x(e).split(/(\s+)/).filter(e=>iy(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function ie(e){var t="";return ih(e)&&!ic(e)&&e.childNodes&&e.childNodes.length&&tf(e.childNodes,function(e){var i;t6(e)&&e.textContent&&(t+=null!=(i=t9(e.textContent))?i:"")}),x(t)}function it(e){var t;return M(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null}var ii=["a","button","form","input","select","textarea","label"];function ir(e,t){if(M(t))return!0;var i,r=function(e){if(t.some(t=>e.matches(t)))return{v:!0}};for(var n of e)if(i=r(n))return i.v;return!1}function is(e){var t=e.parentNode;return!(!t||!t2(t))&&t}var io=["next","previous","prev",">","<"],ia=[".ph-no-rageclick",".ph-no-capture"],il=e=>!e||t3(e,"html")||!t2(e),iu=(e,t)=>{if(!i||il(e))return{parentIsUsefulElement:!1,targetElementList:[]};for(var r=!1,n=[e],s=e;s.parentNode&&!t3(s,"body");)if(t5(s.parentNode))n.push(s.parentNode.host),s=s.parentNode.host;else{var o=is(s);if(!o)break;if(t||ii.indexOf(o.tagName.toLowerCase())>-1)r=!0;else{var a=i.getComputedStyle(o);a&&"pointer"===a.getPropertyValue("cursor")&&(r=!0)}n.push(o),s=o}return{parentIsUsefulElement:r,targetElementList:n}};function ih(e){for(var t=e;t.parentNode&&!t3(t,"body");t=t.parentNode){var i=t7(t);if(S(i,"ph-sensitive")||S(i,"ph-no-capture"))return!1}if(S(t7(e),"ph-include"))return!0;var r=e.type||"";if(N(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var n=e.name||e.id||"";return!(N(n)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(n.replace(/[^a-zA-Z0-9]/g,"")))}function ic(e){return!!(t3(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||t3(e,"select")||t3(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var id="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",ip=RegExp("^(?:"+id+")$"),ig=new RegExp(id),iv="\\d{3}-?\\d{2}-?\\d{4}",im=RegExp("^("+iv+")$"),i_=RegExp("("+iv+")");function iy(e,t){return void 0===t&&(t=!0),!($(e)||N(e)&&(e=x(e),(t?ip:ig).test((e||"").replace(/[- ]/g,""))||(t?im:i_).test(e)))&&!0}function ib(e){var t=ie(e);return iy(t=(t+" "+function e(t){var i="";return t&&t.childNodes&&t.childNodes.length&&tf(t.childNodes,function(t){var r;if(t&&"span"===(null==(r=t.tagName)?void 0:r.toLowerCase()))try{var n=ie(t);i=(i+" "+n).trim(),t.childNodes&&t.childNodes.length&&(i=(i+" "+e(t)).trim())}catch(e){ta.error("[AutoCapture]",e)}}),i}(e)).trim())?t:""}function iw(e){return e.replace(/"|\\"/g,'\\"')}class iE{constructor(e){this.disabled=!1===e;var t=D(e)?e:{};this.thresholdPx=t.threshold_px||30,this.timeoutMs=t.timeout_ms||1e3,this.clickCount=t.click_count||3,this.clicks=[]}isRageClick(e,t,i){if(this.disabled)return!1;var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<this.thresholdPx&&i-r.timestamp<this.timeoutMs){if(this.clicks.push({x:e,y:t,timestamp:i}),this.clicks.length===this.clickCount)return!0}else this.clicks=[{x:e,y:t,timestamp:i}];return!1}}var iS=e=>{var t=null==l?void 0:l.createElement("a");return M(t)?null:(t.href=e,t)},ix=function(e,t){void 0===t&&(t="&");var i,r,n=[];return tf(e,function(e,t){M(e)||M(t)||"undefined"===t||(i=encodeURIComponent(e instanceof File?e.name:e.toString()),r=encodeURIComponent(t),n[n.length]=r+"="+i)}),n.join(t)},iT=function(e,t){for(var i,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),n=0;n<r.length;n++){var s=r[n].split("=");if(s[0]===t){i=s;break}}if(!P(i)||i.length<2)return"";var o=i[1];try{o=decodeURIComponent(o)}catch(e){ta.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},iI=function(e,t,i){if(!e||!t||!t.length)return e;for(var r=e.split("#"),n=r[0]||"",s=r[1],o=n.split("?"),a=o[1],l=o[0],u=(a||"").split("&"),h=[],c=0;c<u.length;c++){var d=u[c].split("=");P(d)&&(t.includes(d[0])?h.push(d[0]+"="+i):h.push(u[c]))}var f=l;return null!=a&&(f+="?"+h.join("&")),null!=s&&(f+="#"+s),f},ik=function(e,t){var i=e.match(RegExp(t+"=([^&]*)"));return i?i[1]:null},iC="$copy_autocapture",iA=tl("[AutoCapture]");function iP(e,t){return t.length>e?t.slice(0,e)+"...":t}class iR{constructor(e){this.P=!1,this.T=null,this.I=!1,this.instance=e,this.rageclicks=new iE(e.config.rageclick),this.C=null}get R(){var e,t,i=D(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=null==(e=i.url_allowlist)?void 0:e.map(e=>new RegExp(e)),i.url_ignorelist=null==(t=i.url_ignorelist)?void 0:t.map(e=>new RegExp(e)),i}F(){if(this.isBrowserSupported()){if(i&&l){var e=e=>{e=e||(null==i?void 0:i.event);try{this.M(e)}catch(e){iA.error("Failed to capture event",e)}};if(tE(l,"submit",e,{capture:!0}),tE(l,"change",e,{capture:!0}),tE(l,"click",e,{capture:!0}),this.R.capture_copied_text){var t=e=>{e=e||(null==i?void 0:i.event),this.M(e,iC)};tE(l,"copy",t,{capture:!0}),tE(l,"cut",t,{capture:!0})}}}else iA.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.F(),this.P=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.I=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[tI]:!!e.autocapture_opt_out}),this.T=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.C=e}getElementSelectors(e){var t,i=[];return null==(t=this.C)||t.forEach(t=>{var r=null==l?void 0:l.querySelectorAll(t);null==r||r.forEach(r=>{e===r&&i.push(t)})}),i}get isEnabled(){var e,t,i=null==(e=this.instance.persistence)?void 0:e.props[tI];if(F(this.T)&&!j(i)&&!this.instance.O())return!1;var r=null!=(t=this.T)?t:!!i;return!!this.instance.config.autocapture&&!r}M(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var r,n=it(e);t6(n)&&(n=n.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!=(r=this.rageclicks)&&r.isRageClick(e.clientX,e.clientY,e.timeStamp||(new Date).getTime())&&function(e,t){if(!i||il(e)||(j(t)?(r=!!t&&ia,n=void 0):(r=null!=(s=null==t?void 0:t.css_selector_ignorelist)?s:ia,n=null==t?void 0:t.content_ignorelist),!1===r))return!1;var r,n,s,{targetElementList:o}=iu(e,!1);return!function(e,t){var i;if(!1===e||M(e))return!1;if(!0===e)i=io;else{if(!P(e))return!1;if(e.length>10)return ta.error("[PostHog] content_ignorelist array cannot exceed 10 items. Use css_selector_ignorelist for more complex matching."),!1;i=e.map(e=>e.toLowerCase())}return t.some(e=>{var{safeText:t,ariaLabel:r}=e;return i.some(e=>t.includes(e)||r.includes(e))})}(n,o.map(e=>{var t;return{safeText:ie(e).toLowerCase(),ariaLabel:(null==(t=e.getAttribute("aria-label"))?void 0:t.toLowerCase().trim())||""}}))&&!ir(o,r)}(n,this.instance.config.rageclick)&&this.M(e,"$rageclick");var s=t===iC;if(n&&function(e,t,r,n,s){if(void 0===r&&(r=void 0),!i||il(e)||null!=(o=r)&&o.url_allowlist&&!t8(r.url_allowlist)||null!=(a=r)&&a.url_ignorelist&&t8(r.url_ignorelist))return!1;if(null!=(l=r)&&l.dom_event_allowlist){var o,a,l,u,h=r.dom_event_allowlist;if(h&&!h.some(e=>t.type===e))return!1}var{parentIsUsefulElement:c,targetElementList:d}=iu(e,n);if(!function(e,t){var i=null==t?void 0:t.element_allowlist;if(M(i))return!0;var r,n=function(e){if(i.some(t=>e.tagName.toLowerCase()===t))return{v:!0}};for(var s of e)if(r=n(s))return r.v;return!1}(d,r)||!ir(d,null==(u=r)?void 0:u.css_selector_allowlist))return!1;var f=i.getComputedStyle(e);if(f&&"pointer"===f.getPropertyValue("cursor")&&"click"===t.type)return!0;var p=e.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(s||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(s||["change","click"]).indexOf(t.type)>=0;default:return c?(s||["click"]).indexOf(t.type)>=0:(s||["click"]).indexOf(t.type)>=0&&(ii.indexOf(p)>-1||"true"===e.getAttribute("contenteditable"))}}(n,e,this.R,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=function(e,t){for(var r,n,{e:s,maskAllElementAttributes:o,maskAllText:a,elementAttributeIgnoreList:l,elementsChainAsString:u}=t,h=[e],c=e;c.parentNode&&!t3(c,"body");)t5(c.parentNode)?(h.push(c.parentNode.host),c=c.parentNode.host):(h.push(c.parentNode),c=c.parentNode);var d,f=[],p={},g=!1,v=!1;if(tf(h,e=>{var t=ih(e);"a"===e.tagName.toLowerCase()&&(g=e.getAttribute("href"),g=t&&g&&iy(g)&&g),S(t7(e),"ph-no-capture")&&(v=!0),f.push(function(e,t,i,r){var n=e.tagName.toLowerCase(),s={tag_name:n};ii.indexOf(n)>-1&&!i&&("a"===n.toLowerCase()||"button"===n.toLowerCase()?s.$el_text=iP(1024,ib(e)):s.$el_text=iP(1024,ie(e)));var o=t7(e);o.length>0&&(s.classes=o.filter(function(e){return""!==e})),tf(e.attributes,function(i){var n;if((!ic(e)||-1!==["name","id","class","aria-label"].indexOf(i.name))&&(null==r||!r.includes(i.name))&&!t&&iy(i.value)&&(!N(n=i.name)||"_ngcontent"!==n.substring(0,10)&&"_nghost"!==n.substring(0,7))){var o=i.value;"class"===i.name&&(o=t4(o).join(" ")),s["attr__"+i.name]=iP(1024,o)}});for(var a=1,l=1,u=e;u=function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!t2(t))return t}(u);)a++,u.tagName===e.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}(e,o,a,l)),tp(p,function(e){if(!ih(e))return{};var t={};return tf(e.attributes,function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var i=e.name.replace("data-ph-capture-attribute-",""),r=e.value;i&&r&&iy(r)&&(t[i]=r)}}),t}(e))}),v)return{props:{},explicitNoCapture:v};if(a||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?f[0].$el_text=ib(e):f[0].$el_text=ie(e)),g){f[0].attr__href=g;var m,y,b=null==(m=iS(g))?void 0:m.host,w=null==i||null==(y=i.location)?void 0:y.host;b&&w&&b!==w&&(d=g)}return{props:tp({$event_type:s.type,$ce_version:1},u?{}:{$elements:f},{$elements_chain:f.map(e=>{var t,i,r,n={text:null==(i=e.$el_text)?void 0:i.slice(0,400),tag_name:e.tag_name,href:null==(r=e.attr__href)?void 0:r.slice(0,2048),attr_class:(t=e.attr__class)?P(t)?t:t4(t):void 0,attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return tv(e).filter(e=>{var[t]=e;return 0===t.indexOf("attr__")}).forEach(e=>{var[t,i]=e;return n.attributes[t]=i}),n}).map(e=>{var t,i,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class)for(var n of(e.attr_class.sort(),e.attr_class))r+="."+n.replace(/"/g,"");var s=_({},e.text?{text:e.text}:{},{"nth-child":null!=(t=e.nth_child)?t:0,"nth-of-type":null!=(i=e.nth_of_type)?i:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),o={};return tv(s).sort((e,t)=>{var[i]=e,[r]=t;return i.localeCompare(r)}).forEach(e=>{var[t,i]=e;return o[iw(t.toString())]=iw(i.toString())}),r+=":",r+=tv(o).map(e=>{var[t,i]=e;return t+'="'+i+'"'}).join("")}).join(";")},null!=(r=f[0])&&r.$el_text?{$el_text:null==(n=f[0])?void 0:n.$el_text}:{},d&&"click"===s.type?{$external_click_url:d}:{},p)}}(n,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.R.element_attribute_ignorelist,elementsChainAsString:this.I});if(a)return!1;var l=this.getElementSelectors(n);if(l&&l.length>0&&(o.$element_selectors=l),t===iC){var u,h=t9(null==i||null==(u=i.getSelection())?void 0:u.toString()),c=e.type||"clipboard";if(!h)return!1;o.$selected_content=h,o.$copy_type=c}return this.instance.capture(t,o),!0}}}isBrowserSupported(){return R(null==l?void 0:l.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return V(e)&&isFinite(e)&&Math.floor(e)===e});var iD="0123456789abcdef";class iO{constructor(e){if(this.bytes=e,16!==e.length)throw TypeError("not 128-bit length")}static fromFieldsV7(e,t,i,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||t<0||i<0||r<0||e>0xffffffffffff||t>4095||i>0x3fffffff||r>0xffffffff)throw RangeError("invalid field value");var n=new Uint8Array(16);return n[0]=e/0x10000000000,n[1]=e/0x100000000,n[2]=e/0x1000000,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|t>>>8,n[7]=t,n[8]=128|i>>>24,n[9]=i>>>16,n[10]=i>>>8,n[11]=i,n[12]=r>>>24,n[13]=r>>>16,n[14]=r>>>8,n[15]=r,new iO(n)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+iD.charAt(this.bytes[t]>>>4)+iD.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw Error("Invalid UUIDv7 was generated");return e}clone(){return new iO(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var i=this.bytes[t]-e.bytes[t];if(0!==i)return Math.sign(i)}return 0}}class iM{constructor(){this.A=0,this.D=0,this.j=new iF}generate(){var e=this.generateOrAbort();if(M(e)){this.A=0;var t=this.generateOrAbort();if(M(t))throw Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.A)this.A=e,this.L();else{if(!(e+1e4>this.A))return;this.D++,this.D>0x3ffffffffff&&(this.A++,this.L())}return iO.fromFieldsV7(this.A,Math.trunc(this.D/0x40000000),0x3fffffff&this.D,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var iN,iL=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};i&&!M(i.crypto)&&crypto.getRandomValues&&(iL=e=>crypto.getRandomValues(e));class iF{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(iL(this.N),this.U=0),this.N[this.U++]}}var i$=()=>iV().toString(),iV=()=>(iN||(iN=new iM)).generate(),iU="",ij=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,iB={H:()=>!!l,B:function(e){ta.error("cookieStore error: "+e)},q:function(e){if(l){try{for(var t=e+"=",i=l.cookie.split(";").filter(e=>e.length),r=0;r<i.length;r++){for(var n=i[r];" "==n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}}catch(e){}return null}},W:function(e){var t;try{t=JSON.parse(iB.q(e))||{}}catch(e){}return t},G:function(e,t,i,r,n){if(l)try{var s="",o="",a=function(e,t){if(t){var i=function(e,t){if(void 0===t&&(t=l),iU)return iU;if(!t||["localhost","127.0.0.1"].includes(e))return"";for(var i=e.split("."),r=Math.min(i.length,8),n="dmn_chk_"+i$();!iU&&r--;){var s=i.slice(r).join("."),o=n+"=1;domain=."+s+";path=/";t.cookie=o+";max-age=3",t.cookie.includes(n)&&(t.cookie=o+";max-age=0",iU=s)}return iU}(e);if(!i){var r,n=(r=e.match(ij))?r[0]:"";n!==i&&ta.info("Warning: cookie subdomain discovery mismatch",n,i),i=n}return i?"; domain=."+i:""}return""}(l.location.hostname,r);if(i){var u=new Date;u.setTime(u.getTime()+24*i*36e5),s="; expires="+u.toUTCString()}n&&(o="; secure");var h=e+"="+encodeURIComponent(JSON.stringify(t))+s+"; SameSite=Lax; path=/"+a+o;return h.length>3686.4&&ta.warn("cookieStore warning: large cookie, len="+h.length),l.cookie=h,h}catch(e){return}},V:function(e,t){if(null!=l&&l.cookie)try{iB.G(e,"",-1,t)}catch(e){return}}},iq=null,iH={H:function(){if(!F(iq))return iq;var e=!0;if(M(i))e=!1;else try{var t="__mplssupport__";iH.G(t,"xyz"),'"xyz"'!==iH.q(t)&&(e=!1),iH.V(t)}catch(t){e=!1}return e||ta.error("localStorage unsupported; falling back to cookie store"),iq=e,e},B:function(e){ta.error("localStorage error: "+e)},q:function(e){try{return null==i?void 0:i.localStorage.getItem(e)}catch(e){iH.B(e)}return null},W:function(e){try{return JSON.parse(iH.q(e))||{}}catch(e){}return null},G:function(e,t){try{null==i||i.localStorage.setItem(e,JSON.stringify(t))}catch(e){iH.B(e)}},V:function(e){try{null==i||i.localStorage.removeItem(e)}catch(e){iH.B(e)}}},iz=["$device_id","distinct_id",tL,tF,tJ,tX],iG={},iW={H:function(){return!0},B:function(e){ta.error("memoryStorage error: "+e)},q:function(e){return iG[e]||null},W:function(e){return iG[e]||null},G:function(e,t){iG[e]=t},V:function(e){delete iG[e]}},iK=null,iY={H:function(){if(!F(iK))return iK;if(iK=!0,M(i))iK=!1;else try{var e="__support__";iY.G(e,"xyz"),'"xyz"'!==iY.q(e)&&(iK=!1),iY.V(e)}catch(e){iK=!1}return iK},B:function(e){ta.error("sessionStorage error: ",e)},q:function(e){try{return null==i?void 0:i.sessionStorage.getItem(e)}catch(e){iY.B(e)}return null},W:function(e){try{return JSON.parse(iY.q(e))||null}catch(e){}return null},G:function(e,t){try{null==i||i.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){iY.B(e)}},V:function(e){try{null==i||i.sessionStorage.removeItem(e)}catch(e){iY.B(e)}}},iX=((sm={})[sm.PENDING=-1]="PENDING",sm[sm.DENIED=0]="DENIED",sm[sm.GRANTED=1]="GRANTED",sm);class iJ{constructor(e){this._instance=e}get R(){return this._instance.config}get consent(){return this.J()?iX.DENIED:this.K}isOptedOut(){return"always"===this.R.cookieless_mode||this.consent===iX.DENIED||this.consent===iX.PENDING&&(this.R.opt_out_capturing_by_default||"on_reject"===this.R.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===iX.DENIED}optInOut(e){this.Y.G(this.X,+!!e,this.R.cookie_expiration,this.R.cross_subdomain_cookie,this.R.secure_cookie)}reset(){this.Y.V(this.X,this.R.cross_subdomain_cookie)}get X(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:i}=this._instance.config;return i||(t?t+e:"__ph_opt_in_out_"+e)}get K(){var e=this.Y.q(this.X);return S(G,e)?iX.GRANTED:S(W,e)?iX.DENIED:iX.PENDING}get Y(){if(!this.Z){var e=this.R.opt_out_capturing_persistence_type;this.Z="localStorage"===e?iH:iB;var t="localStorage"===e?iB:iH;t.q(this.X)&&(this.Z.q(this.X)||this.optInOut(S(G,t.q(this.X))),t.V(this.X,this.R.cross_subdomain_cookie))}return this.Z}J(){return!!this.R.respect_dnt&&!!tw([null==a?void 0:a.doNotTrack,null==a?void 0:a.msDoNotTrack,p.doNotTrack],e=>S(G,e))}}var iQ=tl("[Dead Clicks]"),iZ=()=>!0,i0=e=>{var t,i=!(null==(t=e.instance.persistence)||!t.get_property(tD)),r=e.instance.config.capture_dead_clicks;return j(r)?r:!!D(r)||i};class i1{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(e,t,i){this.instance=e,this.isEnabled=t,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[tD]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(e){var t,i;null!=(t=p.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(i=p.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",t=>{t?iQ.error("failed to load script",t):e()})}et(){var e;if(l){if(!this.tt&&null!=(e=p.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=D(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this.tt=p.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this.tt.start(l),iQ.info("starting...")}}else iQ.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,iQ.info("stopping..."))}}var i2=tl("[ExceptionAutocapture]");class i3{constructor(e){var t,r,n;this.rt=()=>{var e;if(i&&this.isEnabled&&null!=(e=p.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=p.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,r=p.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,n=p.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.st&&this.R.capture_unhandled_errors&&(this.st=t(this.captureException.bind(this))),!this.nt&&this.R.capture_unhandled_rejections&&(this.nt=r(this.captureException.bind(this))),!this.ot&&this.R.capture_console_errors&&(this.ot=n(this.captureException.bind(this)))}catch(e){i2.error("failed to start",e),this.ut()}}},this._instance=e,this.ht=!(null==(t=this._instance.persistence)||!t.props[tC]),this.dt=new Y({refillRate:null!=(r=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)?r:1,bucketSize:null!=(n=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)?n:10,refillInterval:1e4,h:i2}),this.R=this.vt(),this.startIfEnabledOrStop()}vt(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return D(e)?t=_({},t,e):(M(e)?this.ht:e)&&(t=_({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this.R.capture_console_errors||this.R.capture_unhandled_errors||this.R.capture_unhandled_rejections}startIfEnabledOrStop(){this.isEnabled?(i2.info("enabled"),this.ut(),this.it(this.rt)):this.ut()}it(e){var t,i;null!=(t=p.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(i=p.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"exception-autocapture",t=>{if(t)return i2.error("failed to load script",t);e()})}ut(){var e,t,i;null==(e=this.st)||e.call(this),this.st=void 0,null==(t=this.nt)||t.call(this),this.nt=void 0,null==(i=this.ot)||i.call(this),this.ot=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this.ht=!!t,this._instance.persistence&&this._instance.persistence.register({[tC]:this.ht}),this.R=this.vt(),this.startIfEnabledOrStop()}onConfigChange(){this.R=this.vt()}captureException(e){var t,i,r=null!=(t=null==e||null==(i=e.$exception_list)||null==(i=i[0])?void 0:i.type)?t:"Exception";this.dt.consumeRateLimit(r)?i2.info("Skipping exception capture because of client rate limiting.",{exception:r}):this._instance.exceptions.sendExceptionEvent(e)}}function i6(e,t,i){try{if(!(t in e))return()=>{};var r=e[t],n=i(r);return R(n)&&(n.prototype=n.prototype||{},Object.defineProperties(n,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=n,()=>{e[t]=r}}catch(e){return()=>{}}}class i5{constructor(e){var t;this._instance=e,this.ct=(null==i||null==(t=i.location)?void 0:t.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(ta.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ft&&this.ft(),this.ft=void 0,ta.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(i&&i.history){var r=this;null!=(e=i.history.pushState)&&e.__posthog_wrapped__||i6(i.history,"pushState",e=>function(t,i,n){e.call(this,t,i,n),r._t("pushState")}),null!=(t=i.history.replaceState)&&t.__posthog_wrapped__||i6(i.history,"replaceState",e=>function(t,i,n){e.call(this,t,i,n),r._t("replaceState")}),this.yt()}}_t(e){try{var t,r=null==i||null==(t=i.location)?void 0:t.pathname;if(!r)return;r!==this.ct&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ct=r}catch(t){ta.error("Error capturing "+e+" pageview",t)}}yt(){if(!this.ft){var e=()=>{this._t("popstate")};tE(i,"popstate",e),this.ft=()=>{i&&i.removeEventListener("popstate",e)}}}}var i4=tl("[SegmentIntegration]"),i8="posthog-js";function i7(e,t){var{organization:i,projectId:r,prefix:n,severityAllowList:s=["error"],sendExceptionsToPostHog:o=!0}=void 0===t?{}:t;return t=>{if(!("*"===s||s.includes(t.level))||!e.__loaded)return t;t.tags||(t.tags={});var a,l,u,h,c,d=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=d,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var f=(null==(a=t.exception)?void 0:a.values)||[],p=f.map(e=>_({},e,{stacktrace:e.stacktrace?_({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map(e=>_({},e,{platform:"web:javascript"}))}):void 0})),g={$exception_message:(null==(l=f[0])?void 0:l.value)||t.message,$exception_type:null==(u=f[0])?void 0:u.type,$exception_level:t.level,$exception_list:p,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(h=f[0])?void 0:h.value)||t.message,$sentry_exception_type:null==(c=f[0])?void 0:c.type,$sentry_tags:t.tags};return i&&r&&(g.$sentry_url=(n||"https://sentry.io/organizations/")+i+"/issues/?project="+r+"&query="+t.event_id),o&&e.exceptions.sendExceptionEvent(g),t}}class i9{constructor(e,t,i,r,n,s){this.name=i8,this.setupOnce=function(o){o(i7(e,{organization:t,projectId:i,prefix:r,severityAllowList:n,sendExceptionsToPostHog:null==s||s}))}}}var re=null!=i&&i.location?ik(i.location.hash,"__posthog")||ik(location.hash,"state"):null,rt="_postHogToolbarParams",ri=tl("[Toolbar]"),rr=((s_=rr||{})[s_.UNINITIALIZED=0]="UNINITIALIZED",s_[s_.LOADING=1]="LOADING",s_[s_.LOADED=2]="LOADED",s_);class rn{constructor(e){this.instance=e}bt(e){p.ph_toolbar_state=e}wt(){var e;return null!=(e=p.ph_toolbar_state)?e:rr.UNINITIALIZED}maybeLoadToolbar(e,t,r){if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===r&&(r=void 0),!i||!l)return!1;e=null!=e?e:i.location,r=null!=r?r:i.history;try{if(!t){try{i.localStorage.setItem("test","test"),i.localStorage.removeItem("test")}catch(e){return!1}t=null==i?void 0:i.localStorage}var n,s=re||ik(e.hash,"__posthog")||ik(e.hash,"state"),o=s?tm(()=>JSON.parse(atob(decodeURIComponent(s))))||tm(()=>JSON.parse(decodeURIComponent(s))):null;return o&&"ph_authorize"===o.action?((n=o).source="url",n&&Object.keys(n).length>0&&(o.desiredHash?e.hash=o.desiredHash:r?r.replaceState(r.state,"",e.pathname+e.search):e.hash="")):((n=JSON.parse(t.getItem(rt)||"{}")).source="localstorage",delete n.userIntent),!(!n.token||this.instance.config.token!==n.token)&&(this.loadToolbar(n),!0)}catch(e){return!1}}xt(e){var t=p.ph_load_toolbar||p.ph_load_editor;!$(t)&&R(t)?t(e,this.instance):ri.warn("No toolbar load function found")}loadToolbar(e){var t,r=!(null==l||!l.getElementById(tQ));if(!i||r)return!1;var n="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,s=_({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},n?{instrument:!1}:{});return(i.localStorage.setItem(rt,JSON.stringify(_({},s,{source:void 0}))),this.wt()===rr.LOADED)?this.xt(s):this.wt()===rr.UNINITIALIZED&&(this.bt(rr.LOADING),null==(t=p.__PosthogExtensions__)||null==t.loadExternalDependency||t.loadExternalDependency(this.instance,"toolbar",e=>{e?(ri.error("[Toolbar] Failed to load",e),this.bt(rr.UNINITIALIZED)):(this.bt(rr.LOADED),this.xt(s))}),tE(i,"turbolinks:load",()=>{this.bt(rr.UNINITIALIZED),this.loadToolbar(s)})),!0}Et(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,i){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===i&&(i=void 0),this.maybeLoadToolbar(e,t,i)}}var rs=tl("[TracingHeaders]");class ro{constructor(e){this.$t=void 0,this.St=void 0,this.rt=()=>{var e,t;M(this.$t)&&(null==(e=p.__PosthogExtensions__)||null==(e=e.tracingHeadersPatchFns)||e._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),M(this.St)&&(null==(t=p.__PosthogExtensions__)||null==(t=t.tracingHeadersPatchFns)||t._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}it(e){var t,i;null!=(t=p.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(i=p.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"tracing-headers",t=>{if(t)return rs.error("failed to load script",t);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this.it(this.rt):(null==(e=this.$t)||e.call(this),null==(t=this.St)||t.call(this),this.$t=void 0,this.St=void 0)}}var ra="https?://(.*)",rl=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],ru=tg(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],rl),rh="<masked>",rc=["li_fat_id"];function rd(e,t,i){if(!l)return{};var r,n=t?tg([],rl,i||[]):[],s=rf(iI(l.URL,n,rh),e);return tp((r={},tf(rc,function(e){var t=iB.q(e);r[e]=t||null}),r),s)}function rf(e,t){var i=ru.concat(t||[]),r={};return tf(i,function(t){var i=iT(e,t);r[t]=i||null}),r}function rp(e){var t=e?0===e.search(ra+"google.([^/?]*)")?"google":0===e.search(ra+"bing.com")?"bing":0===e.search(ra+"yahoo.com")?"yahoo":0===e.search(ra+"duckduckgo.com")?"duckduckgo":null:null,i={};if(!F(t)){i.$search_engine=t;var r=l?iT(l.referrer,"yahoo"!=t?"q":"p"):"";r.length&&(i.ph_keyword=r)}return i}function rg(){return navigator.language||navigator.userLanguage}function rv(){return(null==l?void 0:l.referrer)||"$direct"}function rm(e,t){var i=e?tg([],rl,t||[]):[],r=null==u?void 0:u.href.substring(0,1e3);return{r:rv().substring(0,1e3),u:r?iI(r,i,rh):void 0}}function r_(e){var t,{r:i,u:r}=e,n={$referrer:i,$referring_domain:null==i?void 0:"$direct"==i?"$direct":null==(t=iS(i))?void 0:t.host};if(r){n.$current_url=r;var s=iS(r);n.$host=null==s?void 0:s.host,n.$pathname=null==s?void 0:s.pathname,tp(n,rf(r))}return i&&tp(n,rp(i)),n}function ry(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}var rb=tl("[Web Vitals]");class rw{constructor(e){var t;this.kt=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Pt=()=>{clearTimeout(this.Tt),0!==this.N.metrics.length&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((e,t)=>_({},e,{["$web_vitals_"+t.name+"_event"]:_({},t),["$web_vitals_"+t.name+"_value"]:t.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.It=e=>{var t,i=null==(t=this._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(M(i))rb.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var r=this.Ct();M(r)||($(null==e?void 0:e.name)||$(null==e?void 0:e.value)?rb.error("Invalid metric received",e):this.Rt&&e.value>=this.Rt?rb.error("Ignoring metric with value >= "+this.Rt,e):(this.N.url!==r&&(this.Pt(),this.Tt=setTimeout(this.Pt,this.flushToCaptureTimeoutMs)),M(this.N.url)&&(this.N.url=r),this.N.firstMetricTimestamp=M(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.N.metrics.push(_({},e,{$current_url:r,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Pt()))}},this.rt=()=>{var e,t,i,r,n=p.__PosthogExtensions__;M(n)||M(n.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:i,onINP:r}=n.postHogWebVitalsCallbacks),e&&t&&i&&r?(this.allowedMetrics.indexOf("LCP")>-1&&e(this.It.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this.It.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this.It.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&r(this.It.bind(this)),this.P=!0):rb.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.kt=!(null==(t=this._instance.persistence)||!t.props[tR]),this.startIfEnabled()}get allowedMetrics(){var e,t,i=D(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return M(i)?(null==(t=this._instance.persistence)?void 0:t.props[tM])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(D(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get Rt(){var e=D(this._instance.config.capture_performance)&&V(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<e&&e<=6e4?9e5:e}get isEnabled(){var e=null==u?void 0:u.protocol;if("http:"!==e&&"https:"!==e)return rb.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=D(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:j(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return j(t)?t:this.kt}startIfEnabled(){this.isEnabled&&!this.P&&(rb.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(e){var t=D(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=D(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[tR]:t}),this._instance.persistence.register({[tM]:i})),this.kt=t,this.startIfEnabled()}it(e){var t,i;null!=(t=p.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks&&e(),null==(i=p.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"web-vitals",t=>{t?rb.error("failed to load script",t):e()})}Ct(){var e=i?i.location.href:void 0;if(e){var t=this._instance.config.mask_personal_data_properties,r=this._instance.config.custom_personal_data_properties;return iI(e,t?tg([],rl,r||[]):[],rh)}rb.error("Could not determine current URL")}}var rE=tl("[Heatmaps]");function rS(e){return D(e)&&"clientX"in e&&"clientY"in e&&V(e.clientX)&&V(e.clientY)}class rx{constructor(e){var t;this.kt=!1,this.P=!1,this.Ft=null,this.instance=e,this.kt=!(null==(t=this.instance.persistence)||!t.props[tk]),this.rageclicks=new iE(e.config.rageclick)}get flushIntervalMilliseconds(){var e=5e3;return D(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return M(this.instance.config.capture_heatmaps)?M(this.instance.config.enable_heatmaps)?this.kt:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this.P||(rE.info("starting..."),this.Mt(),this.Ot());else{var e;clearInterval(null!=(e=this.Ft)?e:void 0),this.At(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[tk]:t}),this.kt=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.N;return this.N=void 0,e}Dt(e){this.jt(e.originalEvent,"deadclick")}Ot(){this.Ft&&clearInterval(this.Ft),this.Ft="visible"===(null==l?void 0:l.visibilityState)?setInterval(this.Lt.bind(this),this.flushIntervalMilliseconds):null}Mt(){i&&l&&(this.Nt=this.Lt.bind(this),tE(i,"beforeunload",this.Nt),this.Ut=e=>this.jt(e||(null==i?void 0:i.event)),tE(l,"click",this.Ut,{capture:!0}),this.zt=e=>this.Ht(e||(null==i?void 0:i.event)),tE(l,"mousemove",this.zt,{capture:!0}),this.Bt=new i1(this.instance,iZ,this.Dt.bind(this)),this.Bt.startIfEnabled(),this.qt=this.Ot.bind(this),tE(l,"visibilitychange",this.qt),this.P=!0)}At(){var e;i&&l&&(this.Nt&&i.removeEventListener("beforeunload",this.Nt),this.Ut&&l.removeEventListener("click",this.Ut,{capture:!0}),this.zt&&l.removeEventListener("mousemove",this.zt,{capture:!0}),this.qt&&l.removeEventListener("visibilitychange",this.qt),clearTimeout(this.Wt),null==(e=this.Bt)||e.stop(),this.P=!1)}Gt(e,t){var r=this.instance.scrollManager.scrollY(),n=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(e,t,r){for(var n=e;n&&t2(n)&&!t3(n,"body")&&n!==r;){if(S(t,null==i?void 0:i.getComputedStyle(n).position))return!0;n=is(n)}return!1}(it(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:n),y:e.clientY+(o?0:r),target_fixed:o,type:t}}jt(e,t){var i;if(void 0===t&&(t="click"),!t1(e.target)&&rS(e)){var r=this.Gt(e,t);null!=(i=this.rageclicks)&&i.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this.Vt(_({},r,{type:"rageclick"})),this.Vt(r)}}Ht(e){!t1(e.target)&&rS(e)&&(clearTimeout(this.Wt),this.Wt=setTimeout(()=>{this.Vt(this.Gt(e,"mousemove"))},500))}Vt(e){if(i){var t=i.location.href,r=this.instance.config.mask_personal_data_properties,n=this.instance.config.custom_personal_data_properties,s=iI(t,r?tg([],rl,n||[]):[],rh);this.N=this.N||{},this.N[s]||(this.N[s]=[]),this.N[s].push(e)}}Lt(){this.N&&!O(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class rT{constructor(e){this.Jt=(e,t,i)=>{i&&(i.noSessionId||i.activityTimeout||i.sessionPastMaximumLength)&&(ta.info("[PageViewManager] Session rotated, clearing pageview state",{sessionId:e,changeReason:i}),this.Kt=void 0,this._instance.scrollManager.resetContext())},this._instance=e,this.Yt()}Yt(){var e;this.Xt=null==(e=this._instance.sessionManager)?void 0:e.onSessionId(this.Jt)}destroy(){var e;null==(e=this.Xt)||e.call(this),this.Xt=void 0}doPageView(e,t){var r,n=this.Qt(e,t);return this.Kt={pathname:null!=(r=null==i?void 0:i.location.pathname)?r:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),n}doPageLeave(e){var t;return this.Qt(e,null==(t=this.Kt)?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null==(e=this.Kt)?void 0:e.pageViewId}}Qt(e,t){var i=this.Kt;if(!i)return{$pageview_id:t};var r={$pageview_id:t,$prev_pageview_id:i.pageViewId},n=this._instance.scrollManager.getContext();if(n&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:o,maxScrollY:a,maxContentHeight:l,lastContentY:u,maxContentY:h}=n;if(!(M(s)||M(o)||M(a)||M(l)||M(u)||M(h))){s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),u=Math.ceil(u),h=Math.ceil(h);var c=s<=1?1:K(o/s,0,1,ta),d=s<=1?1:K(a/s,0,1,ta),f=l<=1?1:K(u/l,0,1,ta),p=l<=1?1:K(h/l,0,1,ta);r=tp(r,{$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:c,$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:d,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:f,$prev_pageview_max_content:h,$prev_pageview_max_content_percentage:p})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var rI=((sy={}).GZipJS="gzip-js",sy.Base64="base64",sy),rk=Uint8Array,rC=Uint16Array,rA=Uint32Array,rP=new rk([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rR=new rk([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rD=new rk([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rO=function(e,t){for(var i=new rC(31),r=0;r<31;++r)i[r]=t+=1<<e[r-1];var n=new rA(i[30]);for(r=1;r<30;++r)for(var s=i[r];s<i[r+1];++s)n[s]=s-i[r]<<5|r;return[i,n]},rM=rO(rP,2),rN=rM[0],rL=rM[1];rN[28]=258,rL[258]=28;for(var rF=rO(rR,0)[1],r$=new rC(32768),rV=0;rV<32768;++rV){var rU=(43690&rV)>>>1|(21845&rV)<<1;rU=(61680&(rU=(52428&rU)>>>2|(13107&rU)<<2))>>>4|(3855&rU)<<4,r$[rV]=((65280&rU)>>>8|(255&rU)<<8)>>>1}var rj=function(e,t,i){for(var r=e.length,n=0,s=new rC(t);n<r;++n)++s[e[n]-1];var o,a=new rC(t);for(n=0;n<t;++n)a[n]=a[n-1]+s[n-1]<<1;if(i){o=new rC(1<<t);var l=15-t;for(n=0;n<r;++n)if(e[n])for(var u=n<<4|e[n],h=t-e[n],c=a[e[n]-1]++<<h,d=c|(1<<h)-1;c<=d;++c)o[r$[c]>>>l]=u}else for(o=new rC(r),n=0;n<r;++n)o[n]=r$[a[e[n]-1]++]>>>15-e[n];return o},rB=new rk(288);for(rV=0;rV<144;++rV)rB[rV]=8;for(rV=144;rV<256;++rV)rB[rV]=9;for(rV=256;rV<280;++rV)rB[rV]=7;for(rV=280;rV<288;++rV)rB[rV]=8;var rq=new rk(32);for(rV=0;rV<32;++rV)rq[rV]=5;var rH=rj(rB,9,0),rz=rj(rq,5,0),rG=function(e){return(e/8|0)+(7&e&&1)},rW=function(e,t,i){(null==i||i>e.length)&&(i=e.length);var r=new(e instanceof rC?rC:e instanceof rA?rA:rk)(i-t);return r.set(e.subarray(t,i)),r},rK=function(e,t,i){i<<=7&t;var r=t/8|0;e[r]|=i,e[r+1]|=i>>>8},rY=function(e,t,i){i<<=7&t;var r=t/8|0;e[r]|=i,e[r+1]|=i>>>8,e[r+2]|=i>>>16},rX=function(e,t){for(var i=[],r=0;r<e.length;++r)e[r]&&i.push({s:r,f:e[r]});var n=i.length,s=i.slice();if(!n)return[new rk(0),0];if(1==n){var o=new rk(i[0].s+1);return o[i[0].s]=1,[o,1]}i.sort(function(e,t){return e.f-t.f}),i.push({s:-1,f:25001});var a=i[0],l=i[1],u=0,h=1,c=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=n-1;)a=i[i[u].f<i[c].f?u++:c++],l=i[u!=h&&i[u].f<i[c].f?u++:c++],i[h++]={s:-1,f:a.f+l.f,l:a,r:l};var d=s[0].s;for(r=1;r<n;++r)s[r].s>d&&(d=s[r].s);var f=new rC(d+1),p=rJ(i[h-1],f,0);if(p>t){r=0;var g=0,v=p-t,m=1<<v;for(s.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});r<n;++r){var _=s[r].s;if(!(f[_]>t))break;g+=m-(1<<p-f[_]),f[_]=t}for(g>>>=v;g>0;){var y=s[r].s;f[y]<t?g-=1<<t-f[y]++-1:++r}for(;r>=0&&g;--r){var b=s[r].s;f[b]==t&&(--f[b],++g)}p=t}return[new rk(f),p]},rJ=function(e,t,i){return -1==e.s?Math.max(rJ(e.l,t,i+1),rJ(e.r,t,i+1)):t[e.s]=i},rQ=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new rC(++t),r=0,n=e[0],s=1,o=function(e){i[r++]=e},a=1;a<=t;++a)if(e[a]==n&&a!=t)++s;else{if(!n&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(n),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(n);s=1,n=e[a]}return[i.subarray(0,r),t]},rZ=function(e,t){for(var i=0,r=0;r<t.length;++r)i+=e[r]*t[r];return i},r0=function(e,t,i){var r=i.length,n=rG(t+2);e[n]=255&r,e[n+1]=r>>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var s=0;s<r;++s)e[n+s+4]=i[s];return 8*(n+4+r)},r1=function(e,t,i,r,n,s,o,a,l,u,h){rK(t,h++,i),++n[256];for(var c=rX(n,15),d=c[0],f=c[1],p=rX(s,15),g=p[0],v=p[1],m=rQ(d),_=m[0],y=m[1],b=rQ(g),w=b[0],E=b[1],S=new rC(19),x=0;x<_.length;++x)S[31&_[x]]++;for(x=0;x<w.length;++x)S[31&w[x]]++;for(var T=rX(S,7),I=T[0],k=T[1],C=19;C>4&&!I[rD[C-1]];--C);var A,P,R,D,O=u+5<<3,M=rZ(n,rB)+rZ(s,rq)+o,N=rZ(n,d)+rZ(s,g)+o+14+3*C+rZ(S,I)+(2*S[16]+3*S[17]+7*S[18]);if(O<=M&&O<=N)return r0(t,h,e.subarray(l,l+u));if(rK(t,h,1+(N<M)),h+=2,N<M){A=rj(d,f,0),P=d,R=rj(g,v,0),D=g;var L=rj(I,k,0);for(rK(t,h,y-257),rK(t,h+5,E-1),rK(t,h+10,C-4),h+=14,x=0;x<C;++x)rK(t,h+3*x,I[rD[x]]);h+=3*C;for(var F=[_,w],$=0;$<2;++$){var V=F[$];for(x=0;x<V.length;++x){var U=31&V[x];rK(t,h,L[U]),h+=I[U],U>15&&(rK(t,h,V[x]>>>5&127),h+=V[x]>>>12)}}}else A=rH,P=rB,R=rz,D=rq;for(x=0;x<a;++x)if(r[x]>255){rY(t,h,A[(U=r[x]>>>18&31)+257]),h+=P[U+257],U>7&&(rK(t,h,r[x]>>>23&31),h+=rP[U]);var j=31&r[x];rY(t,h,R[j]),h+=D[j],j>3&&(rY(t,h,r[x]>>>5&8191),h+=rR[j])}else rY(t,h,A[r[x]]),h+=P[r[x]];return rY(t,h,A[256]),h+P[256]},r2=new rA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),r3=function(){for(var e=new rA(256),t=0;t<256;++t){for(var i=t,r=9;--r;)i=(1&i&&0xedb88320)^i>>>1;e[t]=i}return e}(),r6=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},r5=function(e){var t,i,r,n,s="";for(t=i=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,n=0;n<r;n++){var o=e.charCodeAt(n),a=null;o<128?i++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),F(a)||(i>t&&(s+=e.substring(t,i)),s+=a,t=i=n+1)}return i>t&&(s+=e.substring(t,e.length)),s},r4=!!c||!!h,r8="text/plain",r7=function(e,t,i){void 0===i&&(i=!0);var r,[n,s]=e.split("?"),o=_({},t),a=null!=(r=null==s?void 0:s.split("&").map(e=>{var t,[r,n]=e.split("="),s=i&&null!=(t=o[r])?t:n;return delete o[r],r+"="+s}))?r:[],l=ix(o);return l&&a.push(l),n+"?"+a.join("&")},r9=(e,t)=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,t),ne=e=>{var{data:t,compression:i}=e;if(t){if(i===rI.GZipJS){var r,n,s,o,a,l,u,h,c=new Blob([(r=function(e,t){var i=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new rk(e.length+(e.length>>>1)),n=0,s=function(e){r[n++]=e},o=0;o<i;++o){if(n+5>r.length){var a=new rk(n+8+(i-o<<1));a.set(r),r=a}var l=e.charCodeAt(o);l<128?s(l):(l<2048?s(192|l>>>6):(l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++o))>>>18),s(128|l>>>12&63)):s(224|l>>>12),s(128|l>>>6&63)),s(128|63&l))}return rW(r,0,n)}(r9(t)),n={mtime:0},s=0xffffffff,o={p:function(e){for(var t=s,i=0;i<e.length;++i)t=r3[255&t^e[i]]^t>>>8;s=t},d:function(){return 0xffffffff^s}},a=r.length,o.p(r),h=(l=10+(n.filename&&n.filename.length+1||0),u=function(e,t,i,r,n,s){var o=e.length,a=new rk(r+o+5*(1+Math.floor(o/7e3))+8),l=a.subarray(r,a.length-8),u=0;if(!t||o<8)for(var h=0;h<=o;h+=65535){var c=h+65535;c<o?u=r0(l,u,e.subarray(h,c)):(l[h]=s,u=r0(l,u,e.subarray(h,o)))}else{for(var d=r2[t-1],f=d>>>13,p=8191&d,g=(1<<i)-1,v=new rC(32768),m=new rC(g+1),_=Math.ceil(i/3),y=2*_,b=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<y)&g},w=new rA(25e3),E=new rC(288),S=new rC(32),x=0,T=0,I=(h=0,0),k=0,C=0;h<o;++h){var A=b(h),P=32767&h,R=m[A];if(v[P]=R,m[A]=P,k<=h){var D=o-h;if((x>7e3||I>24576)&&D>423){u=r1(e,l,0,w,E,S,T,I,C,h-C,u),I=x=T=0,C=h;for(var O=0;O<286;++O)E[O]=0;for(O=0;O<30;++O)S[O]=0}var M=2,N=0,L=p,F=P-R&32767;if(D>2&&A==b(h-F))for(var $=Math.min(f,D)-1,V=Math.min(32767,h),U=Math.min(258,D);F<=V&&--L&&P!=R;){if(e[h+M]==e[h+M-F]){for(var j=0;j<U&&e[h+j]==e[h+j-F];++j);if(j>M){if(M=j,N=F,j>$)break;var B=Math.min(F,j-2),q=0;for(O=0;O<B;++O){var H=h-F+O+32768&32767,z=H-v[H]+32768&32767;z>q&&(q=z,R=H)}}}F+=(P=R)-(R=v[P])+32768&32767}if(N){w[I++]=0x10000000|rL[M]<<18|rF[N];var G=31&rL[M],W=31&rF[N];T+=rP[G]+rR[W],++E[257+G],++S[W],k=h+M,++x}else w[I++]=e[h],++E[e[h]]}}u=r1(e,l,s,w,E,S,T,I,C,h-C,u)}return rW(a,0,r+rG(u)+8)}(r,null==n.level?6:n.level,null==n.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(r.length)))):12+n.mem,l,8,!0)).length,function(e,t){var i=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:2*(9==t.level),e[9]=3,0!=t.mtime&&r6(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),i){e[3]=8;for(var r=0;r<=i.length;++r)e[r+10]=i.charCodeAt(r)}}(u,n),r6(u,h-8,o.d()),r6(u,h-4,a),u)],{type:r8});return{contentType:r8,body:c,estimatedSize:c.size}}if(i===rI.Base64){let e;var d="data="+encodeURIComponent("string"==typeof(e=function(e){var t,i,r,n,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,u="",h=[];if(!e)return e;e=r5(e);do t=(s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,i=s>>12&63,r=s>>6&63,n=63&s,h[l++]=o.charAt(t)+o.charAt(i)+o.charAt(r)+o.charAt(n);while(a<e.length)switch(u=h.join(""),e.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u}(r9(t)))?e:r9(e));return{contentType:"application/x-www-form-urlencoded",body:d,estimatedSize:new Blob([d]).size}}var f=r9(t);return{contentType:"application/json",body:f,estimatedSize:new Blob([f]).size}}},nt=[];h&&nt.push({transport:"fetch",method:e=>{var t,i,{contentType:r,body:n,estimatedSize:s}=null!=(t=ne(e))?t:{},o=new Headers;tf(e.headers,function(e,t){o.append(t,e)}),r&&o.append("Content-Type",r);var a=e.url,l=null;if(d){var u=new d;l={signal:u.signal,timeout:setTimeout(()=>u.abort(),e.timeout)}}h(a,_({method:(null==e?void 0:e.method)||"GET",headers:o,keepalive:"POST"===e.method&&52428.8>(s||0),body:n,signal:null==(i=l)?void 0:i.signal},e.fetchOptions)).then(t=>t.text().then(i=>{var r={statusCode:t.status,text:i};if(200===t.status)try{r.json=JSON.parse(i)}catch(e){ta.error(e)}null==e.callback||e.callback(r)})).catch(t=>{ta.error(t),null==e.callback||e.callback({statusCode:0,text:t})}).finally(()=>l?clearTimeout(l.timeout):null)}}),c&&nt.push({transport:"XHR",method:e=>{var t,i=new c;i.open(e.method||"GET",e.url,!0);var{contentType:r,body:n}=null!=(t=ne(e))?t:{};tf(e.headers,function(e,t){i.setRequestHeader(t,e)}),r&&i.setRequestHeader("Content-Type",r),e.timeout&&(i.timeout=e.timeout),e.disableXHRCredentials||(i.withCredentials=!0),i.onreadystatechange=()=>{if(4===i.readyState){var t={statusCode:i.status,text:i.responseText};if(200===i.status)try{t.json=JSON.parse(i.responseText)}catch(e){}null==e.callback||e.callback(t)}},i.send(n)}}),null!=a&&a.sendBeacon&&nt.push({transport:"sendBeacon",method:e=>{var t=r7(e.url,{beacon:"1"});try{var i,{contentType:r,body:n}=null!=(i=ne(e))?i:{},s="string"==typeof n?new Blob([n],{type:r}):n;a.sendBeacon(t,s)}catch(e){}}});var ni=function(e,t){if(!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(e){return!1}};function nr(e,t,i){return r9({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:i})}var nn={exact:(e,t)=>t.some(t=>e.some(e=>t===e)),is_not:(e,t)=>t.every(t=>e.every(e=>t!==e)),regex:(e,t)=>t.some(t=>e.some(e=>ni(t,e))),not_regex:(e,t)=>t.every(t=>e.every(e=>!ni(t,e))),icontains:(e,t)=>t.map(ns).some(t=>e.map(ns).some(e=>t.includes(e))),not_icontains:(e,t)=>t.map(ns).every(t=>e.map(ns).every(e=>!t.includes(e))),gt:(e,t)=>t.some(t=>{var i=parseFloat(t);return!isNaN(i)&&e.some(e=>i>parseFloat(e))}),lt:(e,t)=>t.some(t=>{var i=parseFloat(t);return!isNaN(i)&&e.some(e=>i<parseFloat(e))})},ns=e=>e.toLowerCase();function no(e,t){return!e||Object.entries(e).every(e=>{var[i,r]=e,n=null==t?void 0:t[i];if(M(n)||F(n))return!1;var s=[String(n)],o=nn[r.operator];return!!o&&o(r.values,s)})}var na=tl("[Error tracking]");class nl{constructor(e){var t,i;this.Zt=[],this.ti=new eK([new e5,new ts,new e8,new e4,new tr,new ti,new e9,new tn],function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return function(t,r){void 0===r&&(r=0);for(var n=[],s=t.split("\n"),o=r;o<s.length;o++){var a=s[o];if(!(a.length>1024)){var l=e6.test(a)?a.replace(e6,"$1"):a;if(!l.match(/\S*Error: /)){for(var u of i){var h=u(l,e);if(h){n.push(h);break}}if(n.length>=50)break}}}if(!n.length)return[];var c=Array.from(n);return c.reverse(),c.slice(0,50).map(e=>_({},e,{filename:e.filename||(c[c.length-1]||{}).filename,function:e.function||"?"}))}}("web:javascript",e0,e3)),this._instance=e,this.Zt=null!=(t=null==(i=this._instance.persistence)?void 0:i.get_property(tA))?t:[]}onRemoteConfig(e){var t,i,r,n=null!=(t=null==(i=e.errorTracking)?void 0:i.suppressionRules)?t:[],s=null==(r=e.errorTracking)?void 0:r.captureExtensionExceptions;this.Zt=n,this._instance.persistence&&this._instance.persistence.register({[tA]:this.Zt,[tP]:s})}get ii(){var e,t=!!this._instance.get_property(tP),i=this._instance.config.error_tracking.captureExtensionExceptions;return null!=(e=null!=i?i:t)&&e}buildProperties(e,t){return this.ti.buildFromUnknown(e,{syntheticException:null==t?void 0:t.syntheticException,mechanism:{handled:null==t?void 0:t.handled}})}sendExceptionEvent(e){var t=e.$exception_list;if(this.ei(t)){if(this.ri(t))return void na.info("Skipping exception capture because a suppression rule matched");if(!this.ii&&this.si(t))return void na.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ni(t))return void na.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}ri(e){if(0===e.length)return!1;var t=e.reduce((e,t)=>{var{type:i,value:r}=t;return N(i)&&i.length>0&&e.$exception_types.push(i),N(r)&&r.length>0&&e.$exception_values.push(r),e},{$exception_types:[],$exception_values:[]});return this.Zt.some(e=>{var i=e.values.map(e=>{var i,r=nn[e.operator],n=P(e.value)?e.value:[e.value],s=null!=(i=t[e.key])?i:[];return n.length>0&&r(n,s)});return"OR"===e.type?i.some(Boolean):i.every(Boolean)})}si(e){return e.flatMap(e=>{var t,i;return null!=(t=null==(i=e.stacktrace)?void 0:i.frames)?t:[]}).some(e=>e.filename&&e.filename.startsWith("chrome-extension://"))}ni(e){if(e.length>0){var t,i,r,n,s=null!=(t=null==(i=e[0].stacktrace)?void 0:i.frames)?t:[],o=s[s.length-1];return null!=(r=null==o||null==(n=o.filename)?void 0:n.includes("posthog.com/static"))&&r}return!1}ei(e){return!$(e)&&P(e)}}var nu=tl("[FeatureFlags]"),nh=tl("[FeatureFlags]",{debugEnabled:!0}),nc="$active_feature_flags",nd="$override_feature_flags",nf="$feature_flag_payloads",np="$override_feature_flag_payloads",ng="$feature_flag_request_id",nv="$feature_flag_evaluated_at",nm=e=>{var t={};for(var[i,r]of tv(e||{}))r&&(t[i]=r);return t},n_=((sb={}).FeatureFlags="feature_flags",sb.Recordings="recordings",sb);class ny{constructor(e){this.oi=!1,this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this._instance=e,this.featureFlagEventHandlers=[]}ci(){var e=this._instance.config.evaluation_environments;return null!=e&&e.length?e.filter(e=>{var t=e&&"string"==typeof e&&e.trim().length>0;return t||nu.error("Invalid evaluation environment found:",e,"Expected non-empty string"),t}):[]}fi(){return this.ci().length>0}flags(){if(this._instance.config.__preview_remote_config)this.di=!0;else{var e=!this.pi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.gi({disableFlags:e})}}get hasLoadedFlags(){return this.ai}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(tU),t=this._instance.get_property(nd),i=this._instance.get_property(np);if(!i&&!t)return e||{};var r=tp({},e||{});for(var n of[...new Set([...Object.keys(i||{}),...Object.keys(t||{})])]){var s,o,a=r[n],l=null==t?void 0:t[n],u=M(l)?null!=(s=null==a?void 0:a.enabled)&&s:!!l,h=M(l)?a.variant:"string"==typeof l?l:void 0,c=null==i?void 0:i[n],d=_({},a,{enabled:u,variant:u?null!=h?h:null==a?void 0:a.variant:void 0});u!==(null==a?void 0:a.enabled)&&(d.original_enabled=null==a?void 0:a.enabled),h!==(null==a?void 0:a.variant)&&(d.original_variant=null==a?void 0:a.variant),c&&(d.metadata=_({},null==a?void 0:a.metadata,{payload:c,original_payload:null==a||null==(o=a.metadata)?void 0:o.payload})),r[n]=d}return this.oi||(nu.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.oi=!0),r}getFlagVariants(){var e=this._instance.get_property(t$),t=this._instance.get_property(nd);if(!t)return e||{};for(var i=tp({},e),r=Object.keys(t),n=0;n<r.length;n++)i[r[n]]=t[r[n]];return this.oi||(nu.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:i}),this.oi=!0),i}getFlagPayloads(){var e=this._instance.get_property(nf),t=this._instance.get_property(np);if(!t)return e||{};for(var i=tp({},e||{}),r=Object.keys(t),n=0;n<r.length;n++)i[r[n]]=t[r[n]];return this.oi||(nu.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:i}),this.oi=!0),i}reloadFeatureFlags(){this.ui||this._instance.config.advanced_disable_feature_flags||this.pi||(this.pi=setTimeout(()=>{this.gi()},5))}mi(){clearTimeout(this.pi),this.pi=void 0}ensureFlagsLoaded(){this.ai||this.li||this.pi||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.ui=e}gi(e){var t;if(this.mi(),!this._instance.O())if(this.li)this.hi=!0;else{var i=this._instance.config.token,r=this._instance.get_property("$device_id"),n={token:i,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:_({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(tj)||{}),group_properties:this._instance.get_property(tB)};F(r)||M(r)||(n.$device_id=r),(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(n.disable_flags=!0),this.fi()&&(n.evaluation_environments=this.ci());var s=this._instance.config.__preview_remote_config,o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("flags",(s?"/flags/?v=2":"/flags/?v=2&config=true")+o);s&&(n.timezone=ry()),this.li=!0,this._instance._send_request({method:"POST",url:a,data:n,compression:this._instance.config.disable_compression?void 0:rI.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:e=>{var t,i,r,s=!0;200===e.statusCode&&(this.hi||(this.$anon_distinct_id=void 0),s=!1),this.li=!1,this.di||(this.di=!0,this._instance.yi(null!=(r=e.json)?r:{})),(!n.disable_flags||this.hi)&&((this.vi=!s,e.json&&null!=(i=e.json.quotaLimited)&&i.includes(n_.FeatureFlags))?nu.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(n.disable_flags||this.receivedFeatureFlags(null!=(t=e.json)?t:{},s),this.hi&&(this.hi=!1,this.gi())))}})}}getFeatureFlag(e,t){if(void 0===t&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,n=this._instance.get_property(ng)||void 0,s=this._instance.get_property(nv)||void 0,o=this._instance.get_property(tH)||{};if((t.send_event||!("send_event"in t))&&(!(e in o)||!o[e].includes(r))){P(o[e])?o[e].push(r):o[e]=[r],null==(u=this._instance.persistence)||u.register({[tH]:o});var a=this.getFeatureFlagDetails(e),l={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:n,$feature_flag_evaluated_at:s,$feature_flag_bootstrapped_response:(null==(h=this._instance.config.bootstrap)||null==(h=h.featureFlags)?void 0:h[e])||null,$feature_flag_bootstrapped_payload:(null==(c=this._instance.config.bootstrap)||null==(c=c.featureFlagPayloads)?void 0:c[e])||null,$used_bootstrap_value:!this.vi};M(null==a||null==(d=a.metadata)?void 0:d.version)||(l.$feature_flag_version=a.metadata.version);var u,h,c,d,f,p,g,v,m,_,y=null!=(f=null==a||null==(p=a.reason)?void 0:p.description)?f:null==a||null==(g=a.reason)?void 0:g.code;y&&(l.$feature_flag_reason=y),null!=a&&null!=(v=a.metadata)&&v.id&&(l.$feature_flag_id=a.metadata.id),M(null==a?void 0:a.original_variant)&&M(null==a?void 0:a.original_enabled)||(l.$feature_flag_original_response=M(a.original_variant)?a.original_enabled:a.original_variant),null!=a&&null!=(m=a.metadata)&&m.original_payload&&(l.$feature_flag_original_payload=null==a||null==(_=a.metadata)?void 0:_.original_payload),this._instance.capture("$feature_flag_called",l)}return i}nu.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var i=this._instance.config.token,r={distinct_id:this._instance.get_distinct_id(),token:i};this.fi()&&(r.evaluation_environments=this.ci()),this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:r,compression:this._instance.config.disable_compression?void 0:rI.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var r,n=null==(r=i.json)?void 0:r.featureFlagPayloads;t((null==n?void 0:n[e])||void 0)}})}isFeatureEnabled(e,t){if(void 0===t&&(t={}),this.ai||this.getFlags()&&this.getFlags().length>0){var i=this.getFeatureFlag(e,t);return M(i)?void 0:!!i}nu.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this.ai=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),n=this.getFlagsWithDetails();!function(e,t,i,r,n){void 0===i&&(i={}),void 0===r&&(r={}),void 0===n&&(n={});var s,o=((s=e.flags)?(e.featureFlags=Object.fromEntries(Object.keys(s).map(e=>{var t;return[e,null!=(t=s[e].variant)?t:s[e].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(s).filter(e=>s[e].enabled).filter(e=>{var t;return null==(t=s[e].metadata)?void 0:t.payload}).map(e=>{var t;return[e,null==(t=s[e].metadata)?void 0:t.payload]}))):nu.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e),a=o.flags,l=o.featureFlags,u=o.featureFlagPayloads;if(l){var h=e.requestId,c=e.evaluatedAt;if(P(l)){nu.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var d={};if(l)for(var f=0;f<l.length;f++)d[l[f]]=!0;t&&t.register({[nc]:l,[t$]:d})}else{var p=l,g=u,v=a;e.errorsWhileComputingFlags&&(p=_({},i,p),g=_({},r,g),v=_({},n,v)),t&&t.register(_({[nc]:Object.keys(nm(p)),[t$]:p||{},[nf]:g||{},[tU]:v||{}},h?{[ng]:h}:{},c?{[nv]:c}:{}))}}}(e,this._instance.persistence,i,r,n),this.bi(t)}}override(e,t){void 0===t&&(t=!1),nu.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return nu.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(nd),this._instance.persistence.unregister(np),this.bi(),nh.info("All overrides cleared");if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t;if(this.oi=!!(null!=(t=e.suppressWarning)&&t),"flags"in e){if(!1===e.flags)this._instance.persistence.unregister(nd),nh.info("Flag overrides cleared");else if(e.flags){if(P(e.flags)){for(var i={},r=0;r<e.flags.length;r++)i[e.flags[r]]=!0;this._instance.persistence.register({[nd]:i})}else this._instance.persistence.register({[nd]:e.flags});nh.info("Flag overrides set",{flags:e.flags})}}return"payloads"in e&&(!1===e.payloads?(this._instance.persistence.unregister(np),nh.info("Payload overrides cleared")):e.payloads&&(this._instance.persistence.register({[np]:e.payloads}),nh.info("Payload overrides set",{payloads:e.payloads}))),void this.bi()}this.bi()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this.ai){var{flags:t,flagVariants:i}=this.wi();e(t,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,i){var r,n=(this._instance.get_property(tV)||[]).find(t=>t.flagKey===e),s={["$feature_enrollment/"+e]:t},o={$feature_flag:e,$feature_enrollment:t,$set:s};n&&(o.$early_access_feature_name=n.name),i&&(o.$feature_enrollment_stage=i),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=_({},this.getFlagVariants(),{[e]:t});null==(r=this._instance.persistence)||r.register({[nc]:Object.keys(nm(a)),[t$]:a}),this.bi()}getEarlyAccessFeatures(e,t,i){void 0===t&&(t=!1);var r=this._instance.get_property(tV),n=i?"&"+i.map(e=>"stage="+e).join("&"):"";if(r&&!t)return e(r);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+n),method:"GET",callback:t=>{var i,r;if(t.json){var n=t.json.earlyAccessFeatures;return null==(i=this._instance.persistence)||i.unregister(tV),null==(r=this._instance.persistence)||r.register({[tV]:n}),e(n)}}})}wi(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(e=>t[e]),flagVariants:Object.keys(t).filter(e=>t[e]).reduce((e,i)=>(e[i]=t[i],e),{})}}bi(e){var{flags:t,flagVariants:i}=this.wi();this.featureFlagEventHandlers.forEach(r=>r(t,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0);var i=this._instance.get_property(tj)||{};this._instance.register({[tj]:_({},i,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(tj)}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0);var i=this._instance.get_property(tB)||{};0!==Object.keys(i).length&&Object.keys(i).forEach(t=>{i[t]=_({},i[t],e[t]),delete e[t]}),this._instance.register({[tB]:_({},i,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(tB)||{};this._instance.register({[tB]:_({},t,{[e]:{}})})}else this._instance.unregister(tB)}reset(){this.ai=!1,this.li=!1,this.ui=!1,this.hi=!1,this.di=!1,this.vi=!1,this.$anon_distinct_id=void 0,this.mi(),this.oi=!1}}var nb=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class nw{constructor(e,t){this.R=e,this.props={},this.xi=!1,this.Ei=(e=>{var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"})(e),this.Y=this.$i(e),this.load(),e.debug&&ta.info("Persistence loaded",e.persistence,_({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this.Si}$i(e){-1===nb.indexOf(e.persistence.toLowerCase())&&(ta.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t,r,n=(void 0===(t=e.cookie_persisted_properties||[])&&(t=[]),r=[...iz,...t],_({},iH,{W:function(e){try{var t={};try{t=iB.W(e)||{}}catch(e){}var i=tp(t,JSON.parse(iH.q(e)||"{}"));return iH.G(e,i),i}catch(e){}return null},G:function(e,t,i,n,s,o){try{iH.G(e,t,void 0,void 0,o);var a={};r.forEach(e=>{t[e]&&(a[e]=t[e])}),Object.keys(a).length&&iB.G(e,a,i,n,s,o)}catch(e){iH.B(e)}},V:function(e,t){try{null==i||i.localStorage.removeItem(e),iB.V(e,t)}catch(e){iH.B(e)}}})),s=e.persistence.toLowerCase();return"localstorage"===s&&iH.H()?iH:"localstorage+cookie"===s&&n.H()?n:"sessionstorage"===s&&iY.H()?iY:"memory"===s?iW:"cookie"===s?iB:n.H()?n:iB}properties(){var e={};return tf(this.props,function(t,i){if(i===t$&&D(t))for(var r,n=Object.keys(t),s=0;s<n.length;s++)e["$feature/"+n[s]]=t[n[s]];else r=!1,(F(t0)?r:o&&t0.indexOf===o?-1!=t0.indexOf(i):(tf(t0,function(e){if(r||(r=e===i))return tc}),r))||(e[i]=t)}),e}load(){if(!this.Si){var e=this.Y.W(this.Ei);e&&(this.props=tp({},e))}}save(){this.Si||this.Y.G(this.Ei,this.props,this.ki,this.Pi,this.Ti,this.R.debug)}remove(){this.Y.V(this.Ei,!1),this.Y.V(this.Ei,!0)}clear(){this.remove(),this.props={}}register_once(e,t,i){if(D(e)){M(t)&&(t="None"),this.ki=M(i)?this.Ii:i;var r=!1;if(tf(e,(e,i)=>{this.props.hasOwnProperty(i)&&this.props[i]!==t||(this.props[i]=e,r=!0)}),r)return this.save(),!0}return!1}register(e,t){if(D(e)){this.ki=M(t)?this.Ii:t;var i=!1;if(tf(e,(t,r)=>{e.hasOwnProperty(r)&&this.props[r]!==t&&(this.props[r]=t,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.xi){var e=rd(this.R.custom_campaign_params,this.R.mask_personal_data_properties,this.R.custom_personal_data_properties);O(ty(e))||this.register(e),this.xi=!0}}update_search_keyword(){var e;this.register((e=null==l?void 0:l.referrer)?rp(e):{})}update_referrer_info(){var e;this.register_once({$referrer:rv(),$referring_domain:null!=l&&l.referrer&&(null==(e=iS(l.referrer))?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[tK]||this.props[tY]||this.register_once({[tX]:rm(this.R.mask_personal_data_properties,this.R.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};tf([tY,tK],t=>{var i=this.props[t];i&&tf(i,function(t,i){e["$initial_"+T(i)]=t})});var t,i,r=this.props[tX];return r&&tp(e,(t=r_(r),i={},tf(t,function(e,t){i["$initial_"+T(t)]=e}),i)),e}safe_merge(e){return tf(this.props,function(t,i){i in e||(e[i]=t)}),e}update_config(e,t,i){if(this.Ii=this.ki=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!i),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence||!((e,t)=>{if(e.length!==t.length)return!1;var i=[...e].sort(),r=[...t].sort();return i.every((e,t)=>e===r[t])})(e.cookie_persisted_properties||[],t.cookie_persisted_properties||[])){var r=this.$i(e),n=this.props;this.clear(),this.Y=r,this.props=n,this.save()}}set_disabled(e){this.Si=e,this.Si?this.remove():this.save()}set_cross_subdomain(e){e!==this.Pi&&(this.Pi=e,this.remove(),this.save())}set_secure(e){e!==this.Ti&&(this.Ti=e,this.remove(),this.save())}set_event_timer(e,t){var i=this.props[tT]||{};i[e]=t,this.props[tT]=i,this.save()}remove_event_timer(e){var t=(this.props[tT]||{})[e];return M(t)||(delete this.props[tT][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}var nE=tl("[Product Tours]"),nS="ph_product_tours";class nx{constructor(e){this.Ci=null,this.Ri=null,this._instance=e}onRemoteConfig(e){this._instance.persistence&&this._instance.persistence.register({[tO]:!(null==e||!e.productTours)}),this.loadIfEnabled()}loadIfEnabled(){var e,t;this.Ci||(e=this._instance).config.disable_product_tours||null==(t=e.persistence)||!t.get_property(tO)||this.it(()=>this.Fi())}it(e){var t,i;null!=(t=p.__PosthogExtensions__)&&t.generateProductTours?e():null==(i=p.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"product-tours",t=>{t?nE.error("Could not load product tours script",t):e()})}Fi(){var e;!this.Ci&&null!=(e=p.__PosthogExtensions__)&&e.generateProductTours&&(this.Ci=p.__PosthogExtensions__.generateProductTours(this._instance,!0))}getProductTours(e,t){if(void 0===t&&(t=!1),!P(this.Ri)||t){var i=this._instance.persistence;if(i){var r=i.props[nS];if(P(r)&&!t)return this.Ri=r,void e(r,{isLoaded:!0})}this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/product_tours/?token="+this._instance.config.token),method:"GET",callback:t=>{var r=t.statusCode;if(200!==r||!t.json){var n="Product Tours API could not be loaded, status: "+r;return nE.error(n),void e([],{isLoaded:!1,error:n})}var s=P(t.json.product_tours)?t.json.product_tours:[];this.Ri=s,i&&i.register({[nS]:s}),e(s,{isLoaded:!0})}})}else e(this.Ri,{isLoaded:!0})}getActiveProductTours(e){$(this.Ci)?e([],{isLoaded:!1,error:"Product tours not loaded"}):this.Ci.getActiveProductTours(e)}showProductTour(e){var t;null==(t=this.Ci)||t.showTourById(e)}previewTour(e){this.Ci?this.Ci.previewTour(e):this.it(()=>{var t;this.Fi(),null==(t=this.Ci)||t.previewTour(e)})}dismissProductTour(){var e;null==(e=this.Ci)||e.dismissTour("user_clicked_skip")}nextStep(){var e;null==(e=this.Ci)||e.nextStep()}previousStep(){var e;null==(e=this.Ci)||e.previousStep()}clearCache(){var e;this.Ri=null,null==(e=this._instance.persistence)||e.unregister(nS)}resetTour(e){var t;null==(t=this.Ci)||t.resetTour(e)}resetAllTours(){var e;null==(e=this.Ci)||e.resetAllTours()}cancelPendingTour(e){var t;null==(t=this.Ci)||t.cancelPendingTour(e)}}var nT=((sw={}).Activation="events",sw.Cancellation="cancelEvents",sw),nI=((sE={}).Button="button",sE.Tab="tab",sE.Selector="selector",(sS={}).TopLeft="top_left",sS.TopRight="top_right",sS.TopCenter="top_center",sS.MiddleLeft="middle_left",sS.MiddleRight="middle_right",sS.MiddleCenter="middle_center",sS.Left="left",sS.Center="center",sS.Right="right",sS.NextToTrigger="next_to_trigger",(sx={}).Top="top",sx.Left="left",sx.Right="right",sx.Bottom="bottom",(sT={}).Popover="popover",sT.API="api",sT.Widget="widget",sT.ExternalSurvey="external_survey",sT),nk=((sI={}).Open="open",sI.MultipleChoice="multiple_choice",sI.SingleChoice="single_choice",sI.Rating="rating",sI.Link="link",(sk={}).NextQuestion="next_question",sk.End="end",sk.ResponseBased="response_based",sk.SpecificQuestion="specific_question",(sC={}).Once="once",sC.Recurring="recurring",sC.Always="always",(sA={}).SHOWN="survey shown",sA.DISMISSED="survey dismissed",sA.SENT="survey sent",sA.ABANDONED="survey abandoned",sA),nC=((sP={}).SURVEY_ID="$survey_id",sP.SURVEY_NAME="$survey_name",sP.SURVEY_RESPONSE="$survey_response",sP.SURVEY_ITERATION="$survey_iteration",sP.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",sP.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",sP.SURVEY_SUBMISSION_ID="$survey_submission_id",sP.SURVEY_QUESTIONS="$survey_questions",sP.SURVEY_COMPLETED="$survey_completed",sP.PRODUCT_TOUR_ID="$product_tour_id",sP.SURVEY_LAST_SEEN_DATE="$survey_last_seen_date",sP),nA=((sR={}).Popover="popover",sR.Inline="inline",sR),nP=tl("[Surveys]"),nR="seenSurvey_",nD=e=>{var t;return t=""+nR+e.id,e.current_iteration&&e.current_iteration>0&&(t=""+nR+e.id+"_"+e.current_iteration),t},nO=[nI.Popover,nI.Widget,nI.API],nM={ignoreConditions:!1,ignoreDelay:!1,displayType:nA.Popover};class nN{constructor(){this.Mi={},this.Mi={}}on(e,t){return this.Mi[e]||(this.Mi[e]=[]),this.Mi[e].push(t),()=>{this.Mi[e]=this.Mi[e].filter(e=>e!==t)}}emit(e,t){for(var i of this.Mi[e]||[])i(t);for(var r of this.Mi["*"]||[])r(e,t)}}function nL(e,t,i){if($(e))return!1;switch(i){case"exact":return e===t;case"contains":return RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/_/g,".").replace(/%/g,".*"),"i").test(e);case"regex":try{return new RegExp(t).test(e)}catch(e){return!1}default:return!1}}class nF{constructor(e){this.Oi=new nN,this.Ai=(e,t)=>this.Di(e,t)&&this.ji(e,t)&&this.Li(e,t)&&this.Ni(e,t),this.Di=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event),this._instance=e,this.Ui=new Set,this.zi=new Set}init(){var e,t;M(null==(e=this._instance)?void 0:e.Hi)||null==(t=this._instance)||t.Hi((e,t)=>{this.on(e,t)})}register(e){var t,i;if(!M(null==(t=this._instance)?void 0:t.Hi)&&(e.forEach(e=>{var t,i;null==(t=this.zi)||t.add(e),null==(i=e.steps)||i.forEach(e=>{var t;null==(t=this.Ui)||t.add((null==e?void 0:e.event)||"")})}),null!=(i=this._instance)&&i.autocapture)){var r,n=new Set;e.forEach(e=>{var t;null==(t=e.steps)||t.forEach(e=>{null!=e&&e.selector&&n.add(null==e?void 0:e.selector)})}),null==(r=this._instance)||r.autocapture.setElementSelectors(n)}}on(e,t){var i;null!=t&&0!=e.length&&(this.Ui.has(e)||this.Ui.has(null==t?void 0:t.event))&&this.zi&&(null==(i=this.zi)?void 0:i.size)>0&&this.zi.forEach(e=>{this.Bi(t,e)&&this.Oi.emit("actionCaptured",e.name)})}qi(e){this.onAction("actionCaptured",t=>e(t))}Bi(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var i of t.steps)if(this.Ai(e,i))return!0;return!1}onAction(e,t){return this.Oi.on(e,t)}ji(e,t){if(null!=t&&t.url){var i,r=null==e||null==(i=e.properties)?void 0:i.$current_url;if(!r||"string"!=typeof r||!nL(r,t.url,t.url_matching||"contains"))return!1}return!0}Li(e,t){return!!this.Wi(e,t)&&!!this.Gi(e,t)&&!!this.Vi(e,t)}Wi(e,t){if(null==t||!t.href)return!0;var i=this.Ji(e);if(i.length>0)return i.some(e=>nL(e.href,t.href,t.href_matching||"exact"));var r,n,s=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";return!!s&&nL((n=s.match(/(?::|")href="(.*?)"/))?n[1]:"",t.href,t.href_matching||"exact")}Gi(e,t){if(null==t||!t.text)return!0;var i=this.Ji(e);if(i.length>0)return i.some(e=>nL(e.text,t.text,t.text_matching||"exact")||nL(e.$el_text,t.text,t.text_matching||"exact"));var r,n,s,o,a=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";return!!a&&(n=function(e){for(var t,i=[],r=/(?::|")text="(.*?)"/g;!$(t=r.exec(e));)i.includes(t[1])||i.push(t[1]);return i}(a),s=t.text,o=t.text_matching||"exact",n.some(e=>nL(e,s,o)))}Vi(e,t){if(null==t||!t.selector)return!0;var i,r,n=null==e||null==(i=e.properties)?void 0:i.$element_selectors;if(null!=n&&n.includes(t.selector))return!0;var s=(null==e||null==(r=e.properties)?void 0:r.$elements_chain)||"";if(t.selector_regex&&s)try{return new RegExp(t.selector_regex).test(s)}catch(e){}return!1}Ji(e){var t;return null==(null==e||null==(t=e.properties)?void 0:t.$elements)?[]:null==e?void 0:e.properties.$elements}Ni(e,t){return null==t||!t.properties||0===t.properties.length||no(t.properties.reduce((e,t)=>{var i=P(t.value)?t.value.map(String):null!=t.value?[String(t.value)]:[];return e[t.key]={values:i,operator:t.operator||"exact"},e},{}),null==e?void 0:e.properties)}}class n${constructor(e){this._instance=e,this.Ki=new Map,this.Yi=new Map,this.Xi=new Map}Qi(e,t){return!!e&&no(e.propertyFilters,null==t?void 0:t.properties)}Zi(e,t){var i=new Map;return e.forEach(e=>{var r;null==(r=e.conditions)||null==(r=r[t])||null==(r=r.values)||r.forEach(t=>{if(null!=t&&t.name){var r=i.get(t.name)||[];r.push(e.id),i.set(t.name,r)}})}),i}te(e,t,i){var r=(i===nT.Activation?this.Ki:this.Yi).get(e),n=[];return this.ie(e=>{n=e.filter(e=>null==r?void 0:r.includes(e.id))}),n.filter(r=>{var n,s=null==(n=r.conditions)||null==(n=n[i])||null==(n=n.values)?void 0:n.find(t=>t.name===e);return this.Qi(s,t)})}register(e){var t;M(null==(t=this._instance)?void 0:t.Hi)||(this.ee(e),this.re(e))}re(e){var t=e.filter(e=>{var t,i;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(i=e.conditions)||null==(i=i.actions)||null==(i=i.values)?void 0:i.length)>0});0!==t.length&&(null==this.se&&(this.se=new nF(this._instance),this.se.init(),this.se.qi(e=>{this.onAction(e)})),t.forEach(e=>{var t,i,r,n,s;e.conditions&&null!=(t=e.conditions)&&t.actions&&null!=(i=e.conditions)&&null!=(i=i.actions)&&i.values&&(null==(r=e.conditions)||null==(r=r.actions)||null==(r=r.values)?void 0:r.length)>0&&(null==(n=this.se)||n.register(e.conditions.actions.values),null==(s=e.conditions)||null==(s=s.actions)||null==(s=s.values)||s.forEach(t=>{if(t&&t.name){var i=this.Xi.get(t.name);i&&i.push(e.id),this.Xi.set(t.name,i||[e.id])}}))}))}ee(e){var t,i=e.filter(e=>{var t,i;return(null==(t=e.conditions)?void 0:t.events)&&(null==(i=e.conditions)||null==(i=i.events)||null==(i=i.values)?void 0:i.length)>0}),r=e.filter(e=>{var t,i;return(null==(t=e.conditions)?void 0:t.cancelEvents)&&(null==(i=e.conditions)||null==(i=i.cancelEvents)||null==(i=i.values)?void 0:i.length)>0});(0!==i.length||0!==r.length)&&(null==(t=this._instance)||t.Hi((e,t)=>{this.onEvent(e,t)}),this.Ki=this.Zi(e,nT.Activation),this.Yi=this.Zi(e,nT.Cancellation))}onEvent(e,t){var i,r=this.ne(),n=this.oe(),s=this.ae(),o=(null==(i=this._instance)||null==(i=i.persistence)?void 0:i.props[n])||[];if(s===e&&t&&o.length>0){r.info("event matched, removing item from activated items",{event:e,eventPayload:t,existingActivatedItems:o});var a,l,u=(null==t||null==(a=t.properties)?void 0:a.$survey_id)||(null==t||null==(l=t.properties)?void 0:l.$product_tour_id);if(u){var h=o.indexOf(u);h>=0&&(o.splice(h,1),this.le(o))}}else{if(this.Yi.has(e)){var c=this.te(e,t,nT.Cancellation);c.length>0&&(r.info("cancel event matched, cancelling items",{event:e,itemsToCancel:c.map(e=>e.id)}),c.forEach(e=>{var t=o.indexOf(e.id);t>=0&&o.splice(t,1),this.ue(e.id)}),this.le(o))}if(this.Ki.has(e)){r.info("event name matched",{event:e,eventPayload:t,items:this.Ki.get(e)});var d=this.te(e,t,nT.Activation);this.le(o.concat(d.map(e=>e.id)||[]))}}}onAction(e){var t,i=this.oe(),r=(null==(t=this._instance)||null==(t=t.persistence)?void 0:t.props[i])||[];this.Xi.has(e)&&this.le(r.concat(this.Xi.get(e)||[]))}le(e){var t,i=this.ne(),r=this.oe(),n=[...new Set(e)].filter(e=>!this.he(e));i.info("updating activated items",{activatedItems:n}),null==(t=this._instance)||null==(t=t.persistence)||t.register({[r]:n})}getActivatedIds(){var e,t=this.oe();return(null==(e=this._instance)||null==(e=e.persistence)?void 0:e.props[t])||[]}getEventToItemsMap(){return this.Ki}de(){return this.se}}class nV extends n${constructor(e){super(e)}oe(){return"$surveys_activated"}ae(){return nk.SHOWN}ie(e){var t;null==(t=this._instance)||t.getSurveys(e)}ue(e){var t;null==(t=this._instance)||t.cancelPendingSurvey(e)}ne(){return nP}he(){return!1}getSurveys(){return this.getActivatedIds()}getEventToSurveys(){return this.getEventToItemsMap()}}class nU{constructor(e){this.ve=void 0,this._surveyManager=null,this.ce=!1,this.fe=[],this.pe=null,this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if($(t))return nP.warn("Flags not loaded yet. Not loading surveys.");var i=P(t);this.ve=i?t.length>0:t,nP.info("flags response received, isSurveysEnabled: "+this.ve),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var i=localStorage.key(t);(null!=i&&i.startsWith(nR)||null!=i&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(e=>localStorage.removeItem(e))}loadIfEnabled(){if(!this._surveyManager)if(this.ce)nP.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)nP.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())nP.info("Not loading surveys in cookieless mode without consent.");else{var e=null==p?void 0:p.__PosthogExtensions__;if(e){if(!M(this.ve)||this._instance.config.advanced_enable_surveys){var t=this.ve||this._instance.config.advanced_enable_surveys;this.ce=!0;try{var i=e.generateSurveys;if(i)return void this.ge(i,t);var r=e.loadExternalDependency;if(!r)return void this._e("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",i=>{i||!e.generateSurveys?this._e("Could not load surveys script",i):this.ge(e.generateSurveys,t)})}catch(e){throw this._e("Error initializing surveys",e),e}finally{this.ce=!1}}}else nP.error("PostHog Extensions not found.")}}ge(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new nV(this._instance),nP.info("Surveys loaded successfully"),this.me({isLoaded:!0})}_e(e,t){nP.error(e,t),this.me({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.fe.push(e),this._surveyManager&&this.me({isLoaded:!0}),()=>{this.fe=this.fe.filter(t=>t!==e)}}getSurveys(e,t){if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return nP.info("Disabled. Not loading surveys."),e([]);var i,r=this._instance.get_property(tq);if(r&&!t)return e(r,{isLoaded:!0});"undefined"!=typeof Promise&&this.pe?this.pe.then(t=>{var{surveys:i,context:r}=t;return e(i,r)}):("undefined"!=typeof Promise&&(this.pe=new Promise(e=>{i=e})),this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:t=>{this.pe=null;var r=t.statusCode;if(200!==r||!t.json){var n="Surveys API could not be loaded, status: "+r;nP.error(n);var s={isLoaded:!1,error:n};return e([],s),void(null==i||i({surveys:[],context:s}))}var o,a,l=t.json.surveys||[],u=l.filter(e=>{var t,i;return!(!e.start_date||e.end_date)&&(!(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||!t.length)||!(null==(i=e.conditions)||null==(i=i.actions)||null==(i=i.values)||!i.length))});u.length>0&&(null==(a=this._surveyEventReceiver)||a.register(u)),null==(o=this._instance.persistence)||o.register({[tq]:l});var h={isLoaded:!0};e(l,h),null==i||i({surveys:l,context:h})}}))}me(e){for(var t of this.fe)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(e){nP.error("Error in survey callback",e)}}getActiveMatchingSurveys(e,t){if(void 0===t&&(t=!1),!$(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);nP.warn("init was not called")}ye(e){var t=null;return this.getSurveys(i=>{var r;t=null!=(r=i.find(t=>t.id===e))?r:null}),t}be(e){if($(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this.ye(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if($(this._surveyManager))return nP.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this.be(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return $(this._surveyManager)?(nP.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(t=>{var r,n=null!=(r=t.find(t=>t.id===e))?r:null;if(n){var s=this.be(n);i({visible:s.eligible,disabledReason:s.reason})}else i({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t,i){var r;if($(this._surveyManager))nP.warn("init was not called");else{var n="string"==typeof e?this.ye(e):e;if(null!=n&&n.id)if(nO.includes(n.type)){var s=null==l?void 0:l.querySelector(t);if(s)return null!=(r=n.appearance)&&r.surveyPopupDelaySeconds?(nP.info("Rendering survey "+n.id+" with delay of "+n.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var e,t;nP.info("Rendering survey "+n.id+" with delay of "+(null==(e=n.appearance)?void 0:e.surveyPopupDelaySeconds)+" seconds"),null==(t=this._surveyManager)||t.renderSurvey(n,s,i),nP.info("Survey "+n.id+" rendered")},1e3*n.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(n,s,i);nP.warn("Survey element not found")}else nP.warn("Surveys of type "+n.type+" cannot be rendered in the app");else nP.warn("Survey not found")}}displaySurvey(e,t){var i;if($(this._surveyManager))nP.warn("init was not called");else{var r=this.ye(e);if(r){var n=r;if(null!=(i=r.appearance)&&i.surveyPopupDelaySeconds&&t.ignoreDelay&&(n=_({},r,{appearance:_({},r.appearance,{surveyPopupDelaySeconds:0})})),!1===t.ignoreConditions){var s=this.canRenderSurvey(r);if(!s.visible)return void nP.warn("Survey is not eligible to be displayed: ",s.disabledReason)}t.displayType!==nA.Inline?this._surveyManager.handlePopoverSurvey(n,t.properties):this.renderSurvey(n,t.selector,t.properties)}else nP.warn("Survey not found")}}cancelPendingSurvey(e){$(this._surveyManager)?nP.warn("init was not called"):this._surveyManager.cancelSurvey(e)}handlePageUnload(){var e;null==(e=this._surveyManager)||e.handlePageUnload()}}var nj=tl("[Conversations]");class nB{constructor(e){this.we=void 0,this._conversationsManager=null,this.xe=!1,this.Ee=null,this._instance=e}onRemoteConfig(e){if(!this._instance.config.disable_conversations){var t=e.conversations;$(t)||(j(t)?this.we=t:(this.we=t.enabled,this.Ee=t),this.loadIfEnabled())}}reset(){var e;null==(e=this._conversationsManager)||e.reset(),this._conversationsManager=null,this.we=void 0,this.Ee=null}loadIfEnabled(){if(!this._conversationsManager&&!this.xe&&!(this._instance.config.disable_conversations||this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())){var e=null==p?void 0:p.__PosthogExtensions__;if(e&&!M(this.we)&&this.we)if(this.Ee&&this.Ee.token){this.xe=!0;try{var t=e.initConversations;if(t)return this.$e(t),void(this.xe=!1);var i=e.loadExternalDependency;if(!i)return void this.Se("PostHog loadExternalDependency extension not found.");i(this._instance,"conversations",t=>{t||!e.initConversations?this.Se("Could not load conversations script",t):this.$e(e.initConversations),this.xe=!1})}catch(e){this.Se("Error initializing conversations",e),this.xe=!1}}else nj.error("Conversations enabled but missing token in remote config.")}}$e(e){if(this.Ee)try{this._conversationsManager=e(this.Ee,this._instance),nj.info("Conversations loaded successfully")}catch(e){this.Se("Error completing conversations initialization",e)}else nj.error("Cannot complete initialization: remote config is null")}Se(e,t){nj.error(e,t),this._conversationsManager=null,this.xe=!1}show(){this._conversationsManager?this._conversationsManager.show():nj.warn("Conversations not loaded yet.")}hide(){this._conversationsManager&&this._conversationsManager.hide()}isAvailable(){return!0===this.we&&!F(this._conversationsManager)}isVisible(){var e,t;return null!=(e=null==(t=this._conversationsManager)?void 0:t.isVisible())&&e}sendMessage(e,t,i){var r=this;return m(function*(){return r._conversationsManager?r._conversationsManager.sendMessage(e,t,i):(nj.warn("Conversations not available yet."),null)})()}getMessages(e,t){var i=this;return m(function*(){return i._conversationsManager?i._conversationsManager.getMessages(e,t):(nj.warn("Conversations not available yet."),null)})()}markAsRead(e){var t=this;return m(function*(){return t._conversationsManager?t._conversationsManager.markAsRead(e):(nj.warn("Conversations not available yet."),null)})()}getTickets(e){var t=this;return m(function*(){return t._conversationsManager?t._conversationsManager.getTickets(e):(nj.warn("Conversations not available yet."),null)})()}getCurrentTicketId(){var e,t;return null!=(e=null==(t=this._conversationsManager)?void 0:t.getCurrentTicketId())?e:null}getWidgetSessionId(){var e,t;return null!=(e=null==(t=this._conversationsManager)?void 0:t.getWidgetSessionId())?e:null}}class nq{constructor(e){var t;this.ke=!1,this.Pe=!1,this._instance=e,this._instance&&null!=(t=this._instance.config.logs)&&t.captureConsoleLogs&&(this.ke=!0)}onRemoteConfig(e){var t,i=null==(t=e.logs)?void 0:t.captureConsoleLogs;!$(i)&&i&&(this.ke=!0,this.loadIfEnabled())}reset(){}loadIfEnabled(){if(this.ke&&!this.Pe){var e=tl("[logs]"),t=null==p?void 0:p.__PosthogExtensions__;if(t){var i=t.loadExternalDependency;i?i(this._instance,"logs",i=>{var r;i||null==(r=t.logs)||!r.initializeLogs?e.error("Could not load logs script",i):(t.logs.initializeLogs(this._instance),this.Pe=!0)}):e.error("PostHog loadExternalDependency extension not found.")}else e.error("PostHog Extensions not found.")}}}var nH=tl("[RateLimiter]");class nz{constructor(e){var t,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(e=>{nH.info((e||"events")+" is quota limited."),this.serverLimits[e]=(new Date).getTime()+6e4})}catch(e){return void nH.warn('could not rate limit - continuing. Error: "'+(null==e?void 0:e.message)+'"',{text:t})}},this.instance=e,this.captureEventsPerSecond=(null==(t=e.config.rate_limiting)?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(i=e.config.rate_limiting)?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){void 0===e&&(e=!1);var t,i,r,n=(new Date).getTime(),s=null!=(t=null==(i=this.instance.persistence)?void 0:i.get_property(tW))?t:{tokens:this.captureEventsBurstLimit,last:n};s.tokens+=(n-s.last)/1e3*this.captureEventsPerSecond,s.last=n,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var o=s.tokens<1;return o||e||(s.tokens=Math.max(0,s.tokens-1)),!o||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,null==(r=this.instance.persistence)||r.set_property(tW,s),{isRateLimited:o,remainingTokens:s.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var nG=tl("[RemoteConfig]");class nW{constructor(e){this._instance=e}get remoteConfig(){var e;return null==(e=p._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.config}Te(e){var t,i;null!=(t=p.__PosthogExtensions__)&&t.loadExternalDependency?null==(i=p.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(nG.error("PostHog Extensions not found. Cannot load remote config."),e())}Ie(e){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return nG.info("Using preloaded remote config",this.remoteConfig),void this.yi(this.remoteConfig);if(this._instance.O())return void nG.warn("Remote config is disabled. Falling back to local config.");this.Te(e=>{e?this.yi(e):(nG.info("No config found after loading remote JS config. Falling back to JSON."),this.Ie(e=>{this.yi(e)}))})}catch(e){nG.error("Error loading remote config",e)}}yi(e){e?this._instance.config.__preview_remote_config?(this._instance.yi(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):nG.info("__preview_remote_config is disabled. Logging config instead",e):nG.error("Failed to fetch remote config from PostHog.")}}class nK{constructor(e,t){this.Ce=!0,this.Re=[],this.Fe=K((null==t?void 0:t.flush_interval_ms)||3e3,250,5e3,ta.createLogger("flush interval"),3e3),this.Me=e}enqueue(e){this.Re.push(e),this.Oe||this.Ae()}unload(){this.De();var e=Object.values(this.Re.length>0?this.je():{});[...e.filter(e=>0===e.url.indexOf("/e")),...e.filter(e=>0!==e.url.indexOf("/e"))].map(e=>{this.Me(_({},e,{transport:"sendBeacon"}))})}enable(){this.Ce=!1,this.Ae()}Ae(){var e=this;this.Ce||(this.Oe=setTimeout(()=>{if(this.De(),this.Re.length>0){var t=this.je();for(var i in t)!function(){var r=t[i],n=(new Date).getTime();r.data&&P(r.data)&&tf(r.data,e=>{e.offset=Math.abs(e.timestamp-n),delete e.timestamp}),e.Me(r)}()}},this.Fe))}De(){clearTimeout(this.Oe),this.Oe=void 0}je(){var e={};return tf(this.Re,t=>{var i,r=(t?t.batchKey:null)||t.url;M(e[r])&&(e[r]=_({},t,{data:[]})),null==(i=e[r].data)||i.push(t.data)}),this.Re=[],e}}var nY=["retriesPerformedSoFar"];class nX{constructor(e){this.Le=!1,this.Ne=3e3,this.Re=[],this._instance=e,this.Re=[],this.Ue=!0,!M(i)&&"onLine"in i.navigator&&(this.Ue=i.navigator.onLine,this.ze=()=>{this.Ue=!0,this.Lt()},this.He=()=>{this.Ue=!1},tE(i,"online",this.ze),tE(i,"offline",this.He))}get length(){return this.Re.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,i=y(e,nY);U(t)&&(i.url=r7(i.url,{retry_count:t})),this._instance._send_request(_({},i,{callback:e=>{200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.Be(_({retriesPerformedSoFar:t},i)):null==i.callback||i.callback(e)}}))}Be(e){var t,i,r,n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var s=(r=(Math.random()-.5)*((i=Math.min(18e5,t=3e3*Math.pow(2,n)))-t/2),Math.ceil(i+r)),o=Date.now()+s;this.Re.push({retryAt:o,requestOptions:e});var a="Enqueued failed request for retry in "+s;navigator.onLine||(a+=" (Browser is offline)"),ta.warn(a),this.Le||(this.Le=!0,this.qe())}qe(){(this.We&&clearTimeout(this.We),0===this.Re.length)?(this.Le=!1,this.We=void 0):this.We=setTimeout(()=>{this.Ue&&this.Re.length>0&&this.Lt(),this.qe()},this.Ne)}Lt(){var e=Date.now(),t=[],i=this.Re.filter(i=>i.retryAt<e||(t.push(i),!1));if(this.Re=t,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.We&&(clearTimeout(this.We),this.We=void 0),this.Le=!1,M(i)||(this.ze&&(i.removeEventListener("online",this.ze),this.ze=void 0),this.He&&(i.removeEventListener("offline",this.He),this.He=void 0)),this.Re))try{this._instance._send_request(_({},e,{transport:"sendBeacon"}))}catch(e){ta.error(e)}this.Re=[]}}class nJ{constructor(e){this.Ge=()=>{this.Ve||(this.Ve={});var e,t,i,r,n=this.scrollElement(),s=this.scrollY(),o=n?Math.max(0,n.scrollHeight-n.clientHeight):0,a=s+((null==n?void 0:n.clientHeight)||0),l=(null==n?void 0:n.scrollHeight)||0;this.Ve.lastScrollY=Math.ceil(s),this.Ve.maxScrollY=Math.max(s,null!=(e=this.Ve.maxScrollY)?e:0),this.Ve.maxScrollHeight=Math.max(o,null!=(t=this.Ve.maxScrollHeight)?t:0),this.Ve.lastContentY=a,this.Ve.maxContentY=Math.max(a,null!=(i=this.Ve.maxContentY)?i:0),this.Ve.maxContentHeight=Math.max(l,null!=(r=this.Ve.maxContentHeight)?r:0)},this._instance=e}getContext(){return this.Ve}resetContext(){var e=this.Ve;return setTimeout(this.Ge,0),e}startMeasuringScrollPosition(){tE(i,"scroll",this.Ge,{capture:!0}),tE(i,"scrollend",this.Ge,{capture:!0}),tE(i,"resize",this.Ge)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==i?void 0:i.document.documentElement;for(var e of P(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]){var t=null==i?void 0:i.document.querySelector(e);if(t)return t}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return i&&(i.scrollY||i.pageYOffset||i.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return i&&(i.scrollX||i.pageXOffset||i.document.documentElement.scrollLeft)||0}}var nQ=e=>rm(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties);class nZ{constructor(e,t,i,r){this.Je=e=>{var t=this.Ke();if(!t||t.sessionId!==e){var i={sessionId:e,props:this.Ye(this._instance)};this.Xe.register({[tG]:i})}},this._instance=e,this.Qe=t,this.Xe=i,this.Ye=r||nQ,this.Qe.onSessionId(this.Je)}Ke(){return this.Xe.props[tG]}getSetOnceProps(){var e,t=null==(e=this.Ke())?void 0:e.props;return t?"r"in t?r_(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return tf(ty(this.getSetOnceProps()),(t,i)=>{"$current_url"===i&&(i="url"),e["$session_entry_"+T(i)]=t}),e}}var n0=tl("[SessionId]");class n1{on(e,t){return this.Ze.on(e,t)}constructor(e,t,i){if(this.tr=[],this.ir=void 0,this.Ze=new nN,this.er=(e,t)=>!(!U(e)||!U(t))&&Math.abs(e-t)>this.sessionTimeoutMs,!e.persistence)throw Error("SessionIdManager requires a PostHogPersistence instance");if("always"===e.config.cookieless_mode)throw Error('SessionIdManager cannot be used with cookieless_mode="always"');this.R=e.config,this.Xe=e.persistence,this.rr=void 0,this.sr=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.nr=t||i$,this.ar=i||i$;var r,n=this.R.persistence_name||this.R.token,s=this.R.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*K(s,60,36e3,n0.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.lr(),this.ur="ph_"+n+"_window_id",this.hr="ph_"+n+"_primary_window_exists",this.dr()){var o=iY.W(this.ur),a=iY.W(this.hr);o&&!a?this.rr=o:iY.V(this.ur),iY.G(this.hr,!0)}if(null!=(r=this.R.bootstrap)&&r.sessionID)try{var l=(e=>{var t=e.replace(/-/g,"");if(32!==t.length)throw Error("Not a valid UUID");if("7"!==t[12])throw Error("Not a UUIDv7");return parseInt(t.substring(0,12),16)})(this.R.bootstrap.sessionID);this.vr(this.R.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){n0.error("Invalid sessionID in bootstrap",e)}this.cr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return M(this.tr)&&(this.tr=[]),this.tr.push(e),this.sr&&e(this.sr,this.rr),()=>{this.tr=this.tr.filter(t=>t!==e)}}dr(){return"memory"!==this.R.persistence&&!this.Xe.Si&&iY.H()}pr(e){e!==this.rr&&(this.rr=e,this.dr()&&iY.G(this.ur,e))}gr(){return this.rr?this.rr:this.dr()?iY.W(this.ur):null}vr(e,t,i){e===this.sr&&t===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=t,this.sr=e,this.Xe.register({[tL]:[t,e,i]}))}_r(){var e=this.Xe.props[tL];return P(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.vr(null,null,null)}destroy(){clearTimeout(this.mr),this.mr=void 0,this.ir&&i&&(i.removeEventListener("beforeunload",this.ir,{capture:!1}),this.ir=void 0),this.tr=[]}cr(){this.ir=()=>{this.dr()&&iY.V(this.hr)},tE(i,"beforeunload",this.ir,{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),"always"===this.R.cookieless_mode)throw Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var i=t||(new Date).getTime(),[r,n,s]=this._r(),o=this.gr(),a=U(s)&&Math.abs(i-s)>864e5,l=!1,u=!n,h=!u&&!e&&this.er(i,r);u||h||a?(n=this.nr(),o=this.ar(),n0.info("new session ID generated",{sessionId:n,windowId:o,changeReason:{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:a}}),s=i,l=!0):o||(o=this.ar(),l=!0);var c=U(r)&&e&&!a?r:i,d=U(s)?s:(new Date).getTime();return this.pr(o),this.vr(n,c,d),e||this.lr(),l&&this.tr.forEach(e=>e(n,o,l?{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:a}:void 0)),{sessionId:n,windowId:o,sessionStartTimestamp:d,changeReason:l?{noSessionId:u,activityTimeout:h,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:r}}lr(){clearTimeout(this.mr),this.mr=setTimeout(()=>{var[e]=this._r();if(this.er((new Date).getTime(),e)){var t=this.sr;this.resetSessionId(),this.Ze.emit("forcedIdleReset",{idleSessionId:t})}},1.1*this.sessionTimeoutMs)}}var n2=["$set_once","$set"],n3=tl("[SiteApps]");class n6{constructor(e){this._instance=e,this.yr=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}br(e,t){if(t){var i=this.globalsForEvent(t);this.yr.push(i),this.yr.length>1e3&&(this.yr=this.yr.slice(10))}}get siteAppLoaders(){var e;return null==(e=p._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Hi(this.br.bind(this));this.wr=()=>{e(),this.yr=[],this.wr=void 0}}}globalsForEvent(e){if(!e)throw Error("Event payload is required");var t,i,r,n,s,o,a,l={},u=this._instance.get_property("$groups")||[];for(var[h,c]of Object.entries(this._instance.get_property("$stored_group_properties")||{}))l[h]={id:u[h],type:h,properties:c};var{$set_once:d,$set:f}=e;return{event:_({},y(e,n2),{properties:_({},e.properties,f?{$set:_({},null!=(t=null==(i=e.properties)?void 0:i.$set)?t:{},f)}:{},d?{$set_once:_({},null!=(r=null==(n=e.properties)?void 0:n.$set_once)?r:{},d)}:{}),elements_chain:null!=(s=null==(o=e.properties)?void 0:o.$elements_chain)?s:"",distinct_id:null==(a=e.properties)?void 0:a.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t=this.apps[e.id],i=()=>{var i;!t.errored&&this.yr.length&&(n3.info("Processing "+this.yr.length+" events for site app with id "+e.id),this.yr.forEach(e=>null==t.processEvent?void 0:t.processEvent(e)),t.processedBuffer=!0),Object.values(this.apps).every(e=>e.processedBuffer||e.errored)&&(null==(i=this.wr)||i.call(this))},r=!1,n=n=>{t.errored=!n,t.loaded=!0,n3.info("Site app with id "+e.id+" "+(n?"loaded":"errored")),r&&i()};try{var{processEvent:s}=e.init({posthog:this._instance,callback:e=>{n(e)}});s&&(t.processEvent=s),r=!0}catch(t){n3.error("Error while initializing PostHog app with config id "+e.id,t),n(!1)}if(r&&t.loaded)try{i()}catch(i){n3.error("Error while processing buffered events PostHog app with config id "+e.id,i),t.errored=!0}}Er(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}$r(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{null==i.processEvent||i.processEvent(t)}catch(t){n3.error("Error while processing event "+e.event+" for site app "+i.id,t)}}}onRemoteConfig(e){var t,i,r,n=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this.Er(),void this._instance.on("eventCaptured",e=>this.$r(e))):void n3.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(i=this.wr)||i.call(this),null!=(r=e.siteApps)&&r.length)if(this.isEnabled){var s=function(e){var t;p["__$$ph_site_app_"+e]=n._instance,null==(t=p.__PosthogExtensions__)||null==t.loadSiteApp||t.loadSiteApp(n._instance,a,t=>{if(t)return n3.error("Error while initializing PostHog app with config id "+e,t)})};for(var{id:o,url:a}of e.siteApps)s(o)}else n3.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var n5=function(e,t){if(!e)return!1;var i=e.userAgent;if(i&&w(i,t))return!0;try{var r=null==e?void 0:e.userAgentData;if(null!=r&&r.brands&&r.brands.some(e=>w(null==e?void 0:e.brand,t)))return!0}catch(e){}return!!e.webdriver},n4=((sD={}).US="us",sD.EU="eu",sD.CUSTOM="custom",sD),n8="i.posthog.com";class n7{constructor(e){this.Sr={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get flagsApiHost(){var e=this.instance.config.flags_api_host;return e?e.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+n8,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this.Sr[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Sr[this.apiHost]=n4.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Sr[this.apiHost]=n4.EU:this.Sr[this.apiHost]=n4.CUSTOM),this.Sr[this.apiHost]}endpointFor(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if("flags"===e)return this.flagsApiHost+t;if(this.region===n4.CUSTOM)return this.apiHost+t;var i=n8+t;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var n9={icontains:(e,t)=>!!i&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!i&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!i&&ni(t.href,e),not_regex:(e,t)=>!!i&&!ni(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class se{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getWebExperiments(e=>{se.kr("retrieved web experiments from the server"),t.Pr=new Map,e.forEach(e=>{if(e.feature_flag_key){t.Pr&&(se.kr("setting flag key ",e.feature_flag_key," to web experiment ",e),null==(i=t.Pr)||i.set(e.feature_flag_key,e));var i,r=t._instance.getFeatureFlag(e.feature_flag_key);N(r)&&e.variants[r]&&t.Tr(e.name,r,e.variants[r].transforms)}else if(e.variants)for(var n in e.variants){var s=e.variants[n];se.Ir(s)&&t.Tr(e.name,n,s.transforms)}})},e)},this._instance=e,this._instance.onFeatureFlags(e=>{this.onFeatureFlags(e)})}onFeatureFlags(e){if(this._is_bot())se.kr("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if($(this.Pr))return this.Pr=new Map,this.loadIfEnabled(),void this.previewWebExperiment();se.kr("applying feature flags",e),e.forEach(e=>{var t;if(this.Pr&&null!=(t=this.Pr)&&t.has(e)){var i,r=this._instance.getFeatureFlag(e),n=null==(i=this.Pr)?void 0:i.get(e);r&&null!=n&&n.variants[r]&&this.Tr(n.name,r,n.variants[r].transforms)}})}}previewWebExperiment(){var e=se.getWindowLocation();if(null!=e&&e.search){var t=iT(null==e?void 0:e.search,"__experiment_id"),i=iT(null==e?void 0:e.search,"__experiment_variant");t&&i&&(se.kr("previewing web experiments "+t+" && "+i),this.getWebExperiments(e=>{this.Cr(parseInt(t),i,e)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!t)return e(r);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:t=>200===t.statusCode&&t.json?e(t.json.experiments||[]):e([])})}Cr(e,t,i){var r=i.filter(t=>t.id===e);r&&r.length>0&&(se.kr("Previewing web experiment ["+r[0].name+"] with variant ["+t+"]"),this.Tr(r[0].name,t,r[0].variants[t].transforms))}static Ir(e){return!$(e.conditions)&&se.Rr(e)&&se.Fr(e)}static Rr(e){if($(e.conditions)||$(null==(t=e.conditions)?void 0:t.url))return!0;var t,i,r,n,s=se.getWindowLocation();return!!s&&(null==(i=e.conditions)||!i.url||n9[null!=(r=null==(n=e.conditions)?void 0:n.urlMatchType)?r:"icontains"](e.conditions.url,s))}static getWindowLocation(){return null==i?void 0:i.location}static Fr(e){if($(e.conditions)||$(null==(i=e.conditions)?void 0:i.utm))return!0;var t=rd();if(t.utm_source){var i,r,n,s,o,a,l,u,h,c=null==(r=e.conditions)||null==(r=r.utm)||!r.utm_campaign||(null==(n=e.conditions)||null==(n=n.utm)?void 0:n.utm_campaign)==t.utm_campaign,d=null==(s=e.conditions)||null==(s=s.utm)||!s.utm_source||(null==(o=e.conditions)||null==(o=o.utm)?void 0:o.utm_source)==t.utm_source,f=null==(a=e.conditions)||null==(a=a.utm)||!a.utm_medium||(null==(l=e.conditions)||null==(l=l.utm)?void 0:l.utm_medium)==t.utm_medium,p=null==(u=e.conditions)||null==(u=u.utm)||!u.utm_term||(null==(h=e.conditions)||null==(h=h.utm)?void 0:h.utm_term)==t.utm_term;return c&&f&&p&&d}return!1}static kr(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];ta.info("[WebExperiments] "+e,i)}Tr(e,t,i){this._is_bot()?se.kr("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?i.forEach(i=>{if(i.selector){se.kr("applying transform of variant "+t+" for experiment "+e+" ",i);var r,n=null==(r=document)?void 0:r.querySelectorAll(i.selector);null==n||n.forEach(e=>{i.html&&(e.innerHTML=i.html),i.css&&e.setAttribute("style",i.css)})}}):se.kr("Control variants leave the page unmodified.")}_is_bot(){return a&&this._instance?n5(a,this._instance.config.custom_blocked_useragents):void 0}}var st=tl("[PostHog ExternalIntegrations]"),si={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class sr{constructor(e){this._instance=e}it(e,t){var i;null==(i=p.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,e,e=>{if(e)return st.error("failed to load script",e);t()})}startIfEnabledOrStop(){var e,t=this,i=function(e){var i,r,s;!n||null!=(i=p.__PosthogExtensions__)&&null!=(i=i.integrations)&&i[e]||t.it(si[e],()=>{var i;null==(i=p.__PosthogExtensions__)||null==(i=i.integrations)||null==(i=i[e])||i.start(t._instance)}),!n&&null!=(r=p.__PosthogExtensions__)&&null!=(r=r.integrations)&&r[e]&&(null==(s=p.__PosthogExtensions__)||null==(s=s.integrations)||null==(s=s[e])||s.stop())};for(var[r,n]of Object.entries(null!=(e=this._instance.config.integrations)?e:{}))i(r)}}var sn="[SessionRecording]",ss=tl(sn);class so{get started(){var e;return!(null==(e=this.Mr)||!e.isStarted)}get status(){return this.Mr?this.Mr.status:this.Or&&!this.Ar?"disabled":"lazy_loading"}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this.Or=!1,this.Dr=void 0,this._instance=e,!this._instance.sessionManager)throw ss.error("started without valid sessionManager"),Error(sn+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw Error(sn+' cannot be used with cookieless_mode="always"')}get Ar(){var e,t=!(null==(e=this._instance.get_property(tN))||!e.enabled),r=!this._instance.config.disable_session_recording,n=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return i&&t&&r&&!n}startIfEnabledOrStop(e){var t;if(!this.Ar||null==(t=this.Mr)||!t.isStarted){var i=!M(Object.assign)&&!M(Array.from);this.Ar&&i?(this.jr(e),ss.info("starting")):this.stopRecording()}}jr(e){var t,i,r;this.Ar&&(null!=p&&null!=(t=p.__PosthogExtensions__)&&null!=(t=t.rrweb)&&t.record&&null!=(i=p.__PosthogExtensions__)&&i.initSessionRecording?this.Lr(e):null==(r=p.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,this.Nr,t=>{if(t)return ss.error("could not load recorder",t);this.Lr(e)}))}stopRecording(){var e,t;null==(e=this.Dr)||e.call(this),this.Dr=void 0,null==(t=this.Mr)||t.stop()}Ur(){var e;null==(e=this._instance.persistence)||e.unregister(tF)}zr(e){if(this._instance.persistence){var t,i,r=this._instance.persistence,n=()=>{var t=!1===e.sessionRecording?void 0:e.sessionRecording,i=null==t?void 0:t.sampleRate,n=$(i)?null:parseFloat(i);$(n)&&this.Ur();var s=null==t?void 0:t.minimumDurationMilliseconds;r.register({[tN]:_({enabled:!!t},t,{networkPayloadCapture:_({capturePerformance:e.capturePerformance},null==t?void 0:t.networkPayloadCapture),canvasRecording:{enabled:null==t?void 0:t.recordCanvas,fps:null==t?void 0:t.canvasFps,quality:null==t?void 0:t.canvasQuality},sampleRate:n,minimumDurationMilliseconds:M(s)?null:s,endpoint:null==t?void 0:t.endpoint,triggerMatchType:null==t?void 0:t.triggerMatchType,masking:null==t?void 0:t.masking,urlTriggers:null==t?void 0:t.urlTriggers})})};n(),null==(t=this.Dr)||t.call(this),this.Dr=null==(i=this._instance.sessionManager)?void 0:i.onSessionId(n)}}onRemoteConfig(e){"sessionRecording"in e?!1!==e.sessionRecording?(this.zr(e),this.Or=!0,this.startIfEnabledOrStop()):this.Or=!0:ss.info("skipping remote config with no sessionRecording",e)}log(e,t){var i;void 0===t&&(t="log"),null!=(i=this.Mr)&&i.log?this.Mr.log(e,t):ss.warn("log called before recorder was ready")}get Nr(){var e,t,i=null==(e=this._instance)||null==(e=e.persistence)?void 0:e.get_property(tN);return(null==i||null==(t=i.scriptConfig)?void 0:t.script)||"lazy-recorder"}Lr(e){var t,i;if(null==(t=p.__PosthogExtensions__)||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.Mr||(this.Mr=null==(i=p.__PosthogExtensions__)?void 0:i.initSessionRecording(this._instance),this.Mr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.Mr.start(e)}onRRwebEmit(e){var t;null==(t=this.Mr)||null==t.onRRwebEmit||t.onRRwebEmit(e)}overrideLinkedFlag(){var e,t;this.Mr||null==(t=this._instance.persistence)||t.register({$replay_override_linked_flag:!0}),null==(e=this.Mr)||e.overrideLinkedFlag()}overrideSampling(){var e,t;this.Mr||null==(t=this._instance.persistence)||t.register({$replay_override_sampling:!0}),null==(e=this.Mr)||e.overrideSampling()}overrideTrigger(e){var t,i;this.Mr||null==(i=this._instance.persistence)||i.register({["url"===e?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(t=this.Mr)||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return(null==(e=this.Mr)?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(e,t){var i;return!(null==(i=this.Mr)||!i.tryAddCustomEvent(e,t))}}var sa={},sl=()=>{},su="posthog",sh=!r4&&-1===(null==f?void 0:f.indexOf("MSIE"))&&-1===(null==f?void 0:f.indexOf("Mozilla")),sc=e=>{var t;return _({api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,cross_subdomain_cookie:function(e){var t=null==e?void 0:e.hostname;if(!N(t))return!1;var i=t.split(".").slice(-2).join(".");for(var r of tb)if(i===r)return!1;return!0}(null==l?void 0:l.location),persistence:"localStorage+cookie",persistence_name:"",cookie_persisted_properties:[],loaded:sl,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageleave:"if_capture_pageview",defaults:null!=e?e:"unset",__preview_deferred_init_extensions:!1,debug:u&&N(null==u?void 0:u.search)&&-1!==u.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_conversations:!1,disable_product_tours:!0,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==i||null==(t=i.location)?void 0:t.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;ta.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:3e3},error_tracking:{},_onCapture:sl,__preview_eager_load_replay:!1},{rageclick:!(e&&e>="2025-11-30")||{content_ignorelist:!0},capture_pageview:!(e&&e>="2025-05-24")||"history_change",session_recording:e&&e>="2025-11-30"?{strictMinimumDuration:!0}:{}})},sd=e=>{var t={};M(e.process_person)||(t.person_profiles=e.process_person),M(e.xhr_headers)||(t.request_headers=e.xhr_headers),M(e.cookie_name)||(t.persistence_name=e.cookie_name),M(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),M(e.store_google)||(t.save_campaign_params=e.store_google),M(e.verbose)||(t.debug=e.verbose);var i=tp({},t,e);return P(e.property_blacklist)&&(M(e.property_denylist)?i.property_denylist=e.property_blacklist:P(e.property_denylist)?i.property_denylist=[...e.property_blacklist,...e.property_denylist]:ta.error("Invalid value for property_denylist config: "+e.property_denylist)),i};class sf{constructor(){this.__forceAllowLocalhost=!1}get Hr(){return this.__forceAllowLocalhost}set Hr(e){ta.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class sp{get decideEndpointWasHit(){var e,t;return null!=(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&e}get flagsEndpointWasHit(){var e,t;return null!=(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&e}constructor(){this.webPerformance=new sf,this.Br=!1,this.version=g.LIB_VERSION,this.qr=new nN,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=sc(),this.SentryIntegration=i9,this.sentryIntegration=e=>{var t;return t=i7(this,e),{name:i8,processEvent:e=>t(e)}},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.Wr=!1,this.Gr=null,this.Vr=null,this.Jr=null,this.featureFlags=new ny(this),this.toolbar=new rn(this),this.scrollManager=new nJ(this),this.pageViewManager=new rT(this),this.surveys=new nU(this),this.conversations=new nB(this),this.logs=new nq(this),this.experiments=new se(this),this.exceptions=new nl(this),this.rateLimiter=new nz(this),this.requestRouter=new n7(this),this.consent=new iJ(this),this.externalIntegrations=new sr(this),this.people={set:(e,t,i)=>{var r=N(e)?{[e]:t}:e;this.setPersonProperties(r),null==i||i({})},set_once:(e,t,i)=>{var r=N(e)?{[e]:t}:e;this.setPersonProperties(void 0,r),null==i||i({})}},this.on("eventCaptured",e=>ta.info('send "'+(null==e?void 0:e.event)+'"',e))}init(e,t,i){if(i&&i!==su){var r,n=null!=(r=sa[i])?r:new sp;return n._init(e,t,i),sa[i]=n,sa[su][i]=n,n}return this._init(e,t,i)}_init(e,t,r){if(void 0===t&&(t={}),M(e)||L(e))return ta.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},t.debug=this.Kr(t.debug),this.Yr=t,this.Xr=[],t.person_profiles&&(this.Vr=t.person_profiles),this.set_config(tp({},sc(t.defaults),sd(t),{name:r,token:e})),this.config.on_xhr_error&&ta.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:rI.GZipJS;var n=this.Qr();this.persistence=new nw(this.config,n),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new nw(_({},this.config,{persistence:"sessionStorage"}),n);var s=_({},this.persistence.props),o=_({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.Zr=new nK(e=>this.ts(e),this.config.request_queue_config),this.es=new nX(this),this.__request_queue=[];var a="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(a||(this.sessionManager=new n1(this),this.sessionPropsManager=new nZ(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(ta.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.rs(a)},0)):(ta.info("Initializing extensions synchronously"),this.rs(a)),g.DEBUG=g.DEBUG||this.config.debug,g.DEBUG&&ta.info("Starting in debug mode",{this:this,config:t,thisC:_({},this.config),p:s,s:o}),void 0!==(null==(l=t.bootstrap)?void 0:l.distinctID)){var l,u,h,c=this.config.get_device_id(i$()),d=null!=(u=t.bootstrap)&&u.isIdentifiedID?c:t.bootstrap.distinctID;this.persistence.set_property(tz,null!=(h=t.bootstrap)&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:d})}if(this.ss()){var f,p,v=Object.keys((null==(f=t.bootstrap)?void 0:f.featureFlags)||{}).filter(e=>{var i;return!(null==(i=t.bootstrap)||null==(i=i.featureFlags)||!i[e])}).reduce((e,i)=>{var r;return e[i]=(null==(r=t.bootstrap)||null==(r=r.featureFlags)?void 0:r[i])||!1,e},{}),m=Object.keys((null==(p=t.bootstrap)?void 0:p.featureFlagPayloads)||{}).filter(e=>v[e]).reduce((e,i)=>{var r,n;return null!=(r=t.bootstrap)&&null!=(r=r.featureFlagPayloads)&&r[i]&&(e[i]=null==(n=t.bootstrap)||null==(n=n.featureFlagPayloads)?void 0:n[i]),e},{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:m})}if(a)this.register_once({distinct_id:tZ,$device_id:null},"");else if(!this.get_distinct_id()){var y=this.config.get_device_id(i$());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(tz,"anonymous")}return tE(i,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?function(e,t){var i=e.config.segment;if(!i)return t();!function(e,t){var i=e.config.segment;if(!i)return t();var r=i=>{var r=()=>i.anonymousId()||i$();e.config.get_device_id=r,i.id()&&(e.register({distinct_id:i.id(),$device_id:r()}),e.persistence.set_property(tz,"identified")),t()},n=i.user();"then"in n&&R(n.then)?n.then(r):r(n)}(e,()=>{var r;i.register((Promise&&Promise.resolve||i4.warn("This browser does not have Promise support, and can not use the segment integration"),r=(t,i)=>{if(!i)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(i4.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(i4.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var r=e.calculateEventProperties(i,t.event.properties);return t.event.properties=Object.assign({},r,t.event.properties),t},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>r(e,e.event.event),page:e=>r(e,"$pageview"),identify:e=>r(e,"$identify"),screen:e=>r(e,"$screen")})).then(()=>{t()})})}(this,()=>this.ns()):this.ns(),R(this.config._onCapture)&&this.config._onCapture!==sl&&(ta.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",e=>this.config._onCapture(e.event,e))),this.config.ip&&ta.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}rs(e){var t=performance.now();this.historyAutocapture=new i5(this),this.historyAutocapture.startIfEnabled();var i=[];i.push(()=>{new ro(this).startIfEnabledOrStop()}),i.push(()=>{var e;this.siteApps=new n6(this),null==(e=this.siteApps)||e.init()}),e||i.push(()=>{this.sessionRecording=new so(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||i.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),i.push(()=>{this.autocapture=new iR(this),this.autocapture.startIfEnabled()}),i.push(()=>{this.surveys.loadIfEnabled()}),i.push(()=>{this.logs.loadIfEnabled()}),i.push(()=>{this.conversations.loadIfEnabled()}),i.push(()=>{this.productTours=new nx(this),this.productTours.loadIfEnabled()}),i.push(()=>{this.heatmaps=new rx(this),this.heatmaps.startIfEnabled()}),i.push(()=>{this.webVitalsAutocapture=new rw(this)}),i.push(()=>{this.exceptionObserver=new i3(this),this.exceptionObserver.startIfEnabledOrStop()}),i.push(()=>{this.deadClicksAutocapture=new i1(this,i0),this.deadClicksAutocapture.startIfEnabled()}),i.push(()=>{if(this.os){var e=this.os;this.os=void 0,this.yi(e)}}),this.ls(i,t)}ls(e,t){for(;e.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-t>=30&&e.length>0)return void setTimeout(()=>{this.ls(e,t)},0);var i=e.shift();if(i)try{i()}catch(e){ta.error("Error initializing extension:",e)}}var r=Math.round(performance.now()-t);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:r}),this.config.__preview_deferred_init_extensions&&ta.info("PostHog extensions initialized ("+r+"ms)")}yi(e){var t,i,r,n,s,o,a,u,h;l&&l.body?(this.config.__preview_deferred_init_extensions&&(this.os=e),this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=S(e.supportedCompression,rI.GZipJS)?rI.GZipJS:S(e.supportedCompression,rI.Base64)?rI.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.Vr?this.Vr:"identified_only"}),null==(i=this.siteApps)||i.onRemoteConfig(e),null==(r=this.sessionRecording)||r.onRemoteConfig(e),null==(n=this.autocapture)||n.onRemoteConfig(e),null==(s=this.heatmaps)||s.onRemoteConfig(e),this.surveys.onRemoteConfig(e),this.logs.onRemoteConfig(e),this.conversations.onRemoteConfig(e),null==(o=this.productTours)||o.onRemoteConfig(e),null==(a=this.webVitalsAutocapture)||a.onRemoteConfig(e),null==(u=this.exceptionObserver)||u.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),null==(h=this.deadClicksAutocapture)||h.onRemoteConfig(e)):(ta.info("document not ready yet, trying again in 500 milliseconds..."),setTimeout(()=>{this.yi(e)},500))}ns(){try{this.config.loaded(this)}catch(e){ta.critical("`loaded` function failed",e)}this.us(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this.hs()},1),new nW(this).load(),this.featureFlags.flags()}us(){var e;this.is_capturing()&&this.config.request_batching&&(null==(e=this.Zr)||e.enable())}_dom_loaded(){this.is_capturing()&&td(this.__request_queue,e=>this.ts(e)),this.__request_queue=[],this.us()}_handle_unload(){var e,t;this.surveys.handlePageUnload(),this.config.request_batching?(this.ds()&&this.capture("$pageleave"),null==(e=this.Zr)||e.unload(),null==(t=this.es)||t.unload()):this.ds()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(sh?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=r7(e.url,{ip:+!!this.config.ip}),e.headers=_({},this.config.request_headers,e.headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(e.disableTransport=["sendBeacon"]),e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,i,r,n=_({},e);n.timeout=n.timeout||6e4,n.url=r7(n.url,{_:(new Date).getTime().toString(),ver:g.LIB_VERSION,compression:n.compression});var s=null!=(t=n.transport)?t:"fetch",o=nt.filter(e=>!n.disableTransport||!e.transport||!n.disableTransport.includes(e.transport)),a=null!=(i=null==(r=tw(o,e=>e.transport===s))?void 0:r.method)?i:o[0].method;if(!a)throw Error("No available transport method");a(n)})(_({},e,{callback:t=>{var i,r;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null==(i=(r=this.config).on_request_error)||i.call(r,t)),null==e.callback||e.callback(t)}}))))}ts(e){this.es?this.es.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,i=[],r=[],n=[];td(e,e=>{e&&(P(t=e[0])?n.push(e):R(e)?e.call(this):P(e)&&"alias"===t?i.push(e):P(e)&&-1!==t.indexOf("capture")&&R(this[t])?n.push(e):r.push(e))});var s=function(e,t){td(e,function(e){if(P(e[0])){var i=t;tf(e,function(e){i=i[e[0]].apply(i,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};s(i,this),s(r,this),s(n,this)}ss(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Zr){if(this.is_capturing())if(!M(e)&&N(e)){var n=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(n&&!this.config.__preview_capture_bot_pageviews)){var s=null!=i&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==s||!s.isRateLimited){null!=t&&t.$current_url&&!N(null==t?void 0:t.$current_url)&&(ta.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(null==i?void 0:i.timestamp)||o,l=i$(),u={uuid:l,event:e,properties:this.calculateEventProperties(e,t||{},a,l)};"$pageview"===e&&this.config.__preview_capture_bot_pageviews&&n&&(u.event="$bot_pageview",u.properties.$browser_type="bot"),s&&(u.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),(null==i?void 0:i.$set)&&(u.$set=null==i?void 0:i.$set);var h,c="$groupidentify"!==e,d=this.vs(null==i?void 0:i.$set_once,c);if(d&&(u.$set_once=d),(f=u,p=null!=i&&i._noTruncate?null:this.config.properties_string_max_length,g=e=>N(e)&&!F(p)?e.slice(0,p):e,v=new Set,u=function e(t,i){var r;return t!==Object(t)?g?g(t,i):t:v.has(t)?void 0:(v.add(t),P(t)?(r=[],td(t,t=>{r.push(e(t))})):(r={},tf(t,(t,i)=>{v.has(t)||(r[i]=e(t,i))})),r)}(f)).timestamp=a,M(null==i?void 0:i.timestamp)||(u.properties.$event_time_override_provided=!0,u.properties.$event_time_override_system_time=o),e===nk.DISMISSED||e===nk.SENT){var f,p,g,v,m,y,b,w=null==t?void 0:t[nC.SURVEY_ID],E=null==t?void 0:t[nC.SURVEY_ITERATION];h={id:w,current_iteration:E},localStorage.getItem(nD(h))||localStorage.setItem(nD(h),"true"),u.$set=_({},u.$set,{[(m={id:w,current_iteration:E},b="$survey_"+(y=e===nk.SENT?"responded":"dismissed")+"/"+m.id,m.current_iteration&&m.current_iteration>0&&(b="$survey_"+y+"/"+m.id+"/"+m.current_iteration),b)]:!0})}else e===nk.SHOWN&&(u.$set=_({},u.$set,{[nC.SURVEY_LAST_SEEN_DATE]:(new Date).toISOString()}));var S=_({},u.properties.$set,u.$set);if(O(S)||this.setPersonPropertiesForFlags(S),!$(this.config.before_send)){var x=this.cs(u);if(!x)return;u=x}this.qr.emit("eventCaptured",u);var T={method:"POST",url:null!=(r=null==i?void 0:i._url)?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:u,compression:"best-available",batchKey:null==i?void 0:i._batchKey};return!this.config.request_batching||i&&(null==i||!i._batchKey)||null!=i&&i.send_instantly?this.ts(T):this.Zr.enqueue(T),u}ta.critical("This capture call is ignored due to client rate limiting.")}}else ta.error("No event name provided to posthog.capture")}else ta.uninitializedWarning("posthog.capture")}Hi(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,r,n,s){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return t;var o,a=s?void 0:this.persistence.remove_event_timer(e),h=_({},t);if(h.token=this.config.token,h.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(h.$cookieless_mode=!0),"$snapshot"===e){var c=_({},this.persistence.properties(),this.sessionPersistence.properties());return h.distinct_id=c.distinct_id,(!N(h.distinct_id)&&!V(h.distinct_id)||L(h.distinct_id))&&ta.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),h}var d,p=function(e,t){if(!f)return{};var r,n,s=e?tg([],rl,t||[]):[],[o,a]=function(e){for(var t=0;t<ez.length;t++){var[i,r]=ez[t],n=i.exec(e),s=n&&(R(r)?r(n,e):r);if(s)return s}return["",""]}(f);return tp(ty({$os:o,$os_version:a,$browser:eB(f,navigator.vendor),$device:eG(f),$device_type:(n=eG(f))===er||n===ei||"Kobo"===n||"Kindle Fire"===n||n===eO?et:n===eE||n===ex||n===eS||n===eP?"Console":n===es?"Wearable":n?Z:"Desktop",$timezone:ry(),$timezone_offset:function(){try{return(new Date).getTimezoneOffset()}catch(e){return}}()}),{$current_url:iI(null==u?void 0:u.href,s,rh),$host:null==u?void 0:u.host,$pathname:null==u?void 0:u.pathname,$raw_user_agent:f.length>1e3?f.substring(0,997)+"...":f,$browser_version:eH(f,navigator.vendor),$browser_language:rg(),$browser_language_prefix:"string"==typeof(r=rg())?r.split("-")[0]:void 0,$screen_height:null==i?void 0:i.screen.height,$screen_width:null==i?void 0:i.screen.width,$viewport_height:null==i?void 0:i.innerHeight,$viewport_width:null==i?void 0:i.innerWidth,$lib:"web",$lib_version:g.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:v,windowId:m}=this.sessionManager.checkAndGetSessionAndWindowId(s,r.getTime());h.$session_id=v,h.$window_id=m}this.sessionPropsManager&&tp(h,this.sessionPropsManager.getSessionProps());try{this.sessionRecording&&tp(h,this.sessionRecording.sdkDebugProperties),h.$sdk_debug_retry_queue_size=null==(o=this.es)?void 0:o.length}catch(e){h.$sdk_debug_error_capturing_properties=String(e)}if(this.requestRouter.region===n4.CUSTOM&&(h.$lib_custom_api_host=this.config.api_host),d="$pageview"!==e||s?"$pageleave"!==e||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(r):this.pageViewManager.doPageView(r,n),h=tp(h,d),"$pageview"===e&&l&&(h.title=l.title),!M(a)){var y=r.getTime()-a;h.$duration=parseFloat((y/1e3).toFixed(3))}f&&this.config.opt_out_useragent_filter&&(h.$browser_type=this._is_bot()?"bot":"browser"),(h=tp({},p,this.persistence.properties(),this.sessionPersistence.properties(),h)).$is_identified=this._isIdentified(),P(this.config.property_denylist)?tf(this.config.property_denylist,function(e){delete h[e]}):ta.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var b=this.config.sanitize_properties;b&&(ta.error("sanitize_properties is deprecated. Use before_send instead"),h=b(h,e));var w=this.fs();return h.$process_person_profile=w,w&&!s&&this.ps("_calculate_event_properties"),h}vs(e,t){if(void 0===t&&(t=!0),!this.persistence||!this.fs()||this.Br)return e;var i,r=tp({},this.persistence.get_initial_props(),(null==(i=this.sessionPropsManager)?void 0:i.getSetOnceProps())||{},e||{}),n=this.config.sanitize_properties;return n&&(ta.error("sanitize_properties is deprecated. Use before_send instead"),r=n(r,"$set_once")),t&&(this.Br=!0),O(r)?void 0:r}register(e,t){var i;null==(i=this.persistence)||i.register(e,t)}register_once(e,t,i){var r;null==(r=this.persistence)||r.register_once(e,t,i)}register_for_session(e){var t;null==(t=this.sessionPersistence)||t.register(e)}unregister(e){var t;null==(t=this.persistence)||t.unregister(e)}unregister_for_session(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)}gs(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateFlags(e,t,i){var r=null!=i&&i.merge?this.featureFlags.getFlagVariants():{},n=null!=i&&i.merge?this.featureFlags.getFlagPayloads():{},s=_({},r,e),o=_({},n,t),a={};for(var[l,u]of Object.entries(s)){var h="string"==typeof u;a[l]={key:l,enabled:!!h||!!u,variant:h?u:void 0,reason:void 0,metadata:M(null==o?void 0:o[l])?void 0:{id:0,version:void 0,description:void 0,payload:o[l]}}}this.featureFlags.receivedFeatureFlags({flags:a})}updateEarlyAccessFeatureEnrollment(e,t,i){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,i)}getEarlyAccessFeatures(e,t,i){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,i)}on(e,t){return this.qr.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,i;return null!=(t=null==(i=this.sessionManager)?void 0:i.onSessionId(e))?t:()=>{}}getSurveys(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}displaySurvey(e,t){void 0===t&&(t=nM),this.surveys.displaySurvey(e,t)}cancelPendingSurvey(e){this.surveys.cancelPendingSurvey(e)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,i){if(!this.__loaded||!this.persistence)return ta.uninitializedWarning("posthog.identify");if(V(e)&&(e=e.toString(),ta.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))ta.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==tZ){if(this.ps("posthog.identify")){var r=this.get_distinct_id();this.register({$user_id:e}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:r},""),e!==r&&e!==this.get_property(tx)&&(this.unregister(tx),this.register({distinct_id:e}));var n="anonymous"===(this.persistence.get_property(tz)||"anonymous");e!==r&&n?(this.persistence.set_property(tz,"identified"),this.setPersonPropertiesForFlags(_({},i||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:i||{}}),this.Jr=nr(e,t,i),this.featureFlags.setAnonymousDistinctId(r)):(t||i)&&this.setPersonProperties(t,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(tH))}}else ta.critical('The string "'+tZ+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else ta.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this.ps("posthog.setPersonProperties")){var i=nr(this.get_distinct_id(),e,t);this.Jr!==i?(this.setPersonPropertiesForFlags(_({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this.Jr=i):ta.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,i){if(e&&t){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:_({},r,{[e]:t})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===t||i||this.reloadFeatureFlags()}else ta.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0),this.ps("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){if(ta.info("reset"),!this.__loaded)return ta.uninitializedWarning("posthog.reset");var t,i,r,n,s=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(i=this.sessionPersistence)||i.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(r=this.persistence)||r.set_property(tz,"anonymous"),null==(n=this.sessionManager)||n.resetSessionId(),this.Jr=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:tZ,$device_id:null},"");else{var o=this.config.get_device_id(i$());this.register_once({distinct_id:o,$device_id:e?o:s},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!=(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(null!=e&&e.withTimestamp&&i){var n,s=null!=(n=e.timestampLookBack)?n:10;if(!i)return r;r+="?t="+Math.max(Math.floor(((new Date).getTime()-i)/1e3)-s,0)}return r}alias(e,t){return e===this.get_property(tS)?(ta.critical("Attempting to create alias for existing People user - aborting."),-2):this.ps("posthog.alias")?(M(t)&&(t=this.get_distinct_id()),e!==t?(this.gs(tx,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(ta.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=_({},this.config);if(D(e)){tp(this.config,sd(e));var i,r,n,s,o,a,l,u=this.Qr();null==(i=this.persistence)||i.update_config(this.config,t,u),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new nw(_({},this.config,{persistence:"sessionStorage"}),u);var h=this.Kr(this.config.debug);j(h)&&(this.config.debug=h),j(this.config.debug)&&(this.config.debug?(g.DEBUG=!0,iH.H()&&iH.G("ph_debug","true"),ta.info("set_config",{config:e,oldConfig:t,newConfig:_({},this.config)})):(g.DEBUG=!1,iH.H()&&iH.V("ph_debug"))),null==(r=this.exceptionObserver)||r.onConfigChange(),null==(n=this.sessionRecording)||n.startIfEnabledOrStop(),null==(s=this.autocapture)||s.startIfEnabled(),null==(o=this.heatmaps)||o.startIfEnabled(),null==(a=this.exceptionObserver)||a.startIfEnabledOrStop(),this.surveys.loadIfEnabled(),this._s(),null==(l=this.externalIntegrations)||l.startIfEnabledOrStop()}}startSessionRecording(e){var t,i,r,n,s,o=!0===e,a={sampling:o||!(null==e||!e.sampling),linked_flag:o||!(null==e||!e.linked_flag),url_trigger:o||!(null==e||!e.url_trigger),event_trigger:o||!(null==e||!e.event_trigger)};Object.values(a).some(Boolean)&&(null==(t=this.sessionManager)||t.checkAndGetSessionAndWindowId(),a.sampling&&(null==(i=this.sessionRecording)||i.overrideSampling()),a.linked_flag&&(null==(r=this.sessionRecording)||r.overrideLinkedFlag()),a.url_trigger&&(null==(n=this.sessionRecording)||n.overrideTrigger("url")),a.event_trigger&&(null==(s=this.sessionRecording)||s.overrideTrigger("event"))),this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null==(e=this.sessionRecording)||!e.started)}captureException(e,t){var i=Error("PostHog syntheticException"),r=this.exceptions.buildProperties(e,{handled:!0,syntheticException:i});return this.exceptions.sendExceptionEvent(_({},r,t))}startExceptionAutocapture(e){this.set_config({capture_exceptions:null==e||e})}stopExceptionAutocapture(){this.set_config({capture_exceptions:!1})}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null==(t=this.persistence)?void 0:t.props[e]}getSessionProperty(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]}toString(){var e,t=null!=(e=this.config.name)?e:su;return t!==su&&(t=su+"."+t),t}_isIdentified(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(tz))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(tz))}fs(){var e,t;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&O(this.getGroups())&&(null==(e=this.persistence)||null==(e=e.props)||!e[tx])&&(null==(t=this.persistence)||null==(t=t.props)||!t[tJ]))}ds(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.fs()||this.ps("posthog.createPersonProfile")&&this.setPersonProperties({},{})}ps(e){return"never"===this.config.person_profiles?(ta.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.gs(tJ,!0),!0)}Qr(){if("always"===this.config.cookieless_mode)return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||e&&!!t}_s(){var e,t,i,r,n=this.Qr();return(null==(e=this.persistence)?void 0:e.Si)!==n&&(null==(i=this.persistence)||i.set_disabled(n)),(null==(t=this.sessionPersistence)?void 0:t.Si)!==n&&(null==(r=this.sessionPersistence)||r.set_disabled(n)),n}opt_in_capturing(e){var t,i,r,n;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(i=this.sessionManager)||i.destroy(),null==(r=this.pageViewManager)||r.destroy(),this.sessionManager=new n1(this),this.pageViewManager=new rT(this),this.persistence&&(this.sessionPropsManager=new nZ(this,this.sessionManager,this.persistence)),this.sessionRecording=new so(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this._s(),this.us(),null==(t=this.sessionRecording)||t.startIfEnabledOrStop(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(M(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!=(n=null==e?void 0:e.captureEventName)?n:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.hs()):ta.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e,t,i;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this._s(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:tZ,$device_id:null}),null==(e=this.sessionManager)||e.destroy(),null==(t=this.pageViewManager)||t.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(i=this.sessionRecording)||i.stopRecording(),this.sessionRecording=void 0,this.hs())):ta.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===iX.GRANTED?"granted":e===iX.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this._s()}_is_bot(){return a?n5(a,this.config.custom_blocked_useragents):void 0}hs(){l&&("visible"===l.visibilityState?this.Wr||(this.Wr=!0,this.capture("$pageview",{title:l.title},{send_instantly:!0}),this.Gr&&(l.removeEventListener("visibilitychange",this.Gr),this.Gr=null)):this.Gr||(this.Gr=this.hs.bind(this),tE(l,"visibilitychange",this.Gr)))}debug(e){!1===e?(null==i||i.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==i||i.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}O(){var e,t,i,r,n=this.Yr||{};return"advanced_disable_flags"in n?!!n.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(ta.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(t="advanced_disable_decide",i=(e="advanced_disable_flags")in n&&!M(n[e]),r=t in n&&!M(n[t]),i?n[e]:!!r&&(ta&&ta.warn("Config field '"+t+"' is deprecated. Please use '"+e+"' instead. The old field will be removed in a future major version."),n[t]))}cs(e){if($(this.config.before_send))return e;var t=P(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of t){if($(i=r(i))){var n="Event '"+e.event+"' was rejected in beforeSend function";return B(e.event)?ta.warn(n+". This can cause unexpected behavior."):ta.info(n),null}i.properties&&!O(i.properties)||ta.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return null==(e=this.pageViewManager.Kt)?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(i)})}Kr(e){var t=j(e)&&!e,i=iH.H()&&"true"===iH.q("ph_debug");return!t&&(!!i||e)}}for(var sg=["identify"],sv=0;sv<sg.length;sv++)sp.prototype[sg[sv]]=t_(sp.prototype[sg[sv]]);var sm,s_,sy,sb,sw,sE,sS,sx,sT,sI,sk,sC,sA,sP,sR,sD,sO,sM=(sO=sa[su]=new sp,function(){function e(){e.done||(e.done=!0,sh=!1,tf(sa,function(e){e._dom_loaded()}))}null!=l&&l.addEventListener?"complete"===l.readyState?e():tE(l,"DOMContentLoaded",e,{capture:!1}):i&&ta.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),sO),sN=e.i(78683),sL=(0,sN.createContext)({client:sM,bootstrap:void 0});function sF(e){var t,i,r=e.children,n=e.client,s=e.apiKey,o=e.options,a=(0,sN.useRef)(null),l=(0,sN.useMemo)(function(){return n?(s&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),o&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(s||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),sM)},[n,s,JSON.stringify(o)]);return(0,sN.useEffect)(function(){if(!n){var e=a.current;e?(s!==e.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),o&&!function e(t,i,r){if(void 0===r&&(r=new WeakMap),t===i)return!0;if("object"!=typeof t||null===t||"object"!=typeof i||null===i)return!1;if(r.has(t)&&r.get(t)===i)return!0;r.set(t,i);var n=Object.keys(t),s=Object.keys(i);if(n.length!==s.length)return!1;for(var o=0;o<n.length;o++){var a=n[o];if(!s.includes(a)||!e(t[a],i[a],r))return!1}return!0}(o,e.options)&&sM.set_config(o)):(sM.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),sM.init(s,o)),a.current={apiKey:s,options:null!=o?o:{}}}},[n,s,JSON.stringify(o)]),sN.default.createElement(sL.Provider,{value:{client:l,bootstrap:null!=(t=null==o?void 0:o.bootstrap)?t:null==(i=null==n?void 0:n.config)?void 0:i.bootstrap}},r)}var s$=function(e){return"function"==typeof e},sV=function(e,t){return(sV=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};"function"==typeof SuppressedError&&SuppressedError;var sU={componentStack:null,exceptionEvent:null,error:null},sj=sN.default.Component;if("function"!=typeof sj&&null!==sj)throw TypeError("Class extends value "+String(sj)+" is not a constructor or null");function sB(){this.constructor=sq}function sq(e){var t=sj.call(this,e)||this;return t.state=sU,t}function sH({children:e}){return(0,sN.useEffect)(()=>{sM.init("phc_WdjQSK7phXxVUA37SJLSGWvgYXlJLnJ1F2WbYbpSxpv",{api_host:"https://us.i.posthog.com",person_profiles:"identified_only",capture_pageview:!0,autocapture:!0})},[]),(0,t.jsx)(sF,{client:sM,children:e})}sV(sq,sj),sq.prototype=null===sj?Object.create(sj):(sB.prototype=sj.prototype,new sB),sq.prototype.componentDidCatch=function(e,t){var i,r=this.props.additionalProperties;s$(r)?i=r(e):"object"==typeof r&&(i=r);var n=this.context.client.captureException(e,i),s=t.componentStack;this.setState({error:e,componentStack:null!=s?s:null,exceptionEvent:n})},sq.prototype.render=function(){var e=this.props,t=e.children,i=e.fallback,r=this.state;if(null==r.componentStack)return s$(t)?t():t;var n=s$(i)?sN.default.createElement(i,{error:r.error,componentStack:r.componentStack,exceptionEvent:r.exceptionEvent}):i;return sN.default.isValidElement(n)?n:(console.warn("[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."),sN.default.createElement(sN.default.Fragment,null))},sq.contextType=sL,e.s(["default",()=>sH],69320)}]);